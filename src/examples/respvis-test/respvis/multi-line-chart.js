import { LineChart, formatWithDecimalZero, select, format, timeFormat, timeYear, } from './respvis.js';

//  Data Source: Studierendenstatistik
//  https://online.tugraz.at/tug_online/studierendenstatistik.html

// Categories: Winter, Studierende, Ordentlich, gemeldet
// ordentlich gemeldet, ohne Mitbeleger, jeweils im WS


export function createLineChart(selector) {

  const chartWindow = select(selector).append('div')
  const chart = new LineChart(chartWindow, {
    "series": {
      "x": {
        "values": [
          "1971-01-01T00:00:00.000Z",
          "1972-01-01T00:00:00.000Z",
          "1973-01-01T00:00:00.000Z",
          "1974-01-01T00:00:00.000Z",
          "1975-01-01T00:00:00.000Z",
          "1976-01-01T00:00:00.000Z",
          "1977-01-01T00:00:00.000Z",
          "1978-01-01T00:00:00.000Z",
          "1979-01-01T00:00:00.000Z",
          "1980-01-01T00:00:00.000Z",
          "1981-01-01T00:00:00.000Z",
          "1982-01-01T00:00:00.000Z",
          "1983-01-01T00:00:00.000Z",
          "1984-01-01T00:00:00.000Z",
          "1985-01-01T00:00:00.000Z",
          "1986-01-01T00:00:00.000Z",
          "1987-01-01T00:00:00.000Z",
          "1988-01-01T00:00:00.000Z",
          "1989-01-01T00:00:00.000Z",
          "1990-01-01T00:00:00.000Z",
          "1991-01-01T00:00:00.000Z",
          "1992-01-01T00:00:00.000Z",
          "1993-01-01T00:00:00.000Z",
          "1994-01-01T00:00:00.000Z",
          "1995-01-01T00:00:00.000Z",
          "1996-01-01T00:00:00.000Z",
          "1997-01-01T00:00:00.000Z",
          "1998-01-01T00:00:00.000Z",
          "1999-01-01T00:00:00.000Z",
          "2000-01-01T00:00:00.000Z",
          "2001-01-01T00:00:00.000Z",
          "2002-01-01T00:00:00.000Z",
          "2003-01-01T00:00:00.000Z",
          "2004-01-01T00:00:00.000Z",
          "2005-01-01T00:00:00.000Z",
          "2006-01-01T00:00:00.000Z",
          "2007-01-01T00:00:00.000Z",
          "2008-01-01T00:00:00.000Z",
          "2009-01-01T00:00:00.000Z",
          "2010-01-01T00:00:00.000Z",
          "2011-01-01T00:00:00.000Z",
          "2012-01-01T00:00:00.000Z",
          "2013-01-01T00:00:00.000Z",
          "2014-01-01T00:00:00.000Z",
          "1971-01-01T00:00:00.000Z",
          "1972-01-01T00:00:00.000Z",
          "1973-01-01T00:00:00.000Z",
          "1974-01-01T00:00:00.000Z",
          "1975-01-01T00:00:00.000Z",
          "1976-01-01T00:00:00.000Z",
          "1977-01-01T00:00:00.000Z",
          "1978-01-01T00:00:00.000Z",
          "1979-01-01T00:00:00.000Z",
          "1980-01-01T00:00:00.000Z",
          "1981-01-01T00:00:00.000Z",
          "1982-01-01T00:00:00.000Z",
          "1983-01-01T00:00:00.000Z",
          "1984-01-01T00:00:00.000Z",
          "1985-01-01T00:00:00.000Z",
          "1986-01-01T00:00:00.000Z",
          "1987-01-01T00:00:00.000Z",
          "1988-01-01T00:00:00.000Z",
          "1989-01-01T00:00:00.000Z",
          "1990-01-01T00:00:00.000Z",
          "1991-01-01T00:00:00.000Z",
          "1992-01-01T00:00:00.000Z",
          "1993-01-01T00:00:00.000Z",
          "1994-01-01T00:00:00.000Z",
          "1995-01-01T00:00:00.000Z",
          "1996-01-01T00:00:00.000Z",
          "1997-01-01T00:00:00.000Z",
          "1998-01-01T00:00:00.000Z",
          "1999-01-01T00:00:00.000Z",
          "2000-01-01T00:00:00.000Z",
          "2001-01-01T00:00:00.000Z",
          "2002-01-01T00:00:00.000Z",
          "2003-01-01T00:00:00.000Z",
          "2004-01-01T00:00:00.000Z",
          "2005-01-01T00:00:00.000Z",
          "2006-01-01T00:00:00.000Z",
          "2007-01-01T00:00:00.000Z",
          "2008-01-01T00:00:00.000Z",
          "2009-01-01T00:00:00.000Z",
          "2010-01-01T00:00:00.000Z",
          "2011-01-01T00:00:00.000Z",
          "2012-01-01T00:00:00.000Z",
          "2013-01-01T00:00:00.000Z",
          "2014-01-01T00:00:00.000Z",
          "1971-01-01T00:00:00.000Z",
          "1972-01-01T00:00:00.000Z",
          "1973-01-01T00:00:00.000Z",
          "1974-01-01T00:00:00.000Z",
          "1975-01-01T00:00:00.000Z",
          "1976-01-01T00:00:00.000Z",
          "1977-01-01T00:00:00.000Z",
          "1978-01-01T00:00:00.000Z",
          "1979-01-01T00:00:00.000Z",
          "1980-01-01T00:00:00.000Z",
          "1981-01-01T00:00:00.000Z",
          "1982-01-01T00:00:00.000Z",
          "1983-01-01T00:00:00.000Z",
          "1984-01-01T00:00:00.000Z",
          "1985-01-01T00:00:00.000Z",
          "1986-01-01T00:00:00.000Z",
          "1987-01-01T00:00:00.000Z",
          "1988-01-01T00:00:00.000Z",
          "1989-01-01T00:00:00.000Z",
          "1990-01-01T00:00:00.000Z",
          "1991-01-01T00:00:00.000Z",
          "1992-01-01T00:00:00.000Z",
          "1993-01-01T00:00:00.000Z",
          "1994-01-01T00:00:00.000Z",
          "1995-01-01T00:00:00.000Z",
          "1996-01-01T00:00:00.000Z",
          "1997-01-01T00:00:00.000Z",
          "1998-01-01T00:00:00.000Z",
          "1999-01-01T00:00:00.000Z",
          "2000-01-01T00:00:00.000Z",
          "2001-01-01T00:00:00.000Z",
          "2002-01-01T00:00:00.000Z",
          "2003-01-01T00:00:00.000Z",
          "2004-01-01T00:00:00.000Z",
          "2005-01-01T00:00:00.000Z",
          "2006-01-01T00:00:00.000Z",
          "2007-01-01T00:00:00.000Z",
          "2008-01-01T00:00:00.000Z",
          "2009-01-01T00:00:00.000Z",
          "2010-01-01T00:00:00.000Z",
          "2011-01-01T00:00:00.000Z",
          "2012-01-01T00:00:00.000Z",
          "2013-01-01T00:00:00.000Z",
          "2014-01-01T00:00:00.000Z"
        ]
      },
      "y": {
        "values": [
          7517.30464555213,
          8076.40926935244,
          8573.19415409445,
          8449.92845586241,
          8522.39400295407,
          8968.7756552847,
          9337.72401799863,
          9560.5454096188,
          9700.69538557241,
          9862.36549675432,
          9976.69371497302,
          9544.46094343532,
          9742.00571448125,
          10282.3746422135,
          10414.2078983205,
          10424.4272965398,
          10886.8582560496,
          11298.3325085174,
          11531.9323066701,
          11713.3317042099,
          12134.1721315039,
          12014.9582478929,
          12261.5237824091,
          12455.1621656545,
          12659.607628118,
          12854.2989079193,
          12889.8322801175,
          13154.7630268185,
          13281.8699827982,
          13671.0520240061,
          13046.6141478464,
          13296.1822993023,
          13307.4920085002,
          13388.5897105591,
          13704.5770481407,
          13583.2669593387,
          13657.4528282523,
          13663.4279681827,
          12913.7146883015,
          13394.9027551068,
          13245.8819278677,
          12964.1879389302,
          13004.0235689845,
          12993.9655794706,
          2763.64979053942,
          2967.14006665744,
          3185.02091512778,
          3298.25116675233,
          3308.57410470541,
          3581.82604217553,
          3683.42068008208,
          3873.34870420533,
          4038.28251148004,
          4132.70852206102,
          4163.95769077666,
          4187.17359928663,
          4313.49295730545,
          4516.97149225873,
          4698.91287535504,
          4808.56612058322,
          4966.74087870169,
          5088.1658952065,
          5191.76050134965,
          5133.80962888382,
          5150.26989272676,
          5110.25184679477,
          5065.95255189078,
          5133.28746237245,
          5256.12707751649,
          5388.2921383205,
          5448.75248155692,
          5541.75968104935,
          5624.42840508796,
          5780.1969699565,
          5916.93386563122,
          5996.40114418625,
          6127.24417378775,
          6242.21840590432,
          6295.43764679743,
          6380.76081095512,
          6405.55173238631,
          6409.24415100947,
          6082.50334624163,
          6350.40804422026,
          6247.77722531418,
          6248.06385564895,
          6160.73241428551,
          6021.86082034183,
          471.981626817575,
          510.20167976148,
          551.526125917308,
          545.772065286916,
          572.727158411926,
          602.638035044412,
          631.512610667832,
          673.231460720252,
          708.220746089331,
          711.772331544504,
          718.325839567605,
          726.278714771829,
          763.778327258202,
          800.058771293076,
          834.899794448081,
          861.9219017256,
          918.346971589506,
          973.643708852004,
          1025.66401029231,
          1094.99735937408,
          1141.96572705119,
          1187.06101226605,
          1242.29022718175,
          1333.72338677834,
          1387.09078203331,
          1449.42922841214,
          1499.00348512136,
          1513.02534941568,
          1565.31044203555,
          1664.54485726584,
          1726.61105098686,
          1825.37801547925,
          1947.98157644697,
          2113.36444044203,
          2260.04056032898,
          2433.52033750442,
          2645.08785710788,
          2699.32458186818,
          2794.55727893727,
          3075.40023904531,
          3273.04558239613,
          3386.16308643113,
          3571.56590131387,
          3665.12829781601
        ]
      },
      "categories": {
        "values": [
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "USA",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Europe",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia",
          "Asia"
        ],
        "title": "Continents"
      },
      "markerTooltipGenerator": "(n,i)=>`Year: ${i.xValue}<br/>Pow. Consumption: ${i.yValue}kWh`",
      "flipped": {
        "dependentOn": "width",
        "mapping": {
          "0": true,
          "2": false
        }
      },
      "zoom": {
        "in": 20,
        "out": 1
      }
    },
    "breakpoints": {
      "width": {
        "values": [
          25,
          30,
          50
        ],
        "unit": "rem"
      }
    },
    "title": {
      "dependentOn": "width",
      "mapping": {
        "0": "Power (kWh)",
        "1": "Power Consumption (kWh)",
        "3": "Electric Power Consumption (kWh per Capita)"
      }
    },
    "subTitle": {
      "dependentOn": "width",
      "mapping": {
        "0": "TU Graz",
        "1": ""
      }
    },
    "x": {
      "title": "Year",
      "subTitle": "[2012 to 2021]",
      "tickOrientation": {
        "dependentOn": "width",
        "scope": "self",
        "breakpointValues": {
          "0": 90,
          "2": 0
        }
      },
      "breakpoints": {
        "width": {
          "values": [
            10,
            30,
            50
          ],
          "unit": "rem"
        }
      },
    },
    "y": {
      "title": "Consumption",
      "breakpoints": {
        "width": {
          "values": [
            10,
            30,
            50
          ],
          "unit": "rem"
        }
      },
      "tickOrientationFlipped": {
        "dependentOn": "width",
        "scope": "self",
        "breakpointValues": {
          "0": 90,
          "3": 0
        }
      }
    }
  })
  chart.buildChart()
}
document.addEventListener('DOMContentLoaded', () => {
  // Call respvis_bar_chart to render the chart
  createLineChart();
});

window.addEventListener('beforeprint', () => {
  const chartContainer = document.querySelector('#chart');
  if (chartContainer && chartContainer.children.length === 0) {
    createLineChart();  // Reinitialize if not already rendered
  }
});