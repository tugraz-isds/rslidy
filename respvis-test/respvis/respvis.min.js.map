{"version":3,"file":"respvis.min.js","sources":["../../../src/src/packages/respvis-core/ts/constants/dom/classes.ts","../../../node_modules/tslib/tslib.es6.js","../../../src/src/packages/respvis-core/ts/constants/types.ts","../../../src/src/packages/respvis-core/ts/constants/other.ts","../../../src/src/packages/respvis-core/ts/constants/error.ts","../../../src/src/packages/respvis-core/ts/constants/cssVars.ts","../../../src/src/packages/respvis-core/ts/constants/dom/cursor.ts","../../../src/src/packages/respvis-core/ts/utilities/dom/detect-mutation.ts","../../../src/src/packages/respvis-core/ts/utilities/key.ts","../../../src/src/packages/respvis-core/ts/utilities/dom/units.ts","../../../src/src/packages/respvis-core/ts/utilities/math.ts","../../../node_modules/d3-array/src/ascending.js","../../../node_modules/d3-array/src/descending.js","../../../node_modules/d3-array/src/bisector.js","../../../node_modules/d3-array/src/bisect.js","../../../node_modules/d3-array/src/number.js","../../../node_modules/internmap/src/index.js","../../../node_modules/d3-array/src/ticks.js","../../../node_modules/d3-array/src/range.js","../../../node_modules/d3-axis/src/identity.js","../../../node_modules/d3-axis/src/axis.js","../../../node_modules/d3-dispatch/src/dispatch.js","../../../node_modules/d3-selection/src/namespaces.js","../../../node_modules/d3-selection/src/namespace.js","../../../node_modules/d3-selection/src/creator.js","../../../node_modules/d3-selection/src/selector.js","../../../node_modules/d3-selection/src/array.js","../../../node_modules/d3-selection/src/selectorAll.js","../../../node_modules/d3-selection/src/matcher.js","../../../node_modules/d3-selection/src/selection/selectChild.js","../../../node_modules/d3-selection/src/selection/selectChildren.js","../../../node_modules/d3-selection/src/selection/sparse.js","../../../node_modules/d3-selection/src/selection/enter.js","../../../node_modules/d3-selection/src/selection/data.js","../../../node_modules/d3-selection/src/selection/sort.js","../../../node_modules/d3-selection/src/selection/attr.js","../../../node_modules/d3-selection/src/window.js","../../../node_modules/d3-selection/src/selection/style.js","../../../node_modules/d3-selection/src/selection/property.js","../../../node_modules/d3-selection/src/selection/classed.js","../../../node_modules/d3-selection/src/selection/text.js","../../../node_modules/d3-selection/src/selection/html.js","../../../node_modules/d3-selection/src/selection/raise.js","../../../node_modules/d3-selection/src/selection/lower.js","../../../node_modules/d3-selection/src/selection/insert.js","../../../node_modules/d3-selection/src/selection/remove.js","../../../node_modules/d3-selection/src/selection/clone.js","../../../node_modules/d3-selection/src/selection/on.js","../../../node_modules/d3-selection/src/selection/dispatch.js","../../../node_modules/d3-selection/src/selection/index.js","../../../node_modules/d3-selection/src/select.js","../../../node_modules/d3-selection/src/pointer.js","../../../node_modules/d3-selection/src/sourceEvent.js","../../../node_modules/d3-selection/src/selectAll.js","../../../node_modules/d3-selection/src/selection/select.js","../../../node_modules/d3-selection/src/selection/selectAll.js","../../../node_modules/d3-selection/src/selection/filter.js","../../../node_modules/d3-selection/src/constant.js","../../../node_modules/d3-selection/src/selection/exit.js","../../../node_modules/d3-selection/src/selection/join.js","../../../node_modules/d3-selection/src/selection/merge.js","../../../node_modules/d3-selection/src/selection/order.js","../../../node_modules/d3-selection/src/selection/call.js","../../../node_modules/d3-selection/src/selection/nodes.js","../../../node_modules/d3-selection/src/selection/node.js","../../../node_modules/d3-selection/src/selection/size.js","../../../node_modules/d3-selection/src/selection/empty.js","../../../node_modules/d3-selection/src/selection/each.js","../../../node_modules/d3-selection/src/selection/append.js","../../../node_modules/d3-selection/src/selection/datum.js","../../../node_modules/d3-selection/src/selection/iterator.js","../../../node_modules/d3-drag/src/noevent.js","../../../node_modules/d3-drag/src/nodrag.js","../../../node_modules/d3-drag/src/constant.js","../../../node_modules/d3-drag/src/event.js","../../../node_modules/d3-drag/src/drag.js","../../../node_modules/d3-color/src/define.js","../../../node_modules/d3-color/src/color.js","../../../node_modules/d3-interpolate/src/constant.js","../../../node_modules/d3-interpolate/src/color.js","../../../node_modules/d3-interpolate/src/rgb.js","../../../node_modules/d3-interpolate/src/numberArray.js","../../../node_modules/d3-interpolate/src/array.js","../../../node_modules/d3-interpolate/src/date.js","../../../node_modules/d3-interpolate/src/number.js","../../../node_modules/d3-interpolate/src/object.js","../../../node_modules/d3-interpolate/src/string.js","../../../node_modules/d3-interpolate/src/value.js","../../../node_modules/d3-interpolate/src/round.js","../../../node_modules/d3-interpolate/src/transform/decompose.js","../../../node_modules/d3-interpolate/src/transform/parse.js","../../../node_modules/d3-interpolate/src/transform/index.js","../../../node_modules/d3-interpolate/src/zoom.js","../../../node_modules/d3-timer/src/timer.js","../../../node_modules/d3-timer/src/timeout.js","../../../node_modules/d3-transition/src/transition/schedule.js","../../../node_modules/d3-transition/src/interrupt.js","../../../node_modules/d3-transition/src/transition/tween.js","../../../node_modules/d3-transition/src/transition/interpolate.js","../../../node_modules/d3-transition/src/transition/attr.js","../../../node_modules/d3-transition/src/transition/attrTween.js","../../../node_modules/d3-transition/src/transition/delay.js","../../../node_modules/d3-transition/src/transition/duration.js","../../../node_modules/d3-transition/src/transition/selection.js","../../../node_modules/d3-transition/src/transition/style.js","../../../node_modules/d3-transition/src/transition/index.js","../../../node_modules/d3-ease/src/cubic.js","../../../node_modules/d3-transition/src/transition/select.js","../../../node_modules/d3-transition/src/transition/selectAll.js","../../../node_modules/d3-transition/src/transition/filter.js","../../../node_modules/d3-transition/src/transition/merge.js","../../../node_modules/d3-transition/src/transition/transition.js","../../../node_modules/d3-transition/src/transition/on.js","../../../node_modules/d3-transition/src/transition/styleTween.js","../../../node_modules/d3-transition/src/transition/text.js","../../../node_modules/d3-transition/src/transition/textTween.js","../../../node_modules/d3-transition/src/transition/remove.js","../../../node_modules/d3-transition/src/transition/ease.js","../../../node_modules/d3-transition/src/transition/easeVarying.js","../../../node_modules/d3-transition/src/transition/end.js","../../../node_modules/d3-transition/src/selection/transition.js","../../../node_modules/d3-format/src/formatDecimal.js","../../../node_modules/d3-format/src/exponent.js","../../../node_modules/d3-transition/src/selection/index.js","../../../node_modules/d3-transition/src/selection/interrupt.js","../../../node_modules/d3-format/src/formatSpecifier.js","../../../node_modules/d3-format/src/formatPrefixAuto.js","../../../node_modules/d3-format/src/formatRounded.js","../../../node_modules/d3-format/src/formatTypes.js","../../../node_modules/d3-format/src/identity.js","../../../node_modules/d3-format/src/locale.js","../../../node_modules/d3-format/src/defaultLocale.js","../../../node_modules/d3-format/src/formatGroup.js","../../../node_modules/d3-format/src/formatNumerals.js","../../../node_modules/d3-format/src/formatTrim.js","../../../node_modules/d3-scale/src/init.js","../../../node_modules/d3-scale/src/ordinal.js","../../../node_modules/d3-scale/src/band.js","../../../node_modules/d3-scale/src/number.js","../../../node_modules/d3-scale/src/continuous.js","../../../node_modules/d3-scale/src/constant.js","../../../node_modules/d3-scale/src/tickFormat.js","../../../node_modules/d3-format/src/precisionPrefix.js","../../../node_modules/d3-format/src/precisionRound.js","../../../node_modules/d3-format/src/precisionFixed.js","../../../node_modules/d3-scale/src/linear.js","../../../node_modules/d3-scale/src/pow.js","../../../node_modules/d3-time/src/interval.js","../../../node_modules/d3-time/src/millisecond.js","../../../node_modules/d3-time/src/duration.js","../../../node_modules/d3-time/src/second.js","../../../node_modules/d3-time/src/minute.js","../../../node_modules/d3-time/src/hour.js","../../../node_modules/d3-time/src/day.js","../../../node_modules/d3-time/src/week.js","../../../node_modules/d3-time/src/month.js","../../../node_modules/d3-time/src/year.js","../../../node_modules/d3-time/src/ticks.js","../../../node_modules/d3-time-format/src/locale.js","../../../node_modules/d3-time-format/src/defaultLocale.js","../../../node_modules/d3-scale/src/time.js","../../../node_modules/d3-scale/src/nice.js","../../../node_modules/d3-scale/src/sequential.js","../../../node_modules/d3-zoom/src/constant.js","../../../node_modules/d3-zoom/src/event.js","../../../node_modules/d3-zoom/src/transform.js","../../../node_modules/d3-zoom/src/noevent.js","../../../node_modules/d3-zoom/src/zoom.js","../../../src/src/packages/respvis-core/ts/utilities/d3/selection.ts","../../../src/src/packages/respvis-core/ts/utilities/d3/drag.ts","../../../src/src/packages/respvis-core/ts/utilities/d3/transition.ts","../../../src/src/packages/respvis-core/ts/utilities/d3/throttle.ts","../../../src/src/packages/respvis-core/ts/utilities/d3/formats.ts","../../../src/src/packages/respvis-core/ts/utilities/geometry/shapes/rect/diff.ts","../../../src/src/packages/respvis-core/ts/utilities/geometry/position/position.ts","../../../src/src/packages/respvis-core/ts/utilities/d3/text.ts","../../../src/src/packages/respvis-core/ts/utilities/geometry/shapes/rect/size.ts","../../../src/src/packages/respvis-core/ts/utilities/dom/element/element.ts","../../../src/src/packages/respvis-core/ts/utilities/array.ts","../../../src/src/packages/respvis-core/ts/utilities/geometry/shapes/rect/rect.ts","../../../src/src/packages/respvis-core/ts/utilities/geometry/shapes/circle.ts","../../../src/src/packages/respvis-core/ts/utilities/geometry/shapes/ellipse.ts","../../../src/src/packages/respvis-core/ts/utilities/geometry/shapes/line.ts","../../../src/src/packages/respvis-core/ts/utilities/geometry/angle.ts","../../../src/src/packages/respvis-core/ts/utilities/typescript.ts","../../../src/src/packages/respvis-core/ts/utilities/unique.ts","../../../src/src/packages/respvis-core/ts/utilities/dom/element/element-bounds.ts","../../../src/src/packages/respvis-core/ts/data/breakpoints/breakpoints.ts","../../../src/src/packages/respvis-core/ts/data/breakpoints/component-breakpoints/component-breakpoints.ts","../../../src/src/packages/respvis-core/ts/data/breakpoints/layout-width.ts","../../../src/src/packages/respvis-core/ts/data/responsive-property/responsive-property-base.ts","../../../src/src/packages/respvis-core/ts/data/responsive-property/responsive-value.ts","../../../src/src/packages/respvis-core/ts/data/responsive-property/breakpoint-property.ts","../../../src/src/packages/respvis-core/ts/data/categories/categories.ts","../../../src/src/packages/respvis-core/ts/render/axis/configure-tick-angle.ts","../../../src/src/packages/respvis-core/ts/render/axis/calculate-tick-angle.ts","../../../src/src/packages/respvis-core/ts/render/element/bg-svg-only.ts","../../../src/src/packages/respvis-core/ts/render/axis/render-axis.ts","../../../src/src/packages/respvis-core/ts/render/axis/render-axis-ticks.ts","../../../src/src/packages/respvis-core/ts/render/axis/validate-base-axis.ts","../../../src/src/packages/respvis-core/ts/render/axis/validate-lightweight-axis.ts","../../../src/src/packages/respvis-core/ts/data/scale/scales.ts","../../../src/src/packages/respvis-core/ts/data/scale/scaled-values-spatial/scaled-values-spatial-base.ts","../../../src/src/packages/respvis-core/ts/data/scale/scaled-values-spatial/scaled-values-categorical.ts","../../../src/src/packages/respvis-core/ts/data/scale/scaled-values-spatial/scaled-values-temporal.ts","../../../node_modules/d3-array/src/min.js","../../../node_modules/d3-array/src/max.js","../../../src/src/packages/respvis-core/ts/data/scale/scaled-values-spatial/scaled-values-numeric.ts","../../../src/src/packages/respvis-core/ts/data/scale/scaled-values-spatial/validate-scaled-values-spatial.ts","../../../src/src/packages/respvis-core/ts/data/scale/scaled-values-cumulative-summation.ts","../../../src/src/packages/respvis-core/ts/data/sequential-color/sequential-color.ts","../../../src/src/packages/respvis-core/ts/data/zoom/zoom.ts","../../../src/src/packages/respvis-tooltip/ts/render/tooltip.ts","../../../src/src/packages/respvis-tooltip/ts/render/data-series-tooltip.ts","../../../src/src/packages/respvis-tooltip/ts/render/render-tooltip.ts","../../../src/src/packages/respvis-tooltip/ts/render/movable-cross-tooltip.ts","../../../src/src/packages/respvis-core/ts/render/window/render-window.ts","../../../src/src/packages/respvis-core/ts/render/window/window-settings.ts","../../../src/src/packages/respvis-core/ts/render/window/window.ts","../../../src/src/packages/respvis-core/ts/render/chart/chart/resize-event-dispatcher.ts","../../../src/src/packages/respvis-core/ts/render/chart/chart/render-chart.ts","../../../src/src/packages/respvis-core/ts/render/layouter/layout-elements.ts","../../../src/src/packages/respvis-core/ts/render/layouter/layout-node-children.ts","../../../src/src/packages/respvis-core/ts/render/layouter/layouter-compute.ts","../../../src/src/packages/respvis-core/ts/render/chart/chart/chart.ts","../../../src/src/packages/respvis-core/ts/render/chart/chart/validate-chart.ts","../../../src/src/packages/respvis-core/ts/render/legend/legend-highlighting.ts","../../../src/src/packages/respvis-core/ts/render/legend/legend-item/create-legend-items.ts","../../../src/src/packages/respvis-core/ts/render/legend/legend-item/render-legend-categories.ts","../../../src/src/packages/respvis-core/ts/render/legend/render-legend.ts","../../../src/src/packages/respvis-core/ts/render/legend/validate-legend.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/tool/render/render-dialog.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/tool/render/render-tool.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/download-chart/optimize-svg.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/download-chart/apply-download-style/get-active-cssrules.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/download-chart/apply-download-style/adapt-selectors.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/download-chart/apply-download-style/apply-download-style.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/download-chart/apply-download-style/get-active-cssvars.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/download-chart/apply-download-style/create-cssrule.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/download-chart/prettify-svg.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/tool/render/render-button.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/tool/render/render-simple-tooltip.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/tool/input-label/render-input-labels.ts","../../../src/src/packages/respvis-core/ts/render/element/svg-series.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/tool/input-label/radio-label.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/tool/render/render-fieldset.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/render/render-style-type-options.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/tool/input-label/checkbox-label.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/render/render-attribute-removal-options.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/tool/input-label/number-label.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/render/render-decimal-number-options.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/render/render-download-tool.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/render/render-margin-options.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/render/render-prettify-options.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/download-chart/download-chart.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/download-tool/render/render-element-removal-options.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/tool/input-label/range-label.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/filter-tool/render-filter-tool.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/tool/animation/animtation.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/render-toolbar.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/cross-tool/render-cross-tool.ts","../../../src/src/packages/respvis-core/ts/render/toolbar/chart-tool/render-chart-tool.ts","../../../src/src/packages/respvis-core/ts/render/data-series/data-series-highlighting.ts","../../../src/src/packages/respvis-core/ts/render/label/label-series.ts","../../../src/src/packages/respvis-core/ts/render/chart/series-chart/data-series-chart-mixin.ts","../../../src/src/packages/respvis-core/ts/render/data-series/validate-data-series.ts","../../../src/src/packages/respvis-core/ts/render/data-series/responsive-state.ts","../../../src/src/packages/respvis-core/ts/render/data-series/empty-series.ts","../../../src/src/packages/respvis-cartesian/ts/render/validate-cartesian-axis.ts","../../../src/src/packages/respvis-cartesian/ts/render/cartesian-chart/validate-cartesian-chart.ts","../../../src/src/packages/respvis-cartesian/ts/render/cartesian-chart/render/render-cartesian-axes.ts","../../../src/src/packages/respvis-cartesian/ts/render/cartesian-chart/render/render-grid.ts","../../../src/src/packages/respvis-cartesian/ts/render/cartesian-chart/render/render-origin-line.ts","../../../src/src/packages/respvis-cartesian/ts/render/cartesian-chart/cartesian-chart-mixin.ts","../../../src/src/packages/respvis-cartesian/ts/render/cartesian-series/cartesian-series.ts","../../../src/src/packages/respvis-cartesian/ts/render/cartesian-series/handle-zoom.ts","../../../src/src/packages/respvis-cartesian/ts/render/cartesian-series/cartesian-responsive-state.ts","../../../src/src/packages/respvis-cartesian/ts/render/cartesian-series/validate-cartesian-series.ts","../../../src/src/packages/respvis-bar/ts/render/bar.ts","../../../src/src/packages/respvis-bar/ts/render/bar-series/bar-base/bar-base-responsive-state.ts","../../../src/src/packages/respvis-bar/ts/render/bar-series/bar-base/bar-base-series.ts","../../../src/src/packages/respvis-bar/ts/render/bar-label.ts","../../../src/src/packages/respvis-bar/ts/render/bar-series/bar-base/validate-bar-base-series.ts","../../../src/src/packages/respvis-bar/ts/render/bar-series/bar-stacked/bar-stacked-series.ts","../../../src/src/packages/respvis-bar/ts/render/bar-series/bar-stacked/bar-stacked-creation.ts","../../../src/src/packages/respvis-bar/ts/render/bar-series/bar-grouped/bar-grouped-series.ts","../../../src/src/packages/respvis-bar/ts/render/bar-series/bar-grouped/bar-grouped-creation.ts","../../../src/src/packages/respvis-bar/ts/render/bar-series/bar-base/bar-standard-series.ts","../../../src/src/packages/respvis-bar/ts/render/bar-series/join-bar-series.ts","../../../src/src/packages/respvis-bar/ts/render/bar-series/render-bar-series.ts","../../../src/src/packages/respvis-bar/ts/render/bar-chart/validate-bar-chart.ts","../../../src/src/packages/respvis-bar/ts/render/bar-chart/bar-chart.ts","../../../src/src/packages/respvis-point/ts/render/point-series/point-responsive-state.ts","../../../src/src/packages/respvis-point/ts/data/radius/base-radius.ts","../../../src/src/packages/respvis-point/ts/data/radius/extrema.ts","../../../src/src/packages/respvis-point/ts/data/radius/bubble-radius.ts","../../../src/src/packages/respvis-point/ts/render/point-label.ts","../../../src/src/packages/respvis-point/ts/render/point-series/validate-point-series.ts","../../../src/src/packages/respvis-point/ts/render/point-series/point-series.ts","../../../src/src/packages/respvis-point/ts/render/point-series/render-radius-scale.ts","../../../src/src/packages/respvis-point/ts/render/scatter-plot/validate-scatter-plot.ts","../../../src/src/packages/respvis-point/ts/render/point-series/join-point-series.ts","../../../src/src/packages/respvis-point/ts/render/point.ts","../../../src/src/packages/respvis-point/ts/render/point-series/create-points.ts","../../../src/src/packages/respvis-point/ts/render/point-series/render-point-series.ts","../../../src/src/packages/respvis-point/ts/render/scatter-plot/scatter-plot.ts","../../../src/src/packages/respvis-line/ts/render/line-series/line-series.ts","../../../src/src/packages/respvis-line/ts/render/line-chart/validate-line-chart.ts","../../../src/src/packages/respvis-line/ts/render/line-series/join-line-series.ts","../../../src/src/packages/respvis-line/ts/render/line-series/render-line-series.ts","../../../src/src/packages/respvis-line/ts/render/line-chart/line-chart.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/render/on-drag-axis.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/render/render-tool.ts","../../../src/src/packages/respvis-parcoord/ts/render/validate-keyed-axis.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/validate-parcoord-series.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/parcoord-responsive-state.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/parcoord-series.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-chart/validate-parcoord-chart.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/render/render-line-series.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/render/set-up-axis-zoom.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/render/on-zoom-axis.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/render/render-path-chevron.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/render/render-axis-limiter.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/render/render-axis-inverter.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/render/set-up-axis-drag.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/render/render-parcoord-axis-series.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/render/update-axis-cursor-classes.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-chart/parcoord-chart.ts","../../../src/src/packages/respvis-parcoord/ts/render/parcoord-series/render/render-parcoord-series.ts"],"sourcesContent":["export const backgroundSVGOnly = 'background-svgonly'\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n};\r\n","export type SVGHTMLElement = SVGElement | HTMLElement\nexport type SVGHTMLElementLegacy = SVGGElement | HTMLElement\nexport type SVGGroupingElement = SVGSVGElement | SVGGElement | SVGClipPathElement\nexport type SVGHTMLGroupingElement = SVGGroupingElement | HTMLElement\n\nexport const LengthDimensions = ['width', 'height'] as const\nexport type LengthDimension = typeof LengthDimensions[number]\n\n\nexport type CSSPXUnit = 'px'\nexport type CSSREMUnit = 'rem'\nexport type CSSEMUnit = 'em'\nexport type CSSPERUnit = '%'\nexport type CSSAbsoluteLengthUnit = CSSPXUnit | CSSREMUnit\nexport type CSSRelativeLengthUnit = CSSEMUnit | CSSPERUnit\nexport type CSSBreakpointLengthUnit = CSSAbsoluteLengthUnit | CSSEMUnit\n\nexport type UnitValue<Unit extends string> = `${number}${Unit}`\n\nexport const CSSBreakpointLengthRegex = /(\\d+(?:\\.\\d+)?)(px|rem|em)/\nexport function isCSSBreakpointLengthValue(value: any): value is UnitValue<CSSBreakpointLengthUnit> {\n  return value.match(CSSBreakpointLengthRegex) !== null\n}\n\nexport type CSSLengthUnit = CSSAbsoluteLengthUnit | CSSRelativeLengthUnit\nexport type CSSLengthValue = `${number}${CSSLengthUnit}`\n\nexport const CSSLengthRegex = /(\\d+(?:\\.\\d+)?)(px|rem|em|%)/\nexport function isCSSLengthValue(value: any): value is UnitValue<CSSLengthUnit> {\n  return value.match(CSSLengthRegex) !== null\n}\n\n\n\n\nexport type CartesianChartType = 'point' | 'bar' | 'line'\n\nexport type ChartType = CartesianChartType | 'parcoord'\n\nexport type BarSeriesType = 'standard' | 'stacked' | 'grouped'\n\nexport const Orientations = ['horizontal', 'vertical'] as const\nexport type Orientation = typeof Orientations[number]\n\nexport type ScaledValueTag = 'categorical' | 'linear' | 'date'\n\nexport type TextAnchor = 'start' | 'end' | 'middle'\nexport type Polarity = 'positive' | 'negative'\n\n\n\nexport type KeyType = 'series' | 'axis' | 'category' | 'individual'\nexport type AxisKey = `a-${number}` | `ac-${number}` | `ar-${number}`\nexport type SeriesKey = `s-${number}`\nexport type CategoryKey = `c-${number}`\nexport type IndividualKey = `i-${number}`\n\nexport const AxisLayoutsHorizontal = ['bottom', 'top'] as const\nexport type AxisLayoutHorizontal = typeof AxisLayoutsHorizontal[number]\nexport const AxisLayoutsVertical = ['left', 'right'] as const\nexport type AxisLayoutVertical = typeof AxisLayoutsVertical[number]\nexport const AxisLayouts = [...AxisLayoutsHorizontal, ...AxisLayoutsVertical] as const\n\nexport type AxisLayout = 'bottom' | 'left'\nexport type AxisOrientation = AxisLayout | 'top' | 'right'\nexport type AxisType = 'x' | 'y'\n\n\nexport type ActiveKeyMap = {[p: string]: boolean}\n\nexport const categoryRegex = /^c-\\d+$/\n\n\n\n// util types\n\nexport type PartialBy<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>\n\nexport type ToArray<T> = T extends any ? T[] : never;\n\n\nexport type KeyObjectFromObject<T extends Object> = {\n  [K in keyof T]: K;\n}\n\nexport function genKeyObjectFromObject<T extends Object>(object: T) {\n  return Object.keys(object).reduce((prev, accu ) => {\n    prev[accu] = accu\n    return prev\n  }, {}) as KeyObjectFromObject<T>\n}\n","\nexport const maxBreakpointCount = 30\n\nexport const defaultExtrema = {\n  min: 5,\n  max: 30\n} as const\n\nexport const pxUpperLimit = '10000px'\nexport const pxLowerLimit = '0px'\n\n\n\nexport const defaultScope = 'chart'\nexport const defaultLayoutIndex = 0\nexport const defaultStyleClass = 'categorical-0'\n\nexport const noParentKey = 'no-parent'\n","export const ErrorMessages = {\n  categoricalValuesMismatch: 'Number of categorical values does not match with number of reference values!',\n  sequentialColorValuesMismatch: 'Number of sequentially colored values does not match with number of reference values!',\n  defaultError: 'An internal error occurred in RespVis!',\n  invalidResponsiveValue: 'You passed an invalid responisve value object!',\n  invalidExtremaCombination: 'You passed an invalid combination of minimum and maximum values!',\n  elementNotExisting: 'An accessed element did not exist!',\n  responsiveValueHasNoValues: 'A responsive value was not provided with any value!',\n  invalidScaledValuesCombination: 'You passed an invalid scale for the corresponding domain of values!',\n  invalidArgumentForSeries: 'You passed an invalid argument for a specific type of series!',\n  missingArgumentForSeries: 'You did not pass a necessary argument for a specific type of series!',\n  invalidWindowsSetting: 'Currently a setting is set to an invalid value!',\n  evaluatingCSSUnitError: 'Evaluating CSS unit was not successful. Make sure to pass necessary context information!',\n  convertingInvalidUnit: `Invalid unit cannot be converted!`,\n  emptyValueArrayProvided: `The array of values passed to RespVis was empty!`,\n  parcoordMinAxesCount: 'Parcoord Chart must have a minimal axis count of 2!'\n}\n","import {genKeyObjectFromObject} from \"./types\";\n\nexport const cssVarsDefaults = {\n  // '--layout-width-factor': 0,\n  // '--layout-height-factor': 0\n  '--layout-width': 0,\n  '--layout-width-pre-breakpoint': '0rem',\n  '--layout-width-post-breakpoint': '0rem',\n  '--layout-height': 0,\n  '--layout-height-pre-breakpoint': '0rem',\n  '--layout-height-post-breakpoint': '0rem',\n  //LEGEND\n  '--min-radius': '0',\n  '--max-radius': '0'\n} as const\nexport const cssVarDefaultsKeys= genKeyObjectFromObject(cssVarsDefaults)\nexport type CssVar = keyof typeof cssVarsDefaults;\nexport const cssVars: readonly CssVar[] = Object.keys(cssVarsDefaults) as CssVar[]\n\n\n","export const cursorClasses = [\n  'cursor--invert-vertical',\n  'cursor--invert-up',\n  'cursor--invert-horizontal',\n  'cursor--invert-right',\n  'cursor--range-vertical',\n  'cursor--range-up',\n  'cursor--range-horizontal',\n  'cursor--range-left',\n  'cursor--range-rect',\n  'cursor--range-rect-horizontal',\n  'cursor--drag-horizontal',\n  'cursor--drag-right-only',\n  'cursor--drag-left-only',\n  'cursor--drag-vertical',\n  'cursor--drag-up-only',\n  'cursor--drag-down-only',\n] as const\ntype CursorClass = typeof cursorClasses[number]\n","export function detectClassChange(element: Element, onClassChange: () => void) {\n  const observer = new MutationObserver((mutationsList) => {\n    for (const mutation of mutationsList) {\n      if (mutation.type === 'attributes' && mutation.attributeName === 'class') {\n        onClassChange()\n      }\n    }\n  })\n  const config = { attributes: true, attributeFilter: ['class'] };\n  observer.observe(element, config);\n  return {observer}\n}\n","import {ActiveKeyMap} from \"../constants/types\";\n\nexport function splitKey(key: string) {\n  return key.split(/[ ,]+/)\n}\n\nexport function combineKeys(keys: (string | undefined)[]): string {\n  return keys.reduce((prev, current) => {\n    return prev + (current ? ' ' + current : '' )\n  }, '')?.trimStart() as string\n}\n\nexport function mergeKeys(keys: string[]) {\n  return keys.reduce((prev, current) => {\n    return prev + '-' + current\n  })\n}\n\nexport function getActiveKeys(keysActive: ActiveKeyMap) {\n  return Object.keys(keysActive).filter((key) => keysActive[key])\n}\n\nexport class Key {\n  rawKey: string\n\n  constructor(rawKey: string) {\n    this.rawKey = rawKey\n  }\n\n  getIndex(): number | undefined {\n    const matchIndex = this.rawKey.match(/\\bi-(\\d+)\\b/)\n    if (!matchIndex) return undefined\n    return parseInt(matchIndex[1])\n  }\n\n  getSeries(): number | undefined {\n    const matchIndex = this.rawKey.match(/\\bs-(\\d+)\\b/)\n    if (!matchIndex) return undefined\n    return parseInt(matchIndex[1])\n  }\n\n  getSeriesCategory(): [number, number] | undefined {\n    const matchIndex = this.rawKey.match(/\\bs-(\\d+)-c-(\\d+)\\b/)\n    if (!matchIndex) return undefined\n    return [parseInt(matchIndex[1]), parseInt(matchIndex[2])]\n  }\n\n  getAxisCategories() {\n    const regex = /\\ba-(\\d+)-c-(\\d+)\\b/g;\n    let matchIndex\n    const pairs: [number, number][] = []\n    while ((matchIndex = regex.exec(this.rawKey)) !== null) {\n      pairs.push([parseInt(matchIndex[1]), parseInt(matchIndex[2])])\n    }\n    return pairs\n  }\n}\n","import {\n  CSSLengthRegex,\n  CSSLengthUnit,\n  isCSSBreakpointLengthValue,\n  LengthDimension,\n  UnitValue\n} from \"../../constants/types\";\nimport {ErrorMessages} from \"../../constants/error\";\n\n//TODO: maybe add additional units like ch, vh, etc.\n// export function cssLengthInPx(length: UnitValue<CSSAbsoluteLengthUnit>): number\n// export function cssLengthInPx(length: UnitValue<CSSEMUnit>, element: Element): number\n// export function cssLengthInPx(length: UnitValue<CSSPERUnit>, element: Element, dim: LengthDimension): number\nexport function cssLengthInPx(length: UnitValue<CSSLengthUnit>, element?: Element, dim?: LengthDimension) {\n  const match = length.match(CSSLengthRegex)\n  if (!match) return 0\n  const [, value, unit] = match as [any, number | string, CSSLengthUnit]\n  const valueNumber = typeof value === 'string' ? parseFloat(value) : value\n  if (unit === 'px') return valueNumber\n  if (unit === 'rem') return valueNumber * parseFloat(getComputedStyle(document.documentElement).fontSize)\n  if (unit === 'em' && element) return valueNumber * parseFloat(getComputedStyle(element).fontSize)\n  if (unit === 'em' && !element) throw new Error(ErrorMessages.evaluatingCSSUnitError)\n  if(unit === '%' && element && dim) return valueNumber / 100 * element.getBoundingClientRect()[dim]\n  if(unit === '%' && !(element && dim)) throw new Error(ErrorMessages.evaluatingCSSUnitError)\n  throw new Error(ErrorMessages.evaluatingCSSUnitError)\n}\n\nexport function getCSSVarLengthInPx(element: Element, cssVar: string, defaultValue: number) {\n  const val = getComputedStyle(element).getPropertyValue(cssVar)\n  if (isCSSBreakpointLengthValue(val)) return cssLengthInPx(val, element)\n  return defaultValue\n}\n","export function calcLimited(num: number, lowerLimit: number, upperLimit: number) {\n  const overflow = num > upperLimit\n  const underflow = num < lowerLimit\n  return overflow ? upperLimit : underflow ? lowerLimit : num\n}\n","export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n","import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We cant do this\n  // for a comparator (except for specific, known comparators) because we cant\n  // tell if the comparator is symmetric, and an asymmetric comparator cant be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(key);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","const e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nfunction tickSpec(start, stop, count) {\n  const step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log10(step)),\n      error = step / Math.pow(10, power),\n      factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;\n  let i1, i2, inc;\n  if (power < 0) {\n    inc = Math.pow(10, -power) / factor;\n    i1 = Math.round(start * inc);\n    i2 = Math.round(stop * inc);\n    if (i1 / inc < start) ++i1;\n    if (i2 / inc > stop) --i2;\n    inc = -inc;\n  } else {\n    inc = Math.pow(10, power) * factor;\n    i1 = Math.round(start / inc);\n    i2 = Math.round(stop / inc);\n    if (i1 * inc < start) ++i1;\n    if (i2 * inc > stop) --i2;\n  }\n  if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start, stop, count * 2);\n  return [i1, i2, inc];\n}\n\nexport default function ticks(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  if (!(count > 0)) return [];\n  if (start === stop) return [start];\n  const reverse = stop < start, [i1, i2, inc] = reverse ? tickSpec(stop, start, count) : tickSpec(start, stop, count);\n  if (!(i2 >= i1)) return [];\n  const n = i2 - i1 + 1, ticks = new Array(n);\n  if (reverse) {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) * inc;\n  } else {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) * inc;\n  }\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  return tickSpec(start, stop, count)[2];\n}\n\nexport function tickStep(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  const reverse = stop < start, inc = reverse ? tickIncrement(stop, start, count) : tickIncrement(start, stop, count);\n  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);\n}\n","export default function range(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","export default function(x) {\n  return x;\n}\n","import identity from \"./identity.js\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + x + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + y + \")\";\n}\n\nfunction number(scale) {\n  return d => +scale(d);\n}\n\nfunction center(scale, offset) {\n  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return d => +scale(d) + offset;\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      offset = typeof window !== \"undefined\" && window.devicePixelRatio > 1 ? 0 : 0.5,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + offset,\n        range1 = +range[range.length - 1] + offset,\n        position = (scale.bandwidth ? center : number)(scale.copy(), offset),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"currentColor\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"currentColor\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d + offset) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform((p && isFinite(p = p(d)) ? p : position(d)) + offset); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient === right\n            ? (tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H\" + offset + \"V\" + range1 + \"H\" + k * tickSizeOuter : \"M\" + offset + \",\" + range0 + \"V\" + range1)\n            : (tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V\" + offset + \"H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",\" + offset + \"H\" + range1));\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d) + offset); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = Array.from(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  axis.offset = function(_) {\n    return arguments.length ? (offset = +_, axis) : offset;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import array from \"./array.js\";\nimport {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([array(selector)], root);\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {InternMap} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new InternMap(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    let i = index.get(d);\n    if (i === undefined) {\n      if (unknown !== implicit) return unknown;\n      index.set(d, i = domain.push(d) - 1);\n    }\n    return range[i % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new InternMap();\n    for (const value of _) {\n      if (index.has(value)) continue;\n      index.set(value, domain.push(value) - 1);\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {linearish} from \"./linear.js\";\nimport {copy, identity, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformPow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction transformSqrt(x) {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n}\n\nfunction transformSquare(x) {\n  return x < 0 ? -x * x : x * x;\n}\n\nexport function powish(transform) {\n  var scale = transform(identity, identity),\n      exponent = 1;\n\n  function rescale() {\n    return exponent === 1 ? transform(identity, identity)\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\n        : transform(transformPow(exponent), transformPow(1 / exponent));\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\n  };\n\n  return linearish(scale);\n}\n\nexport default function pow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, pow()).exponent(scale.exponent());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n\nexport function sqrt() {\n  return pow.apply(null, arguments).exponent(0.5);\n}\n","const t0 = new Date, t1 = new Date;\n\nexport function timeInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = (date) => {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = (date) => {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = (date) => {\n    const d0 = interval(date), d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = (date, step) => {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = (start, stop, step) => {\n    const range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    let previous;\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = (test) => {\n    return timeInterval((date) => {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, (date, step) => {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = (start, end) => {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = (step) => {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? (d) => field(d) % step === 0\n              : (d) => interval.count(0, d) % step === 0);\n    };\n  }\n\n  return interval;\n}\n","import {timeInterval} from \"./interval.js\";\n\nexport const millisecond = timeInterval(() => {\n  // noop\n}, (date, step) => {\n  date.setTime(+date + step);\n}, (start, end) => {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = (k) => {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return timeInterval((date) => {\n    date.setTime(Math.floor(date / k) * k);\n  }, (date, step) => {\n    date.setTime(+date + step * k);\n  }, (start, end) => {\n    return (end - start) / k;\n  });\n};\n\nexport const milliseconds = millisecond.range;\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","import {timeInterval} from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nexport const second = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds());\n}, (date, step) => {\n  date.setTime(+date + step * durationSecond);\n}, (start, end) => {\n  return (end - start) / durationSecond;\n}, (date) => {\n  return date.getUTCSeconds();\n});\n\nexport const seconds = second.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeMinute = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getMinutes();\n});\n\nexport const timeMinutes = timeMinute.range;\n\nexport const utcMinute = timeInterval((date) => {\n  date.setUTCSeconds(0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getUTCMinutes();\n});\n\nexport const utcMinutes = utcMinute.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeHour = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getHours();\n});\n\nexport const timeHours = timeHour.range;\n\nexport const utcHour = timeInterval((date) => {\n  date.setUTCMinutes(0, 0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getUTCHours();\n});\n\nexport const utcHours = utcHour.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nexport const timeDay = timeInterval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport const timeDays = timeDay.range;\n\nexport const utcDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return date.getUTCDate() - 1;\n});\n\nexport const utcDays = utcDay.range;\n\nexport const unixDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return Math.floor(date / durationDay);\n});\n\nexport const unixDays = unixDay.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction timeWeekday(i) {\n  return timeInterval((date) => {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setDate(date.getDate() + step * 7);\n  }, (start, end) => {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport const timeSunday = timeWeekday(0);\nexport const timeMonday = timeWeekday(1);\nexport const timeTuesday = timeWeekday(2);\nexport const timeWednesday = timeWeekday(3);\nexport const timeThursday = timeWeekday(4);\nexport const timeFriday = timeWeekday(5);\nexport const timeSaturday = timeWeekday(6);\n\nexport const timeSundays = timeSunday.range;\nexport const timeMondays = timeMonday.range;\nexport const timeTuesdays = timeTuesday.range;\nexport const timeWednesdays = timeWednesday.range;\nexport const timeThursdays = timeThursday.range;\nexport const timeFridays = timeFriday.range;\nexport const timeSaturdays = timeSaturday.range;\n\nfunction utcWeekday(i) {\n  return timeInterval((date) => {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, (start, end) => {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport const utcSunday = utcWeekday(0);\nexport const utcMonday = utcWeekday(1);\nexport const utcTuesday = utcWeekday(2);\nexport const utcWednesday = utcWeekday(3);\nexport const utcThursday = utcWeekday(4);\nexport const utcFriday = utcWeekday(5);\nexport const utcSaturday = utcWeekday(6);\n\nexport const utcSundays = utcSunday.range;\nexport const utcMondays = utcMonday.range;\nexport const utcTuesdays = utcTuesday.range;\nexport const utcWednesdays = utcWednesday.range;\nexport const utcThursdays = utcThursday.range;\nexport const utcFridays = utcFriday.range;\nexport const utcSaturdays = utcSaturday.range;\n","import {timeInterval} from \"./interval.js\";\n\nexport const timeMonth = timeInterval((date) => {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setMonth(date.getMonth() + step);\n}, (start, end) => {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, (date) => {\n  return date.getMonth();\n});\n\nexport const timeMonths = timeMonth.range;\n\nexport const utcMonth = timeInterval((date) => {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, (start, end) => {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, (date) => {\n  return date.getUTCMonth();\n});\n\nexport const utcMonths = utcMonth.range;\n","import {timeInterval} from \"./interval.js\";\n\nexport const timeYear = timeInterval((date) => {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setFullYear(date.getFullYear() + step);\n}, (start, end) => {\n  return end.getFullYear() - start.getFullYear();\n}, (date) => {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\ntimeYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport const timeYears = timeYear.range;\n\nexport const utcYear = timeInterval((date) => {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, (start, end) => {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, (date) => {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport const utcYears = utcYear.range;\n","import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport {millisecond} from \"./millisecond.js\";\nimport {second} from \"./second.js\";\nimport {timeMinute, utcMinute} from \"./minute.js\";\nimport {timeHour, utcHour} from \"./hour.js\";\nimport {timeDay, unixDay} from \"./day.js\";\nimport {timeSunday, utcSunday} from \"./week.js\";\nimport {timeMonth, utcMonth} from \"./month.js\";\nimport {timeYear, utcYear} from \"./year.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcSunday, unixDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(timeYear, timeMonth, timeSunday, timeDay, timeHour, timeMinute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeTicks, timeTickInterval} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    return interval ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {interpolate, interpolateRound} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 1,\n      t0,\n      t1,\n      k10,\n      transform,\n      interpolator = identity,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1;\n      return arguments.length ? ([r0, r1] = _, interpolator = interpolate(r0, r1), scale) : [interpolator(0), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\n    return scale;\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .interpolator(source.interpolator())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport default function sequential() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, sequential());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialLog() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, sequentialLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSqrt() {\n  return sequentialPow.apply(null, arguments).exponent(0.5);\n}\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import {BaseType, select, selectAll, Selection, Transition} from 'd3';\nimport {ErrorMessages} from \"../../constants\";\n\nexport type SelectionOrTransition<\n  // provide default type parameters\n  GElement extends BaseType = BaseType,\n  Datum = unknown,\n  PElement extends BaseType = BaseType,\n  PDatum = unknown\n> = Selection<GElement, Datum, PElement, PDatum> | Transition<GElement, Datum, PElement, PDatum>;\n\nexport function mapSelection<E extends BaseType, D>(selection: Selection<any, D>, mapper: (selection: Selection<any, D>) => Selection<E, D>) {\n  let nodes: E[] = []\n  selection.each((d, i, g) => {\n    const mappingNode = mapper(select(g[i])).node()\n    if (mappingNode) nodes.push(mappingNode)\n  })\n  return selectAll<E, D>(nodes)\n}\n\nexport function applyClassList(selection: Selection, classList: string[], active: boolean) {\n  classList.forEach(classToApply => selection.classed(classToApply, active))\n  return selection\n}\n\nexport function elementFromSelection<T extends BaseType>(selection?: Selection<T>): T {\n  const element = selection?.node()\n  if (!element) throw new Error(ErrorMessages.elementNotExisting)\n  return element\n}\n\nexport function cssVarFromSelection<T extends BaseType>(selection: Selection<T>, cssVar: string) {\n  const element = selection?.node()\n  if (!element || !(element instanceof Element)) return undefined\n  return getComputedStyle(element).getPropertyValue(cssVar)\n}\n\nexport function createSelectionClasses(classes: string[], leadingSpace = false) {\n  const selector = classes.map(currentClass => '.' + currentClass).join('')\n  const classString = classes.map(currentClass => ' ' + currentClass).join('')\n  if (!leadingSpace) classString.trimStart()\n  return {selector, classString}\n}\n","import {D3DragEvent, Selection} from \"d3\";\nimport {cursorClasses} from \"../../constants/dom/cursor\";\nimport {detectClassChange} from \"../dom\";\nimport {calcLimited} from \"../math\";\nimport {elementFromSelection} from \"./selection\";\n\nexport function relateDragWayToSelection(e: MouseEvent | TouchEvent, selection: Selection<Element>) {\n  const rect = selection.node()?.getBoundingClientRect()\n  if (!rect || !e || (window.TouchEvent && e instanceof TouchEvent && e.touches?.[0] === undefined)) return undefined\n\n  const pointerPositionX = e instanceof MouseEvent ? e.clientX : e.touches[0].clientX\n  const pointerPositionY = e instanceof MouseEvent ? e.clientY : e.touches[0].clientY\n\n  const fromLeftTotal = calcLimited(pointerPositionX - rect.left, 0, rect.width)\n  const fromTopTotal = calcLimited(pointerPositionY - rect.top, 0, rect.height)\n\n  const fromLeftPercent = fromLeftTotal / rect.width\n  const fromTopPercent = fromTopTotal / rect.height\n\n  return {fromLeftPercent, fromTopPercent}\n}\n\nexport function relateDragWayToSelectionByDiff(e: D3DragEvent<any, any, any>, selection: Selection<Element>) {\n  const rect = selection.node()?.getBoundingClientRect()\n  if (!rect) return undefined\n  const dyRelative = e.dy / rect.height\n  const dxRelative = e.dx / rect.width\n  return {dyRelative, dxRelative}\n}\n\nexport function hasDrag(s: Selection) {\n  return s.empty() ? false : !!elementFromSelection(s)\n    ?.['__on']?.find(listener => 'name' in listener && listener.name === 'drag')\n}\n\nexport function attachActiveCursorLocking(selection: Selection<Element>) {\n  let activeCursorClasses: string[] = []\n  let mutationObserver: MutationObserver | undefined\n  selection.on('pointerdown.fixCursor', (event: Event) => {\n    if (!(event.target instanceof Element)) return;\n    const nearestCursorElement = (event.target as Element).closest('.cursor')\n    if (!nearestCursorElement) return\n    fillActiveClasses(nearestCursorElement)\n    updateCursorClasses(nearestCursorElement)\n\n    function fillActiveClasses(nearestCursorElement: Element) {\n      activeCursorClasses.length = 0\n      cursorClasses.forEach(cursorClass => {\n        if (nearestCursorElement.classList.contains(cursorClass)) activeCursorClasses.push(cursorClass)\n      })\n    }\n\n    //For e.g. detecting cursor change on dragging axis from center to edge\n    function updateCursorClasses(nearestCursorElement: Element) {\n      selection.selectAll('.cursor').classed('cursor-disabled', true)\n      activeCursorClasses.forEach(activeClass => selection.classed(activeClass, true))\n      selection.classed('cursor', true)\n      mutationObserver = detectClassChange(nearestCursorElement, () => {\n        // console.log('CHANGE!', nearestCursorElement)\n        activeCursorClasses.forEach(activeClass => selection.classed(activeClass, false))\n        fillActiveClasses(nearestCursorElement)\n        activeCursorClasses.forEach(activeClass => selection.classed(activeClass, true))\n      })?.observer\n    }\n  })\n\n  function activateCursors() {\n    selection.selectAll('.cursor').classed('cursor-disabled', false)\n    activeCursorClasses.forEach(activeClass => selection.classed(activeClass, false))\n    selection.classed('cursor', false)\n    mutationObserver?.disconnect()\n  }\n\n  document.removeEventListener('pointerup', activateCursors)\n  document.addEventListener('pointerup', activateCursors)\n  return selection\n}\n","import {BaseType, select, Selection, Transition} from \"d3\";\n\nexport function addD3TransitionClass<T extends BaseType, D>(transition: Transition<T, D>) {\n  transition\n    .each(function () {\n      select(this).classed(\"mid-d3-transit\", true);\n    })\n    .on('end', function () {\n      select(this).classed(\"mid-d3-transit\", false);\n    })\n}\n\nexport function addD3TransitionClassForSelection<T extends BaseType, D>(s: Selection<T, D>) {\n  s.each(function () {\n      select(this).classed(\"mid-d3-transit\", true);\n  })\n}\n\nexport function removeD3TransitionClassSelection<T extends BaseType, D>(s: Selection<T, D>) {\n  s.each(function () {\n    select(this).classed(\"mid-d3-transit\", false);\n  })\n}\n\n\nexport function addCSSTransitionEnterClass<T extends BaseType, D>(selection: Selection<T, D>, delayMS = 250) {\n  selection.classed('animated', true)\n    .transition('entering')\n    .duration(0)\n    .on('end', function () {\n      const finishedS = select(this)\n      finishedS.classed('entering', true)\n        .interrupt('enter-done')\n        .interrupt('entering')\n        .transition('enter-done')\n        .delay(delayMS - 1)\n        .on('end', function () {\n          select(this).classed('entering', false)\n          select(this).classed('enter-done', true)\n        })\n    })\n}\n\nexport function addCSSTransitionExitClass<T extends BaseType, D>(selection: Selection<T, D>, delayMS = 250) {\n  return selection\n    .classed('exiting', true)\n    .classed(\"enter-done\", false)\n    .transition('exiting')\n    .delay(delayMS)\n    .on('end.Exit', function () {\n      if (!select(this).classed('exiting')) return\n      select(this)\n        .classed(\"exiting\", false)\n        .classed(\"exit-done\", true)\n    })\n}\n\nexport function cancelExitClassOnUpdate<T extends BaseType, D>(selection: Selection<T, D>) {\n  return selection.each(function(d, i, g) {\n    if (select(g[i]).classed('exiting')) {\n      select(g[i]).classed('exiting', false)\n      select(g[i]).classed('enter-done', true)\n    }\n  })\n}\n","export function throttle<T extends (...args: any[]) => K, K>(func: T, delayMs: number) {\n  return {\n    lastTime: 0,\n    func: function (...args: any[]) {\n      const currentTime = new Date().getTime();\n      if (currentTime - this.lastTime >= delayMs) {\n        // console.trace('Func Works!?', currentTime - this.lastTime)\n        func.apply(this, args);\n        this.lastTime = currentTime;\n      }\n    }\n  }\n}\n\nexport class ThrottleScheduled<T extends (...args: any[]) => K, K> {\n  func: T\n  lastTime = 0\n  delayMs: number\n  timeout?: NodeJS.Timeout\n  constructor(func: T, delayMs: number) {\n    this.func = func\n    this.delayMs = delayMs\n  }\n  invokeScheduled(...args: any[]) {\n    const currentTime = new Date().getTime()\n    const timeDiff = currentTime - this.lastTime\n    if (timeDiff < this.delayMs) {\n      this.timeout = setTimeout(() => this.invokeScheduled(...args), timeDiff)\n      return\n    }\n    clearTimeout(this.timeout)\n    this.func.apply(this, args)\n    this.lastTime = currentTime\n  }\n}\n","import {format} from \"d3\"\n\ntype d3Format = ReturnType<typeof format>\nexport function formatWithDecimalZero(formatFunction: d3Format) : d3Format {\n  return (val) => {\n    if (val === 0) return '0'\n    return formatFunction(val)\n  }\n}\n","import {Selection} from \"d3\";\n\nexport function bboxDiffSVG(svgS1: Selection<SVGGraphicsElement>, svgS2: Selection<SVGGraphicsElement>) {\n  const bbox1 = svgS1.node()?.getBBox();\n  const bbox2 = svgS2.node()?.getBBox();\n  if (!bbox1 || !bbox2) {\n    /* DEV_MODE_ONLY_START */\n    throw new Error()\n    /* DEV_MODE_ONLY_END */\n    return { leftCornersXDiff: 0, horizontalDiff: 0, leftCornersYDiff: 0, verticalDiff: 0,\n      bbox1: new DOMRect(0, 0, 0, 0), bbox2: new DOMRect(0, 0, 0, 0),\n    }\n  }\n\n  return {\n    leftCornersXDiff: bbox2.x - bbox1.x,\n    horizontalDiff: bbox2.x - bbox1.x + bbox1.width,\n    leftCornersYDiff: bbox2.y - bbox1.y,\n    verticalDiff: bbox2.y - bbox1.y + bbox1.height,\n    bbox1, bbox2\n  }\n}\n","import {SelectionOrTransition} from '../../d3/selection';\n\nexport interface Position {\n  x: number;\n  y: number;\n}\n\nexport function positionRound(position: Position, decimals: number = 0): Position {\n  const e = Math.pow(10, decimals);\n  return {\n    x: Math.round(position.x * e) / e,\n    y: Math.round(position.y * e) / e,\n  };\n}\n\nexport function positionEquals(\n  positionA: Position,\n  positionB: Position,\n  epsilon: number = 0.001\n): boolean {\n  return (\n    Math.abs(positionA.x - positionB.x) < epsilon && Math.abs(positionA.y - positionB.y) < epsilon\n  );\n}\n\nexport function positionToString(position: Position, decimals: number = 1): string {\n  position = positionRound(position, decimals);\n  return `${position.x}, ${position.y}`;\n}\n\nexport function positionFromString(str: string): Position {\n  const parts = str.split(',').map((s) => parseFloat(s.trim()));\n  return {x: parts[0], y: parts[1]};\n}\n\nexport function positionToAttrs(\n  selectionOrTransition: SelectionOrTransition,\n  position: Position\n): void {\n  position = positionRound(position);\n  selectionOrTransition.attr('x', position.x);\n  selectionOrTransition.attr('y', position.y);\n}\n\nexport function positionFromAttrs(selectionOrTransition: SelectionOrTransition): Position {\n  const s = selectionOrTransition.selection();\n  return {x: parseFloat(s.attr('x') || '0'), y: parseFloat(s.attr('y') || '0')};\n}\n\nexport function positionToTransformAttr(\n  selectionOrTransition: SelectionOrTransition,\n  position: Position\n): void {\n  selectionOrTransition.attr(\n    'transform',\n    `translate(${positionToString(positionRound(position))})`\n  );\n}\n\n","import {select, Selection} from \"d3\";\nimport {Rect, rectFromString} from \"../../data\";\nimport {positionToTransformAttr} from \"../geometry/position\";\n\n/**\n * Note that the SVG text element must have a dominant-baseline value of \"central\"\n * for this function to work properly.\n * @param svgS SVG text element\n * @param bounds Bounds of Layout Twin Element\n */\nexport function positionSVGTextToLayoutCenter(svgS: Selection<SVGTextElement>, bounds: Rect) {\n  const textElement = svgS.node()\n  if (!textElement) return\n\n  const textSVGWidth = textElement.getBBox().width\n  svgS\n    .attr('x', () => -textSVGWidth / 2 + bounds.width / 2)\n    .attr('y', () => bounds.height / 2)\n    .call(((s) => positionToTransformAttr(s, bounds)))\n}\n\n\nexport function wrapTextByTwinWidth(textS: Selection<SVGTextElement>) {\n  textS.each(function (d, i, g) {\n    const singleTextS = select(g[i])\n    const el = singleTextS.node()\n    const bounds = singleTextS.attr('bounds')\n    const rect = bounds ? rectFromString(bounds) : undefined\n    const wrapTextActive = el ? getComputedStyle(el).getPropertyValue('--text-wrap') : 'false'\n    if (!el || !rect || wrapTextActive !== 'true') return\n    wrapText(select(g[i]), rect.width)\n  })\n}\n\n//based on https://gist.github.com/mbostock/7555321\nfunction wrapText(textS: Selection<SVGTextElement>, width: number) {\n  textS.each(function () {\n    let offset = 0.5 // due to baseline central\n    let lineHeight = 1.1\n\n    let text = select(this)\n    let words = text.text().split(/\\s+/).reverse()\n    let word = words.pop()\n\n    if (!word) return\n    let line: string[] = []\n    let tspan = text.text('').append(\"tspan\").attr(\"x\", 0).attr(\"y\", 0).attr(\"dy\", offset + \"em\");\n\n    while (word) {\n      line.push(word)\n      tspan.text(line.join(\" \"))\n\n      if (tspan.node()!.getComputedTextLength() <= width) {\n        word = words.pop()\n        continue\n      }\n\n      if (line.length < 2) {\n        word = words.pop()\n      } else {\n        word = line.pop()\n        tspan.text(line.join(\" \"));\n      }\n\n      line = []\n      tspan = text.append(\"tspan\")\n        .attr(\"x\", 0)\n        .attr(\"dy\", lineHeight + \"em\")\n    }\n\n    const textAlign = getComputedStyle(text.node()!).textAlign\n    if (textAlign && textAlign === 'center')\n    text.selectAll<SVGTSpanElement, any>('tspan').each(function() {\n      const diff = width - this.getComputedTextLength()\n      select(this).attr('x', diff / 2)\n    })\n  })\n}\n","import {SelectionOrTransition} from '../../../d3/selection';\n\nexport interface Size {\n  width: number;\n  height: number;\n}\n\nexport function sizeRound(size: Size, decimals: number = 0): Size {\n  const e = Math.pow(10, decimals);\n  return {\n    width: Math.round(size.width * e) / e,\n    height: Math.round(size.height * e) / e,\n  };\n}\n\nexport function sizeEquals(a: Size, b: Size, epsilon: number = 0.001): boolean {\n  return Math.abs(a.width - b.width) < epsilon && Math.abs(a.height - b.height) < epsilon;\n}\n\nexport function sizeToString(size: Size, decimals: number = 1): string {\n  size = sizeRound(size, decimals);\n  return `${size.width}, ${size.height}`;\n}\n\nexport function sizeFromString(str: string): Size {\n  const parts = str.split(',').map((s) => parseFloat(s.trim()));\n  return { width: parts[0], height: parts[1] };\n}\n\nexport function sizeToAttrs(selectionOrTransition: SelectionOrTransition, size: Size): void {\n  size = sizeRound(size)\n  selectionOrTransition.attr('width', size.width) //Typescript Problem on chaining?\n  selectionOrTransition.attr('height', size.height)\n}\n\nexport function sizeFromAttrs(selectionOrTransition: SelectionOrTransition): Size {\n  const s = selectionOrTransition.selection();\n  return { width: parseFloat(s.attr('width') || '0'), height: parseFloat(s.attr('height') || '0') };\n}\n","// inspired by https://stackoverflow.com/a/22909984\nexport function elementComputedStyleWithoutDefaults(\n  element: Element,\n  properties: string[]\n): Record<string, string> {\n  const dummy = document.createElement('style-dummy-tag');\n  element.parentElement!.appendChild(dummy);\n\n  const defaultStyle = window.getComputedStyle(dummy);\n  const style = window.getComputedStyle(element);\n\n  const diff = {};\n  properties.forEach((p) => {\n    const defaultValue = defaultStyle.getPropertyValue(p);\n    const value = style.getPropertyValue(p);\n    if (p === 'overflow' || defaultValue !== value) {\n      diff[p] = value;\n    }\n  });\n\n  dummy.remove();\n\n  return diff;\n}\n\nexport function isElement(obj: any): obj is Element {\n  return obj instanceof Element || obj instanceof HTMLElement || obj instanceof SVGElement;\n}\n\n// extracted from the SVG specification\nexport const elementSVGPresentationAttrs = [\n  'fill',\n  'alignment-baseline',\n  'baseline-shift',\n  'clip-path',\n  'clip-rule',\n  'color',\n  'color-interpolation',\n  'color-interpolation-filters',\n  'color-rendering',\n  'cursor',\n  'direction',\n  'display',\n  'dominant-baseline',\n  'fill-opacity',\n  'fill-rule',\n  'filter',\n  'flood-color',\n  'flood-opacity',\n  'font-family',\n  'font-size',\n  'font-size-adjust',\n  'font-stretch',\n  'font-style',\n  'font-variant',\n  'font-weight',\n  'glyph-orientation-horizontal',\n  'glyph-orientation-vertical',\n  'image-rendering',\n  'letter-spacing',\n  'lighting-color',\n  'marker-end',\n  'marker-mid',\n  'marker-start',\n  'mask',\n  'opacity',\n  'overflow',\n  'paint-order',\n  'pointer-events',\n  'shape-rendering',\n  'stop-color',\n  'stop-opacity',\n  'stroke',\n  'stroke-dasharray',\n  'stroke-dashoffset',\n  'stroke-linecap',\n  'stroke-linejoin',\n  'stroke-miterlimit',\n  'stroke-opacity',\n  'stroke-width',\n  'text-anchor',\n  'text-decoration',\n  'text-overflow',\n  'text-rendering',\n  'unicode-bidi',\n  'vector-effect',\n  'visibility',\n  'white-space',\n  'word-spacing',\n  'writing-mode',\n  'transform',\n];\n\nexport const elementSVGTransformStyles = [\n  'transform-box',\n  'transform-origin'\n]\n","export namespace RVArray {\n  export function equalizeLengths<T1, T2>(array1: T1, array2: T2): [T1, T2] {\n    if (!Array.isArray(array1) || !Array.isArray(array2)) throw new Error('Wrong usage of array util!')\n    const lowerLength = array1.length < array2.length ? array1.length : array2.length\n    return [array1.slice(0, lowerLength) as T1, array2.slice(0, lowerLength) as T2]\n  }\n\n  export function sum(array: number[]) {\n    return array.reduce((sum, val) => sum + val, 0)\n  }\n\n  export function mapToRanks(arr: number[]) {\n    const arrOrder = arr.map(() => 1)\n    for (let j = 0; j < arr.length; j++) {\n      for (let i = j + 1; i < arr.length; i++) {\n        if (arr[j] > arr[i]) arrOrder[j] = arrOrder[j] + 1\n        else if (arr[j] < arr[i]) arrOrder[i] = arrOrder[i] + 1\n      }\n    }\n    return arrOrder\n  }\n\n  export function clearDuplicatedValues<T>(array: T[]) {\n    return array.reduce<T[]>(\n      (prev, current) => prev.includes(current) ? prev : [...prev, current], [])\n  }\n\n  export function isNumberArray(arr: any[]): arr is number[] {\n    return arr.length > 0 && arr.every(el => typeof el === 'number')\n  }\n\n  export function isDateArray(arr: any[]): arr is Date[] {\n    return arr.length > 0 && arr.every(el => el instanceof Date)\n\n  }\n\n  export function hasValueOf(arr: any[]): arr is { valueOf: () => number }[] {\n    return arr.length > 0 && arr.every(el => typeof el.valueOf === \"number\")\n  }\n\n  export function isStringArray(arr: any[]): arr is string[] {\n    return arr.length > 0 && arr.every(el => typeof el === 'string')\n  }\n\n  // export function arrayIs2D(array: any): array is any[][] {\n//   return Array.isArray(array) && array.every((e) => Array.isArray(e));\n// }\n//\n}\n","import {SelectionOrTransition} from '../../../d3/selection';\nimport {\n  Position,\n  positionEquals,\n  positionFromAttrs,\n  positionRound,\n  positionToAttrs,\n  positionToString,\n} from '../../position/position';\nimport {Size, sizeEquals, sizeFromAttrs, sizeRound, sizeToAttrs, sizeToString} from './size';\nimport {isElement} from \"../../../dom/element/element\";\nimport {select} from \"d3\";\n\nexport interface Rect extends Position, Size {}\n\nexport function rectRound(rect: Rect, decimals: number = 0): Rect {\n  return {\n    ...positionRound(rect, decimals),\n    ...sizeRound(rect, decimals),\n  };\n}\n\nexport function rectEquals(rectA: Rect, rectB: Rect, epsilon: number = 0.001): boolean {\n  return positionEquals(rectA, rectB, epsilon) && sizeEquals(rectA, rectB, epsilon);\n}\n\nexport function rectMinimized(rect: Rect): Rect {\n  return { ...rectCenter(rect), width: 0, height: 0 };\n}\n\nexport function rectFitStroke(rect: Rect, stroke: number): Rect {\n  return {\n    x: rect.x + stroke / 2,\n    y: rect.y + stroke / 2,\n    width: Math.max(0, rect.width - stroke),\n    height: Math.max(0, rect.height - stroke),\n  };\n}\n\nexport function rectPosition(rect: Rect, sizePercentageFromTopLeft: Position): Position {\n  return {\n    x: rect.x + rect.width * sizePercentageFromTopLeft.x,\n    y: rect.y + rect.height * sizePercentageFromTopLeft.y,\n  };\n}\n\nexport function rectCenter(rect: Rect): Position {\n  return rectPosition(rect, { x: 0.5, y: 0.5 });\n}\n\nexport function rectTop(rect: Rect): Position {\n  return rectPosition(rect, { x: 0.5, y: 0 });\n}\n\nexport function rectBottom(rect: Rect): Position {\n  return rectPosition(rect, { x: 0.5, y: 1 });\n}\n\nexport function rectLeft(rect: Rect): Position {\n  return rectPosition(rect, { x: 0, y: 0.5 });\n}\n\nexport function rectRight(rect: Rect): Position {\n  return rectPosition(rect, { x: 1, y: 0.5 });\n}\n\nexport function rectBottomLeft(rect: Rect): Position {\n  return rectPosition(rect, { x: 0, y: 1 });\n}\n\nexport function rectBottomRight(rect: Rect): Position {\n  return rectPosition(rect, { x: 1, y: 1 });\n}\n\nexport function rectTopRight(rect: Rect): Position {\n  return rectPosition(rect, { x: 1, y: 0 });\n}\n\nexport function rectTopLeft(rect: Rect): Position {\n  return rectPosition(rect, { x: 0, y: 0 });\n}\n\nexport function rectToString(rect: Rect, decimals: number = 0): string {\n  return `${positionToString(rect, decimals)}, ${sizeToString(rect, decimals)}`;\n}\n\nexport function rectFromString(str: string): Rect {\n  const parts = str.split(',').map((s) => parseFloat(s.trim()));\n  return { x: parts[0], y: parts[1], width: parts[2], height: parts[3] };\n}\n\nexport function rectToViewBox(selectionOrTransition: SelectionOrTransition, rect: Rect): void {\n  selectionOrTransition\n    .call((s: SelectionOrTransition) => {\n      const {x, y} = positionRound(rect)\n      const {width, height} = sizeRound(rect)\n      s.attr('viewbox', `${x}, ${y}, ${width}, ${height}`)\n    })\n}\n\nexport function rectToAttrs(selectionOrTransition: SelectionOrTransition, rect: Rect): void {\n  selectionOrTransition\n    .call((s: SelectionOrTransition) => positionToAttrs(s, rect))\n    .call((s: SelectionOrTransition) => sizeToAttrs(s, rect));\n}\n\nexport function rectFromAttrs(selectionOrTransition: SelectionOrTransition): Rect {\n  return { ...positionFromAttrs(selectionOrTransition), ...sizeFromAttrs(selectionOrTransition) };\n}\n\nexport function rectFromSize(size: Size): Rect {\n  return { x: 0, y: 0, ...size };\n}\n\nexport function rectToPath(selectionOrTransition: SelectionOrTransition | Element, rect: Rect) {\n  const {x, y, width: w, height: h} = rect;\n  selectionOrTransition = isElement(selectionOrTransition)\n    ? select(selectionOrTransition)\n    : selectionOrTransition;\n  selectionOrTransition.attr('d', `M ${x} ${y} h ${w} v ${h} h ${-w} v ${-h}`);\n}\n","import {SelectionOrTransition} from '../../d3/selection';\nimport {Position, positionEquals, positionRound} from '../position/position';\nimport {Rect, rectCenter} from './rect/rect';\nimport {isElement} from \"../../dom/element/element\";\nimport {select} from \"d3\";\n\nexport interface Circle {\n  center: Position;\n  radius: number;\n  color?: number;\n}\n\nexport function circleRound(circle: Circle, decimals: number = 0): Circle {\n  const e = Math.pow(10, decimals);\n  return {\n    center: positionRound(circle.center, decimals),\n    radius: Math.round(circle.radius * e) / e,\n  };\n}\n\nexport function circleEquals(a: Circle, b: Circle, epsilon: number = 0.001): boolean {\n  return positionEquals(a.center, b.center, epsilon) && Math.abs(a.radius - b.radius) < epsilon;\n}\n\nexport function circleToString(circle: Circle, decimals: number = 1): string {\n  circle = circleRound(circle, decimals);\n  return `${circle.center.x}, ${circle.center.y}, ${circle.radius}`;\n}\n\nexport function circleFromString(str: string): Circle {\n  const parts = str.split(',').map((s) => parseFloat(s.trim()));\n  return { center: { x: parts[0], y: parts[1] }, radius: parts[2] };\n}\n\nexport function circleToAttrs(selectionOrTransition: SelectionOrTransition, circle: Circle): void {\n  selectionOrTransition.attr('cx', circle.center.x) //Typescript Problem on chaining?\n  selectionOrTransition.attr('cy', circle.center.y)\n  selectionOrTransition.attr('r', circle.radius)\n  selectionOrTransition.attr('fill', circle.color ?? null)\n}\n\nexport function circleToAttrsFromSelection(selectionOrTransition: SelectionOrTransition<any, Circle>) {\n  selectionOrTransition.attr('cx', (d) => d.center.x) //Typescript Problem on chaining?\n  selectionOrTransition.attr('cy', (d) => d.center.y)\n  selectionOrTransition.attr('r', (d) => d.radius)\n  selectionOrTransition.attr('fill', (d) => d.color ?? null)\n}\n\nexport function circleFromAttrs(selectionOrTransition: SelectionOrTransition): Circle {\n  const s = selectionOrTransition.selection();\n  return {\n    center: { x: parseFloat(s.attr('cx') || '0'), y: parseFloat(s.attr('cy') || '0') },\n    radius: parseFloat(s.attr('r') || '0'),\n  };\n}\n\nexport function circleMinimized(circle: Circle): Circle {\n  return { center: circle.center, radius: 0 };\n}\n\nexport function circleFitStroke(circle: Circle, stroke: number): Circle {\n  return { center: circle.center, radius: circle.radius - stroke / 2 };\n}\n\nexport function circlePosition(\n  circle: Circle,\n  angleInDegrees: number,\n  distancePercentage: number = 1\n): Position {\n  const angleInRad = (angleInDegrees * Math.PI) / 180;\n  return {\n    x: circle.center.x + circle.radius * Math.cos(angleInRad) * distancePercentage,\n    y: circle.center.y + circle.radius * Math.sin(angleInRad) * distancePercentage,\n  };\n}\n\nexport function circleInsideRect(rect: Rect): Circle {\n  return { center: rectCenter(rect), radius: Math.min(rect.width, rect.height) / 2 };\n}\n\nexport function circleOutsideRect(rect: Rect): Circle {\n  return {\n    center: rectCenter(rect),\n    radius: Math.sqrt(Math.pow(rect.width, 2) + Math.pow(rect.height, 2)) / 2,\n  };\n}\n\nexport function circleToPath(\n  selectionOrTransition: SelectionOrTransition | Element,\n  circle: Circle\n): void {\n  const {\n    center: {x: cx, y: cy},\n    radius: r,\n  } = circle;\n\n  selectionOrTransition = isElement(selectionOrTransition)\n    ? select(selectionOrTransition)\n    : selectionOrTransition;\n\n  selectionOrTransition.attr(\n    'd',\n    `M ${cx - r} ${cy} \n    a ${r},${r} 0 1,0 ${r * 2},0 \n    a ${r},${r} 0 1,0 -${r * 2},0`\n  );\n}\n","import {Position} from \"../position\";\nimport {SelectionOrTransition} from \"../../d3\";\nimport {Rect, rectCenter} from \"./rect/rect\";\n\nexport interface Ellipse {\n  center: Position;\n  rx: number;\n  ry: number;\n  color?: string;\n}\n\nexport function ellipseInsideRect(rect: Rect): Ellipse {\n  return { center: rectCenter(rect), rx: rect.width / 2, ry: rect.height / 2 };\n}\n\nexport function ellipseToAttrs(selectionOrTransition: SelectionOrTransition, ellipse: Ellipse): void {\n  selectionOrTransition.attr('cx', ellipse.center.x) //Typescript Problem on chaining?\n  selectionOrTransition.attr('cy', ellipse.center.y)\n  selectionOrTransition.attr('rx', ellipse.rx)\n  selectionOrTransition.attr('ry', ellipse.ry)\n  selectionOrTransition.attr('fill', ellipse.color ?? null)\n}\n","import {SelectionOrTransition} from \"../../d3\";\nimport {Position} from \"../position\";\nimport {isElement} from \"../../dom/element/element\";\nimport {select} from \"d3\";\n\nexport function lineToPath(\n  selectionOrTransition: SelectionOrTransition | Element,\n  positions: Position[]\n): void {\n  if (positions.length < 2) return;\n\n  selectionOrTransition = isElement(selectionOrTransition)\n    ? select(selectionOrTransition)\n    : selectionOrTransition;\n\n  selectionOrTransition.attr('d', `M${positions.map((p) => `${p.x},${p.y}`).join('L')}`);\n}\n","export function normalizeAngle(degrees: number) {\n  degrees = degrees % 360;\n  return degrees < 0 ? degrees + 360 : degrees\n}\n","export function applyMixins(derivedCtor: any, constructors: any[]) {\n  constructors.forEach((baseCtor) => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n      Object.defineProperty(\n        derivedCtor.prototype,\n        name,\n        Object.getOwnPropertyDescriptor(baseCtor.prototype, name) ||\n        Object.create(null)\n      );\n    });\n  });\n}\n","export function uniqueId () {\n  //@ts-ignore\n  if (window.crypto && window.crypto.randomUUID) return crypto.randomUUID()\n\n  //Taken from https://stackoverflow.com/questions/3231459/how-can-i-create-unique-ids-with-javascript\n  // Tofandel Aug 14, 2023\n  return Date.now().toString(36) + Math.random().toString(36).substring(2, 12).padStart(12, '0')\n}\n","import {Rect, rectRound} from \"../../geometry\";\n\nexport function elementRelativeBounds(element: Element): Rect {\n  console.assert(element.isConnected, 'Element needs to be attached to the DOM.');\n  const bounds = element.getBoundingClientRect();\n  const parentBounds = element.parentElement!.getBoundingClientRect();\n  return rectRound(\n    {\n      x: bounds.x - parentBounds.x,\n      y: bounds.y - parentBounds.y,\n      width: bounds.width,\n      height: bounds.height,\n    },\n    2\n  );\n}\n\nexport function elementAbsoluteBounds(element: SVGGraphicsElement) {\n  const viewPortE = element.closest('svg')\n  console.assert(element.isConnected && viewPortE, 'Element needs to be attached to the DOM and must have SVG Ancestor.');\n  if (!viewPortE || !('getBBox' in element)) return rectRound(element.getBoundingClientRect(), 2)\n  const elementBoundsFromViewport = element.getBoundingClientRect()\n  const elementBoundsBBox = element.getBBox()\n  const finalBounds = {\n    x: elementBoundsFromViewport.x - elementBoundsBBox.x,\n    y: elementBoundsFromViewport.y - elementBoundsBBox.y,\n    width: elementBoundsBBox.width,\n    height: elementBoundsBBox.height\n  }\n  return rectRound(finalBounds, 2);\n}\n","import {CSSBreakpointLengthUnit, CSSLengthValue, LengthDimension, SVGHTMLElement,} from \"../../constants/types\";\nimport {defaultLayoutIndex, pxUpperLimit} from \"../../constants/other\";\nimport {cssLengthInPx} from \"../../utilities\";\n\nexport type BreakpointsUserArgs = {\n  values: readonly number[],\n  unit: CSSBreakpointLengthUnit\n}\nexport type BreakpointsArgs = BreakpointsUserArgs & {\n  dimension?: LengthDimension\n}\n\nexport class Breakpoints {\n  values: readonly number[]\n  unit: CSSBreakpointLengthUnit\n  dimension: LengthDimension\n  constructor(args?: BreakpointsArgs) {\n    this.values = args ? args.values: []\n    this.unit = args ? args.unit: 'rem'\n    this.dimension = args?.dimension ?? 'width'\n  }\n\n  getLengthAt(breakPointIndex: number, defaultMinWidth: string, defaultMaxWidth: string) {\n    if (breakPointIndex < 0) return defaultMinWidth\n    if (breakPointIndex >= this.values.length) return defaultMaxWidth\n    return `${this.values[breakPointIndex]}${this.unit}`\n  }\n\n  getSurroundingLengths(layoutWidthIndex: number) {\n    return [\n      this.getLengthAt(layoutWidthIndex - 1, `0${this.unit}`, pxUpperLimit),\n      this.getLengthAt(layoutWidthIndex, `0${this.unit}`, pxUpperLimit)\n    ]\n  }\n\n  getCurrentLayoutWidthIndex(element: SVGHTMLElement) {\n    const rect = element.getBoundingClientRect()\n    const referenceValue = rect[this.dimension]\n    if (this.values.length === 0) return 0\n    for (let i = 0; i < this.values.length; i++) {\n      const cssLength = (this.values[i].toString() + this.unit.toString()) as CSSLengthValue\n      if (referenceValue < cssLengthInPx(cssLength, element)) return i\n    }\n    return this.values.length\n  }\n\n  getCurrentLayoutWidthIndexFromCSS(element: SVGHTMLElement) {\n    const indexValueQueried = parseInt(getComputedStyle(element)\n      .getPropertyValue(`--layout-${this.dimension}`))\n    return !isNaN(indexValueQueried) ? indexValueQueried : defaultLayoutIndex\n  }\n\n  getCSSFactors(element: SVGHTMLElement) {\n    return {\n      factor: parseFloat(getComputedStyle(element)\n        .getPropertyValue(`--layout-${this.dimension}-factor`)),\n      offset: parseFloat(getComputedStyle(element)\n        .getPropertyValue(`--layout-${this.dimension}-factor-offset`))\n    }\n  }\n\n  getTransformed(element: SVGHTMLElement): Breakpoints {\n    const {factor, offset} = this.getCSSFactors(element)\n    return new Breakpoints({\n      dimension: this.dimension,\n      unit: this.unit,\n      values: this.values.map(value => {\n        const factorValid = isNaN(factor) ? 1 : factor\n        const factorOffsetValid = isNaN(offset) ? 0 : offset\n        return value * factorValid + factorOffsetValid\n      })\n    })\n  }\n\n  updateLayoutCSSVars(element: SVGHTMLElement) {\n    const transformedBreakpoints = this.getTransformed(element)\n    const layoutWidthIndex = transformedBreakpoints.getCurrentLayoutWidthIndex(element)\n    const [preBreakPointLength, postBreakPointLength] = transformedBreakpoints.getSurroundingLengths(layoutWidthIndex)\n\n    element.style.setProperty(`--layout-${this.dimension}`, layoutWidthIndex.toString())\n    element.style.setProperty(`--layout-${this.dimension}-pre-breakpoint`, preBreakPointLength)\n    element.style.setProperty(`--layout-${this.dimension}-post-breakpoint`, postBreakPointLength)\n  }\n}\n","import {LengthDimension, SVGHTMLElement} from \"../../../constants\";\nimport {Breakpoints, BreakpointsUserArgs} from \"../breakpoints\";\nimport {Selection} from \"d3\";\n\nexport type ComponentBreakpointsUserArgs = Partial<Record<LengthDimension, BreakpointsUserArgs>>\nexport type ComponentBreakpointsArgs = ComponentBreakpointsUserArgs\n\nexport class ComponentBreakpoints {\n  width: Breakpoints\n  height: Breakpoints\n  constructor(args?: ComponentBreakpointsArgs) {\n    this.width = new Breakpoints(args?.width)\n    this.height = new Breakpoints(args?.height ? {...args.height, dimension: 'height'} : {\n      values: [], unit: 'rem', dimension: 'height'\n    })\n  }\n  updateCSSVars(element: SVGHTMLElement) {\n    this.width.updateLayoutCSSVars(element)\n    this.height.updateLayoutCSSVars(element)\n  }\n}\n\n\nexport type WithLayoutBreakpoints = {\n  breakpoints: ComponentBreakpoints\n}\nexport type ComponentBreakpointsSelection = Selection<SVGHTMLElement, WithLayoutBreakpoints>\n","import {LengthDimension, SVGHTMLElement} from \"../../constants/types\";\nimport {defaultLayoutIndex} from \"../../constants\";\n\nexport function getLayoutWidthIndexFromCSS(element: SVGHTMLElement, dimension: LengthDimension) {\n  const indexValueQueried = parseInt(getComputedStyle(element).getPropertyValue(`--layout-${dimension}`))\n  return !isNaN(indexValueQueried) ? indexValueQueried : defaultLayoutIndex\n}\n","import {\n  ComponentBreakpointsScope,\n  ComponentBreakpointsScopeMapping\n} from \"../breakpoints/component-breakpoints/component-breakpoints-scope\";\nimport {defaultScope, LengthDimension} from \"../../constants\";\nimport {elementFromSelection} from \"../../utilities\";\n\nexport abstract class ResponsivePropertyBase<T> {\n  readonly scope?: ComponentBreakpointsScope\n  readonly dependentOn: LengthDimension\n  abstract mapping: any\n\n  protected constructor(dependentOn: LengthDimension, scope?: ComponentBreakpointsScope) {\n    this.dependentOn = dependentOn;\n    this.scope = scope;\n  }\n\n  getLayoutSelection(scopeMapping: ComponentBreakpointsScopeMapping) {\n    const selection = this.scope ? scopeMapping[this.scope] : undefined\n    return selection ? selection : scopeMapping[defaultScope]\n  }\n\n  getBreakpoints(scopeMapping: ComponentBreakpointsScopeMapping) {\n    const layoutSelection = this.getLayoutSelection(scopeMapping)\n    return layoutSelection.datum().breakpoints[this.dependentOn]\n  }\n\n  getFirstValidPreLayoutIndex(layoutIndex: number) {\n    for (let i = layoutIndex - 1; i >= 0; i--) {\n      if (this.mapping[i] !== undefined) return i\n    }\n    return null\n  }\n\n  getFirstValidPostLayoutIndex(exactBreakpoint: number) {\n    const keys = Object.keys(this.mapping)\n    for (let i = 0; i < keys.length; i++) {\n      const index = parseInt(keys[i])\n      if (index > exactBreakpoint) return index\n    }\n    return null\n  }\n\n  getFirstValidLayoutIndex() {\n    const keys = Object.keys(this.mapping)\n    for (let i = 0; i < keys.length; i++) {\n      const index = parseInt(keys[i])\n      if (!isNaN(index)) return index\n    }\n    return 0\n  }\n\n  getLastValidLayoutIndex(breakpointLength: number) {\n    const indices = Object.keys(this.mapping)\n      .map((key) => parseInt(key))\n      .filter((key) => !isNaN(key) && key < breakpointLength)\n    return Math.max(...indices)\n  }\n\n  getCurrentLayoutIndexFromCSS(mapping: ComponentBreakpointsScopeMapping) {\n    const layoutBreakpointsS = this.getLayoutSelection(mapping)\n    const element = elementFromSelection(layoutBreakpointsS)\n    return this.getBreakpoints(mapping).getCurrentLayoutWidthIndexFromCSS(element)\n  }\n\n  abstract estimate(layoutIndex: number): T\n}\n","import {ErrorMessages} from \"../../constants/error\";\nimport {maxBreakpointCount} from \"../../constants/other\";\nimport {\n  ComponentBreakpointsScope,\n  ComponentBreakpointsScopeMapping\n} from \"../breakpoints/component-breakpoints/component-breakpoints-scope\";\nimport {LengthDimension} from \"../../constants/types\";\nimport {ResponsivePropertyBase} from \"./responsive-property-base\";\n\ntype ResponsiveValueUserArgsResponsive<T> = {\n  readonly mapping: { 0: T, [key: number]: T },\n  readonly dependentOn: LengthDimension,\n  readonly scope?: ComponentBreakpointsScope\n}\n\nexport type ResponsiveValueUserArgs<T> = T | ResponsiveValueUserArgsResponsive<T>\n\nexport function isResponsiveValueUserArgsResponsive<T>(arg: any): arg is ResponsiveValueUserArgsResponsive<T> {\n  return typeof arg === 'object' && arg !== null && 'mapping' in arg && 'dependentOn' in arg && !('value' in arg)\n}\n\nexport function validateResponsiveValue<T>(args: ResponsiveValueUserArgs<T>) {\n  if (!isResponsiveValueUserArgsResponsive(args)) {\n    return args\n  }\n  return new ResponsiveValue(args)\n}\n\nexport type ResponsiveValueOptional<T> = ResponsiveValue<T> | T\nexport class ResponsiveValue<T> extends ResponsivePropertyBase<T> {\n  readonly mapping: { 0: T, [key: number]: T }\n\n  constructor(args: ResponsiveValueUserArgsResponsive<T>) {\n    super(args.dependentOn, args.scope)\n    this.mapping = args.mapping\n  }\n\n  estimate(layoutIndex: number): T {\n    let value: T | undefined = undefined\n    for (let i = 0; i < maxBreakpointCount; i++) {\n      if (this.mapping[i] !== undefined) value = this.mapping[i]\n      if (value !== undefined && i >= layoutIndex) break\n    }\n    if (value === undefined) throw new Error(ErrorMessages.responsiveValueHasNoValues)\n    return value\n  }\n}\n\nexport function getCurrentResponsiveValue<T>(val: ResponsiveValueOptional<T>, mapping: ComponentBreakpointsScopeMapping): T {\n  if (!isResponsiveValueUserArgsResponsive(val)) return val\n  const layoutIndex = val.getCurrentLayoutIndexFromCSS(mapping)\n  return val.estimate(layoutIndex)\n}\n","import {defaultScope, maxBreakpointCount} from \"../../constants/other\";\nimport {\n  ComponentBreakpointsScope,\n  ComponentBreakpointsScopeMapping\n} from \"../breakpoints/component-breakpoints/component-breakpoints-scope\";\nimport {CSSLengthValue, LengthDimension} from \"../../constants/types\";\nimport {getLayoutWidthIndexFromCSS} from \"../breakpoints/component-breakpoints\";\nimport {cssLengthInPx, elementFromSelection} from \"../../utilities\";\nimport {ErrorMessages} from \"../../constants\";\nimport {ResponsivePropertyBase} from \"./responsive-property-base\";\n\ntype BreakpointPropertyUserArgsResponsive<T> = {\n  readonly breakpointValues: { 0: T, [key: number]: T },\n  readonly dependentOn: LengthDimension,\n  readonly scope?: ComponentBreakpointsScope\n}\n\nexport type BreakpointPropertyUserArgs<T> = T | BreakpointPropertyUserArgsResponsive<T>\n\nexport function isBreakpointPropertyUserArgsResponsive<T>(arg: any): arg is BreakpointPropertyUserArgsResponsive<T> {\n  return typeof arg === 'object' && arg !== null && 'breakpointValues' in arg && 'dependentOn' in arg && !('value' in arg)\n}\n\nexport function validateBreakpointProperty<T>(args: BreakpointPropertyUserArgs<T>): BreakpointPropertyOptional<T> {\n  if (!isBreakpointPropertyUserArgsResponsive(args)) {\n    return args\n  }\n  return new BreakpointProperty(args)\n}\n\nexport type BreakpointPropertyOptional<T> = BreakpointProperty<T> | T\nexport class BreakpointProperty<T> extends ResponsivePropertyBase<T> {\n  readonly mapping: { 0: T, [key: number]: T }\n\n  constructor(args: BreakpointPropertyUserArgsResponsive<T>) {\n    super(args.dependentOn, args.scope)\n    this.mapping = args.breakpointValues\n  }\n\n  getRespValInterpolated(scopes: ComponentBreakpointsScopeMapping) {\n    const desiredElement = this.scope ? scopes[this.scope] : undefined\n    const layoutBreakpointsS = desiredElement ? desiredElement : scopes[defaultScope]\n    const element = elementFromSelection(layoutBreakpointsS)\n    const breakpointsTransformed = this.getBreakpoints(scopes).getTransformed(element)\n    const respVal = this\n\n    const layout = this.dependentOn\n    const layoutWidthIndex = getLayoutWidthIndexFromCSS(elementFromSelection(layoutBreakpointsS), layout)\n\n    const preBreakpointIndex = this.getFirstValidPreLayoutIndex(layoutWidthIndex)\n    const preBreakpoint = getBreakpointData(preBreakpointIndex)\n\n    const postBreakpointIndex = this.getFirstValidPostLayoutIndex(preBreakpointIndex !== null ? preBreakpointIndex : -1)\n    const postBreakpoint = getBreakpointData(postBreakpointIndex)\n\n    const firstBreakpoint = getBreakpointData(this.getFirstValidLayoutIndex())!\n    const lastBreakpoint = getBreakpointData(this.getLastValidLayoutIndex(breakpointsTransformed.values.length))!\n\n    function getBreakpointData(index: number | null) {\n      if (index === null || index >= breakpointsTransformed.values.length || index < 0) return null\n      const defaultMaxLength = breakpointsTransformed.values[breakpointsTransformed.values.length - 1] + breakpointsTransformed.unit\n      return { index,\n        value: respVal.mapping[index],\n        length: cssLengthInPx(breakpointsTransformed.getLengthAt(index, '0px', defaultMaxLength) as CSSLengthValue, element)\n      }\n    }\n\n    return { preBreakpoint, postBreakpoint, firstBreakpoint, lastBreakpoint, element }\n  }\n\n  estimate(layoutIndex: number): T {\n    let value: T | undefined = undefined\n    for (let i = 0; i < maxBreakpointCount; i++) {\n      if (this.mapping[i] !== undefined) value = this.mapping[i]\n      if (value !== undefined && i >= layoutIndex) break\n    }\n    if (value === undefined) throw new Error(ErrorMessages.responsiveValueHasNoValues)\n    return value\n  }\n}\n","import {RVArray} from \"../../utilities/array\";\nimport {CategoryKey} from \"../../constants/types\";\nimport {ResponsiveValueOptional, ResponsiveValueUserArgs, validateResponsiveValue} from \"../responsive-property\";\n\n/**\n * @property values - length must match number of all data records in use\n */\nexport type CategoriesUserArgs = {\n  values: string[],\n  title: ResponsiveValueUserArgs<string>,\n  format?: ((value: string) => string) | Record<string, string>\n}\n\nexport type CategoriesArgs = CategoriesUserArgs & {\n  categoriesKey: string\n}\n\nexport type Categories = Omit<CategoriesArgs, 'format' | 'title'> & {\n  title: ResponsiveValueOptional<string>\n  categoryMap: Record<string, Category>\n  categoryArray: Category[]\n}\n\ntype Category = {\n  key: CategoryKey\n  styleClass: string\n  order: number\n  formatValue: string\n  value: string\n}\n\nexport function validateCategories(args: CategoriesArgs, referenceData?: unknown[]): Categories  {\n  const { values, categoriesKey, title, format} = args\n\n  const [categoriesAligned] = RVArray.equalizeLengths(args.values, referenceData ?? args.values)\n  const categoryOrder = RVArray.clearDuplicatedValues(categoriesAligned)\n\n  const categoryMap: Record<string, Category> = categoryOrder.reduce((acc: Record<string, Category>, current, index) => {\n    acc[current] = {\n      order: index,\n      value: current,\n      formatValue: (typeof format === \"function\") ? format(current) :\n        (format && format[current]) ? format[current] : current,\n      styleClass: `categorical-${index}`,\n      key: `c-${index}` as CategoryKey\n    }\n    return acc\n  }, {})\n\n  const categoryArray: Category[] = Object.values(categoryMap).sort((a, b) => a.order > b.order ? 1 : -1)\n\n  return {\n    title: validateResponsiveValue(title),\n    values,\n    categoriesKey,\n    categoryMap,\n    categoryArray\n  }\n}\n","import {AxisSelection} from \"./render-axis\";\nimport {select, Selection} from \"d3\";\nimport {SVGHTMLElementLegacy} from \"../../constants/types\";\nimport {cssLengthInPx} from \"../../utilities/dom/units\";\nimport {calculateTickAngles} from \"./calculate-tick-angle\";\nimport {normalizeAngle} from \"../../utilities/geometry/angle\";\nimport {elementFromSelection} from \"../../utilities/d3\";\n\nexport function configureTickAngles(axisS: AxisSelection, ticksS: Selection<SVGHTMLElementLegacy>) {\n  const angle = calculateTickAngles(axisS)\n  ticksS.selectAll<Element, any>('.tick').each((d, i, g) => {\n    configureTickAngle(select(g[i]), angle, axisS)\n  })\n}\n\nfunction configureTickAngle(tickS: Selection<Element>, angle: number, axisS: AxisSelection) {\n  const axisElement = elementFromSelection(axisS)\n\n  const textS = tickS.select('text')\n    .attr('x', null)\n    .attr('y', null)\n    .attr('dy', null)\n  const textElement = elementFromSelection(textS) as Element\n\n  const axisLocation = axisElement.classList.contains('axis-bottom') ? 'bottom' :\n    axisElement.classList.contains('axis-left') ? 'left' :\n      axisElement.classList.contains('axis-top') ? 'top' : 'right'\n\n  const pivotS = tickS.select<SVGGElement>('.pivot')!\n  pivotS.append(() => textS.node())\n\n  const {\n    textAnchor,\n    dominantBaseline,\n    transformFixed,\n  } = tickAngleConfig(normalizeAngle(angle))[axisLocation]\n  const transformRelative = cssLengthInPx('0.5em', textElement)\n\n  textS\n    .style('text-anchor', textAnchor)\n    .style('dominant-baseline', dominantBaseline)\n  const normalizedAngle = normalizeAngle(angle)\n\n  pivotS\n    .attr(\"transform\", axisLocation === 'bottom' ?\n      `translate(0, ${transformRelative + transformFixed}) rotate(${normalizedAngle})` : axisLocation === 'top' ?\n        `translate(0, -${transformRelative + transformFixed}) rotate(${normalizedAngle})` : axisLocation === 'left' ?\n          `translate(-${transformRelative + transformFixed}, 0) rotate(${normalizedAngle})` : //right\n          `translate(${transformRelative + transformFixed}, 0) rotate(${normalizedAngle})`\n    )\n}\n\nconst tickAngleConfig = (angle: number) => {\n  return {\n    bottom: bottomConfig(angle),\n    left: bottomConfig(normalizeAngle(angle - 90)),\n    right: bottomConfig(normalizeAngle(angle + 90)),\n    top: topConfig(angle),\n  } as const\n}\nconst bottomConfig = (angle: number) => {\n  const {\n    anchorInRotationFirstHalf, anchorParallelToAxis,\n    baseLineAround180Degree, baseLineAround0Degree, moreSpace\n  } = getAngleState(angle)\n  return {\n    textAnchor: anchorInRotationFirstHalf ? 'start' : anchorParallelToAxis ? 'middle' : 'end',\n    dominantBaseline: baseLineAround0Degree ? 'hanging' : baseLineAround180Degree ? 'auto' : 'middle',\n    transformFixed: moreSpace ? 6 : 4\n  } as const\n}\n\nconst topConfig = (angle: number) => {\n  const {\n    anchorInRotationFirstHalf, anchorParallelToAxis,\n    baseLineAround180Degree, baseLineAround0Degree, moreSpace\n  } = getAngleState(angle)\n  return {\n    textAnchor: anchorInRotationFirstHalf ? 'end' : anchorParallelToAxis ? 'middle' : 'start',\n    dominantBaseline: baseLineAround0Degree ? 'auto' : baseLineAround180Degree ? 'hanging' : 'middle',\n    transformFixed: moreSpace ? 6 : 4\n  } as const\n}\n\nconst getAngleState = (angle: number) => {\n  return {\n    anchorInRotationFirstHalf: (angle > 15 && angle < 165),\n    anchorParallelToAxis: (angle >= 345) || (angle >= 0 && angle <= 15) || (angle >= 165 && angle <= 195),\n    baseLineAround0Degree: (angle >= 0 && angle <= 15) || (angle >= 345),\n    baseLineAround180Degree: (angle >= 165 && angle <= 195),\n    moreSpace: (angle >= 345) || (angle >= 0 && angle <= 15) || (angle >= 165 || angle <= 195)\n  }\n}\n","import {AxisSelection} from \"./render-axis\";\nimport {SVGGroupingElement} from \"../../constants/types\";\n\n\nexport function calculateTickAngles(axisS: AxisSelection) {\n  const {renderer, breakpoints: axisBreakpoints, ...restAxisD} = axisS.datum()\n  const isFlipped = restAxisD.series.responsiveState.currentlyFlipped\n  const tickOrientation = isFlipped ? restAxisD.tickOrientationFlipped : restAxisD.tickOrientation\n\n  if (typeof tickOrientation === 'number') {\n    return tickOrientation\n  }\n\n  const axisDomainS = axisS\n    .select<SVGGroupingElement>('.domain')\n    .datum(axisS.datum())\n\n  let {element, postBreakpoint,\n    lastBreakpoint, firstBreakpoint,\n    preBreakpoint} = tickOrientation.getRespValInterpolated({chart: renderer.chartS, self: axisDomainS})\n\n  if (postBreakpoint === null) return lastBreakpoint.value\n  if (preBreakpoint === null) return firstBreakpoint.value\n\n  const elementLength = element.getBoundingClientRect()[tickOrientation.dependentOn]\n  const angleDiff = postBreakpoint.value - preBreakpoint.value\n  const lengthRatio = (elementLength - preBreakpoint.length) / (postBreakpoint.length - preBreakpoint.length)\n\n  return preBreakpoint.value + lengthRatio * angleDiff\n}\n","import {Selection} from \"d3\";\nimport {backgroundSVGOnly} from \"../../constants/dom/classes\";\nimport {SVGGroupingElement} from \"../../constants/types\";\nimport {Rect} from \"../../utilities\";\n\ntype bgSVGOnlyData = {\n  scale?: number\n  offsetX?: number\n  offsetY?: number\n}\nexport function renderBgSVGOnlyBBox<D extends bgSVGOnlyData>(parentS: Selection<SVGGraphicsElement>, data?: D[], refS?: Selection<SVGGraphicsElement>) {\n  const backgroundS = parentS.selectChildren<SVGRectElement, bgSVGOnlyData>(`.${backgroundSVGOnly}`)\n    .data(data ?? [{} as bgSVGOnlyData])\n    .join('rect')\n    .classed(backgroundSVGOnly, true)\n    .attr('fill', 'transparent') //transparent\n    .attr('stroke', 'transparent')\n    .attr('stroke-width', 0)\n    .attr('data-ignore-layout', true)\n    .attr('x', 0) //reset dimensions to not influence BBox()\n    .attr('y', 0)\n    .attr('width', 0)\n    .attr('height', 0)\n\n  const { width, height, x, y } = (refS ? refS.node() : parentS.node())!.getBBox()\n\n  return backgroundS.attr('x', d =>\n    Math.floor(d.scale ? x + ( width * (1 - d.scale) ) / 2 : x) + (d.offsetX ?? 0))\n    .attr('y', d => Math.floor(d.scale ? y + ( height * (1 - d.scale) ) / 2 : y) + (d.offsetY ?? 0))\n    .attr('width', d => Math.floor(d.scale ? width * d.scale : width))\n    .attr('height', d => Math.floor(d.scale ? height * d.scale : height))\n}\n\nexport function renderBgSVGOnlyByRect(parentS: Selection<SVGGroupingElement>, props: Rect) {\n  return parentS.selectChildren<SVGRectElement, bgSVGOnlyData>(`.${backgroundSVGOnly}`)\n    .data([props])\n    .join('rect')\n    .classed(backgroundSVGOnly, true)\n    .attr('fill', 'transparent') //transparent\n    .attr('stroke', 'transparent')\n    .attr('stroke-width', 0)\n    .attr('data-ignore-layout', true)\n    .attr('x', d => d.x) //reset dimensions to not influence BBox()\n    .attr('y', d => d.y)\n    .attr('width', d => d.width)\n    .attr('height', d => d.height)\n}\n","import {\n  Axis as D3Axis,\n  axisBottom as d3AxisBottom,\n  AxisDomain,\n  axisLeft as d3AxisLeft,\n  axisRight as d3AxisRight,\n  AxisScale,\n  axisTop as d3AxisTop,\n  Selection,\n  Transition\n} from \"d3\";\nimport {Axis} from \"./validate-base-axis\";\nimport {modifyAxisTicksPostGeneration, renderAxisTicksPreGeneration} from \"./render-axis-ticks\";\nimport {configureTickAngles} from \"./configure-tick-angle\";\nimport {renderBgSVGOnlyBBox} from \"../element/bg-svg-only\";\nimport {AxisLayouts, Orientation} from \"../../constants/types\";\nimport type {KeyedAxis} from \"../../../../respvis-parcoord/ts/render/validate-keyed-axis\";\nimport {getCurrentResponsiveValue} from \"../../data/responsive-property\";\nimport {elementFromSelection} from \"../../utilities\";\n\nexport type AxisSelection = Selection<SVGSVGElement | SVGGElement, Axis>;\nexport type KeyedAxisSelection = Selection<SVGSVGElement | SVGGElement, KeyedAxis>;\nexport type AxisTransition = Transition<SVGSVGElement | SVGGElement, Axis>;\n\nexport function renderAxisLayout(axisS: AxisSelection, orientation: Orientation = 'horizontal') {\n  resetTickLines(axisS)\n  const { horizontalLayout, verticalLayout} = axisS.datum()\n  const layout = orientation === 'horizontal' ? horizontalLayout : verticalLayout\n  const generators = {\n    'left': d3AxisLeft,\n    'right': d3AxisRight,\n    'bottom': d3AxisBottom,\n    'top': d3AxisTop,\n  } as const\n  axisS.classed(`axis axis-${layout}`, true)\n  const unusedLayouts = AxisLayouts.filter(axisLayout => axisLayout !== layout)\n  unusedLayouts.forEach(unusedLayout => axisS.classed(`axis-${unusedLayout}`, false))\n  return renderAxis(axisS, d3Axis(generators[layout], axisS))\n}\n\nfunction resetTickLines(axisS: AxisSelection) {\n  const tickLinesS = axisS.selectAll('.tick > line');\n  ['x1', 'x2', 'y1', 'y2']\n    .forEach(attr => tickLinesS.attr(attr, null))\n}\n\nexport function renderAxisSequence(axisS: KeyedAxisSelection, orientation: Orientation) {\n  renderBgSVGOnlyBBox(axisS)\n  renderAxisLayout(axisS, orientation)\n  axisS.classed('axis-sequence', true)\n  axisS.selectAll('.title-wrapper')\n    .classed('layout-container', true)\n  return axisS.attr('data-key', (d) => d.key)\n}\n\nfunction renderAxis(axisS: AxisSelection, a: D3Axis<AxisDomain>): void {\n  const axisD = axisS.datum()\n  const axisElement = elementFromSelection(axisS)\n  const chartS = axisD.renderer.chartS\n\n  const titleWrapperS = axisS\n    .selectAll('.title-wrapper')\n    .data([null])\n    .join('g')\n    .classed('title-wrapper', true)\n\n  titleWrapperS\n    .selectAll('.title')\n    .data([null])\n    .join('g')\n    .classed('title', true)\n    .selectAll('text')\n    .data([null])\n    .join('text')\n    .text(getCurrentResponsiveValue(axisD.title, {chart: chartS, self: axisS}))\n\n  titleWrapperS.selectAll('.subtitle')\n    .data(axisD.subTitle ? [null] : [])\n    .join('g')\n    .classed('subtitle', true)\n    .selectAll('text')\n    .data([null])\n    .join('text')\n    .text(getCurrentResponsiveValue(axisD.subTitle, {chart: chartS, self: axisS}))\n\n  const ticksS = renderAxisTicksPreGeneration(axisS)\n  a(ticksS);\n  modifyAxisTicksPostGeneration(ticksS)\n  axisD.breakpoints.updateCSSVars(axisElement)\n  configureTickAngles(axisS, ticksS)\n}\n\nfunction d3Axis(\n  axisGenerator: (scale: AxisScale<AxisDomain>) => D3Axis<AxisDomain>,\n  axisS: AxisSelection\n): D3Axis<AxisDomain> {\n  const {scaledValues, breakpoints, configureAxis, renderer} = axisS.datum()\n  const axisElement = elementFromSelection(axisS)\n\n  breakpoints.updateCSSVars(axisElement)\n\n  const configureAxisValid = getCurrentResponsiveValue(configureAxis,\n    {chart: renderer.chartS, self: axisS\n    })\n\n  const filteredScaledValues = scaledValues.cloneFiltered()\n\n  const axis = axisGenerator(filteredScaledValues.scale)\n  configureAxisValid(axis)\n  axisS.datum().d3Axis = axis\n  return axis;\n}\n","import {Selection} from \"d3\";\nimport {SVGHTMLElementLegacy} from \"../../constants/types\";\nimport {AxisSelection} from \"./render-axis\";\n\nexport function renderAxisTicksPreGeneration(axisS: AxisSelection) {\n  return axisS\n    .selectAll('.ticks-transform')\n    .data([null])\n    .join('g')\n    .classed('ticks-transform', true)\n    .selectAll<SVGGElement, any>('.ticks')\n    .data([null])\n    .join('g')\n    .classed('ticks', true)\n    .attr('data-ignore-layout-children', true)\n}\n\nexport function modifyAxisTicksPostGeneration(ticksS: Selection<SVGHTMLElementLegacy>) {\n  ticksS\n    .attr('fill', null)\n    .attr('font-family', null)\n    .attr('font-size', null)\n    .attr('text-anchor', null)\n    .selectAll<SVGGElement, string>('.tick')\n    .attr('opacity', null)\n    .attr('data-key', (d) => d)\n    .selectAll('.pivot')\n    .data([null])\n    .join('g')\n    .classed('pivot', true)\n}\n","import {Axis as D3Axis, AxisDomain} from 'd3';\nimport {RenderArgs} from \"../chart\";\nimport {DataSeries} from \"../data-series\";\nimport {ScaledValuesSpatial} from \"../../data/scale\";\nimport {LightWeightAxis, LightWeightAxisUserArgs, validateLightWeightAxis} from \"./validate-lightweight-axis\";\nimport type {KeyedAxis} from \"../../../../respvis-parcoord/ts/render/validate-keyed-axis\";\nimport type {CartesianAxis} from \"../../../../respvis-cartesian/ts/render/validate-cartesian-axis\";\n\nexport type BaseAxisUserArgs = LightWeightAxisUserArgs\n\nexport type BaseAxisArgs = BaseAxisUserArgs & RenderArgs & {\n  scaledValues: ScaledValuesSpatial\n  series: DataSeries\n}\n\nexport type BaseAxis = LightWeightAxis & {\n  series: DataSeries\n  d3Axis?: D3Axis<any> //d3 axis generator available after first render of axis\n}\n\nexport type Axis = BaseAxis | CartesianAxis | KeyedAxis\n\nexport interface ConfigureAxisFn {\n  (axis: D3Axis<AxisDomain>): void;\n}\n\nexport function validateBaseAxis(args: BaseAxisArgs): BaseAxis {\n  return {\n    ...validateLightWeightAxis(args),\n    series: args.series\n  }\n}\n","import {AxisLayoutHorizontal, AxisLayoutsHorizontal, AxisLayoutsVertical, AxisLayoutVertical,} from \"../../constants\";\nimport {ConfigureAxisFn} from \"./validate-base-axis\";\nimport {ComponentBreakpoints, ComponentBreakpointsUserArgs,} from \"../../data/breakpoints/component-breakpoints\";\nimport {\n  BreakpointPropertyOptional,\n  BreakpointPropertyUserArgs,\n  ResponsiveValueOptional,\n  ResponsiveValueUserArgs,\n  validateBreakpointProperty,\n  validateResponsiveValue\n} from '../../data/responsive-property'\nimport {ScaledValuesSpatial} from \"../../data/scale\";\nimport {RenderArgs} from \"../chart\";\nimport {Axis as D3Axis} from \"d3-axis\";\n\nexport type LightWeightAxisUserArgs = {\n  breakpoints?: ComponentBreakpointsUserArgs\n  title?: ResponsiveValueUserArgs<string>\n  subTitle?: ResponsiveValueUserArgs<string>\n  horizontalLayout?: AxisLayoutHorizontal\n  verticalLayout?: AxisLayoutVertical\n  configureAxis?: ResponsiveValueUserArgs<ConfigureAxisFn>\n  tickOrientation?: BreakpointPropertyUserArgs<number>\n  tickOrientationFlipped?: BreakpointPropertyUserArgs<number>\n}\n\nexport type LightWeightAxisArgs = LightWeightAxisUserArgs & RenderArgs & {\n  scaledValues: ScaledValuesSpatial\n}\n\nexport type LightWeightAxis = Required<Omit<LightWeightAxisArgs,\n  'breakpoints' | 'tickOrientation' | 'tickOrientationFlipped' | 'title' |\n  'subTitle' | 'configureAxis'>> & {\n  title: ResponsiveValueOptional<string>\n  subTitle: ResponsiveValueOptional<string>\n  configureAxis: ResponsiveValueOptional<ConfigureAxisFn>\n  breakpoints: ComponentBreakpoints,\n  tickOrientation: BreakpointPropertyOptional<number>\n  tickOrientationFlipped: BreakpointPropertyOptional<number>\n  d3Axis?: D3Axis<any> //axis available after first render\n}\n\nexport function validateLightWeightAxis(args: LightWeightAxisArgs): LightWeightAxis {\n  const axis: LightWeightAxis = {\n    renderer: args.renderer,\n    scaledValues: args.scaledValues,\n    title: validateResponsiveValue(args.title || ''),\n    subTitle: validateResponsiveValue(args.subTitle || ''),\n    configureAxis: validateResponsiveValue(args.configureAxis || (() => {\n    })),\n    breakpoints: new ComponentBreakpoints(args.breakpoints),\n    horizontalLayout: args.horizontalLayout && AxisLayoutsHorizontal.includes(args.horizontalLayout) ?\n      args.horizontalLayout : 'bottom',\n    verticalLayout: args.verticalLayout && AxisLayoutsVertical.includes(args.verticalLayout) ?\n      args.verticalLayout : 'left',\n    tickOrientation: validateBreakpointProperty(args.tickOrientation ?? 0),\n    tickOrientationFlipped: validateBreakpointProperty(args.tickOrientationFlipped ?? 0),\n  }\n  return axis\n}\n","import {ScaleBand, ScaleLinear, ScaleLogarithmic, ScalePower, ScaleTime} from \"d3\";\nimport {ScaledValuesSpatialDomain} from \"./scaled-values-spatial/validate-scaled-values-spatial\";\n\nexport type ScaleNumeric = ScaleLinear<number, number, never> | ScaleLogarithmic<number, number, never> |\n  ScalePower<number, number, never>\n\nexport type ScaleNumericOrTemporal<T extends number | Date> =\n  T extends Date ? ScaleTime<number, number, never> :\n    T extends number ? ScaleNumeric : never\n\nexport type ScaleBase<T extends ScaledValuesSpatialDomain> =\n  T extends Date | number ? ScaleNumericOrTemporal<T> :\n    T extends string ? ScaleBand<string> : never\n\n\nexport function isScale(arg: any) {\n  return 'domain' in arg && 'range' in arg\n}\n\nexport function isScaleNumeric(arg: any): arg is ScaleNumeric {\n  return isScale(arg) && typeof arg.domain()[0] === 'number'\n}\n\nexport function isScaleCategory(arg: any): arg is ScaleBand<string> {\n  return isScale(arg) && typeof arg.domain()[0] === 'string'\n}\n\nexport function isScaleTime(arg: any): arg is ScaleTime<number, number, never> {\n  return isScale(arg) && arg.domain()[0] instanceof Date\n}\n\n","import {AxisType, Orientation, ScaledValueTag, ToArray} from \"../../../constants/types\";\nimport {ScaledValuesSpatialDomain} from \"./validate-scaled-values-spatial\";\nimport {ScaleBase} from \"../scales\";\nimport {ZoomTransform} from \"d3\";\n\nimport {ScaledValuesSpatial} from \"./scaled-values-spatial\";\n\nexport type ScaledValuesSpatialBaseArgs = { parentKey: string }\n\nexport abstract class ScaledValuesSpatialBase<T extends ScaledValuesSpatialDomain> {\n  abstract readonly tag: ScaledValueTag\n  abstract readonly values: ToArray<T>\n  abstract readonly scale: ScaleBase<T>\n  abstract readonly flippedScale: ScaleBase<T>\n  readonly parentKey: string\n  inverted: boolean\n  orientation: Orientation = \"horizontal\"\n  horizontalRange: number[] = [0, 1]\n  verticalRange: number[] = [1, 0]\n  protected constructor(args: ScaledValuesSpatialBaseArgs) {\n    this.parentKey = args.parentKey\n    this.inverted = false\n  }\n\n  updateRange(horizontalRange: number[], verticalRange: number[], orientation: Orientation) {\n    this.verticalRange = verticalRange\n    this.horizontalRange = horizontalRange\n    this.orientation = orientation\n    this.scale.range(this.orientation === 'horizontal' ? horizontalRange : verticalRange)\n  }\n\n  getScaledValue(i: number) {\n    return this.scale(this.values[i] as any)!\n  }\n\n  getScaledValueStart(i: number) {\n    return this.scale(this.values[i] as any)!\n  }\n\n  getScaledValueEnd(i: number) {\n    return this.scale(this.values[i] as any)!\n  }\n\n  getRangeByPercent(percent: number, considerInverse = true, orientationArg?: Orientation) {\n    const orientation = orientationArg ?? this.orientation\n    return considerInverse ? percentRangeFormulaWithInverse[orientation](percent, this) :\n      percentRangeFormulaWithoutInverse[orientation](percent, this)\n  }\n\n  getRangeInverseUndone() {\n    return this.inverted ? this.getCurrentRangeInversed() : this.scale.range()\n  }\n\n  getCurrentRangeMax() {\n    const range = this.getRangeInverseUndone()\n    return this.orientation === 'horizontal' ? range[1] : range[0]\n  }\n\n  getCurrentRangeInversed() {\n    const originalRange = this.scale.range()\n    return [originalRange[1], originalRange[0]]\n  }\n\n  abstract atScreenPosition(value: number): T\n\n  abstract getNearestValue(value: T): T\n\n  isKeyActiveByKey(key: string) {\n    return true\n  }\n\n  abstract isValueActive(index: number): boolean\n\n  setKeyActiveIfDefined(key: string, value: boolean) {\n  }\n\n  cloneFiltered(): ScaledValuesSpatial {\n    return this.clone()\n  }\n\n  cloneZoomed(transform: ZoomTransform, axisType: AxisType): ScaledValuesSpatial {\n    return this.clone()\n  }\n\n  cloneRangeInversed() {\n    const clone = this.clone()\n    clone.scale.range(this.getCurrentRangeInversed())\n    clone.inverted = !this.inverted\n    return clone\n  }\n\n  abstract clone(): ScaledValuesSpatial\n}\n\nconst percentRangeFormulaWithInverse = {\n  horizontal: <T extends ScaledValuesSpatialDomain>(percent: number, scaledValues: ScaledValuesSpatialBase<T>) => {\n    return scaledValues.scale.range()[1] * percent\n  },\n  vertical: <T extends ScaledValuesSpatialDomain>(percent: number, scaledValues: ScaledValuesSpatialBase<T>) => {\n    return scaledValues.scale.range()[0] - scaledValues.scale.range()[0] * percent\n  }\n}\n\nconst percentRangeFormulaWithoutInverse = {\n  horizontal: <T extends ScaledValuesSpatialDomain>(percent: number, scaledValues: ScaledValuesSpatialBase<T>) => {\n    return scaledValues.getRangeInverseUndone()[1] * percent\n  },\n  vertical: <T extends ScaledValuesSpatialDomain>(percent: number, scaledValues: ScaledValuesSpatialBase<T>) => {\n    return scaledValues.getRangeInverseUndone()[0] - scaledValues.getRangeInverseUndone()[0] * percent\n  }\n}\n","import {ScaledValuesSpatialBase, ScaledValuesSpatialBaseArgs} from \"./scaled-values-spatial-base\";\nimport {scaleBand, ScaleBand, ZoomTransform} from \"d3\";\nimport {Categories, validateCategories} from \"../../categories\";\nimport {ActiveKeyMap, AxisType} from \"../../../constants/types\";\nimport {ResponsiveValueOptional, ResponsiveValueUserArgs, validateResponsiveValue} from \"../../responsive-property\";\n\nexport type ScaledValuesCategoricalUserArgs = {\n  values: string[],\n  scale?: ScaleBand<string>,\n}\n\ntype ScaledValuesCategoricalArgs = ScaledValuesCategoricalUserArgs & ScaledValuesSpatialBaseArgs & {\n  title: ResponsiveValueUserArgs<string>\n}\n\nexport class ScaledValuesCategorical extends ScaledValuesSpatialBase<string> {\n  tag = 'categorical' as const\n  readonly values: string[]\n  readonly scale: ScaleBand<string>\n  readonly flippedScale: ScaleBand<string>\n  readonly title: ResponsiveValueOptional<string>\n  readonly categories: Categories\n  readonly keysActive: ActiveKeyMap\n\n  constructor(args: ScaledValuesCategoricalArgs | ScaledValuesCategorical) {\n    super(args)\n    this.values = args.values\n    this.scale = args.scale ?? scaleBand([0, 600]).domain(this.values).padding(0.1)\n    this.flippedScale = this.scale.copy()\n    this.title = 'tag' in args ? args.title : validateResponsiveValue(args.title)\n\n    //TODO: this is no real alignment validation. Fix this!\n    this.categories = 'categories' in args ? args.categories : validateCategories({\n      values: this.values,\n      title: args.title,\n      categoriesKey: args.parentKey\n    }, this.values)\n\n    this.keysActive = 'keysActive' in args ? args.keysActive : this.categories.categoryArray.reduce((prev, c) => {\n      prev[`${args.parentKey}-${c.key}`] = true\n      return prev\n    }, {})\n\n    if ('tag' in args) {\n      this.inverted = args.inverted\n    }\n  }\n\n  getOrder(i: number) {\n    return this.categories.categoryMap[this.values[i]].order\n  }\n\n  getStyleClass(i: number) {\n    return this.categories.categoryMap[this.values[i]].styleClass\n  }\n\n  getScaledValueStart(i: number) {\n    return valByIndexFormula[this.orientation].start(i, this)\n  }\n\n  getScaledValue(i: number) {\n    return valByIndexFormula[this.orientation].middle(i, this)\n  }\n\n  getScaledValueEnd(i: number) {\n    return valByIndexFormula[this.orientation].end(i, this)\n  }\n\n  isKeyActiveByKey(key: string) {\n    // noinspection PointlessBooleanExpressionJS\n    return this.keysActive[key] !== false\n  }\n\n  isValueActive(i: number) {\n    return this.isKeyActiveByKey(this.getCombinedKey(i))\n  }\n\n  setKeyActiveIfDefined(key: string, value: boolean) {\n    if (this.keysActive[key] !== undefined) this.keysActive[key] = value\n  }\n\n  getCombinedKey(i: number) {\n    const category = this.values[i]\n    return this.parentKey + '-' + this.categories.categoryMap[category].key\n  }\n\n  getCategoryData(i: number) {\n    const rawCategory = this.values[i]\n    const category = this.categories.categoryMap[rawCategory]\n    const categoryKey = category.key\n    const parentKey = this.parentKey\n    const combinedKey = parentKey + '-' + categoryKey\n    const styleClass = category.styleClass\n    return {categoryKey, parentKey, combinedKey, styleClass}\n  }\n\n  cloneZoomed(transform: ZoomTransform, axisType: AxisType) {\n    return this.clone()\n  }\n\n  cloneFiltered() {\n    const activeDomain = this.values.reduce((prev, current) => {\n      const key = `${this.parentKey}-${this.categories.categoryMap[current].key}`\n      return this.keysActive[key] ? [...prev, current] : prev\n    }, [])\n    const clone = this.clone()\n    clone.scale.domain(activeDomain)\n    return clone\n  }\n\n  atScreenPosition(value: number) {\n    const activeValues = this.cloneFiltered()\n    const domain = activeValues.scale.domain()\n    return domain.find(category => {\n      const lower = activeValues.scale(category)!\n      const upper = lower + activeValues.scale.bandwidth()\n      return value > lower && value < upper\n    }) ?? ''\n  }\n\n  getNearestValue(value: string) { return value }\n\n  clone(): ScaledValuesCategorical {\n    return new ScaledValuesCategorical({...this, scale: this.scale.copy()})\n  }\n}\n\nconst valByIndexFormulaCategoricalHorizontal = {\n  start: (index: number, scaledValues: ScaledValuesCategorical) => {\n    return scaledValues.scale(scaledValues.values[index])!\n  },\n  middle: (index: number, scaledValues: ScaledValuesCategorical) => {\n    return scaledValues.scale(scaledValues.values[index])! + scaledValues.scale.bandwidth() / 2\n  },\n  end: (index: number, scaledValues: ScaledValuesCategorical) => {\n    return scaledValues.scale(scaledValues.values[index])! + scaledValues.scale.bandwidth()\n  }\n} as const\n\nconst valByIndexFormulaCategoricalVertical = {\n  start: (index: number, scaledValues: ScaledValuesCategorical) => {\n    return scaledValues.scale(scaledValues.values[index])! - scaledValues.scale.bandwidth()\n  },\n  middle: (index: number, scaledValues: ScaledValuesCategorical) => {\n    return scaledValues.scale(scaledValues.values[index])! - scaledValues.scale.bandwidth() / 2\n  },\n  end: (index: number, scaledValues: ScaledValuesCategorical) => {\n    return scaledValues.scale(scaledValues.values[index])!\n  }\n} as const\n\nconst valByIndexFormula = {\n  horizontal: valByIndexFormulaCategoricalHorizontal,\n  vertical: valByIndexFormulaCategoricalVertical\n} as const\n","import {ScaledValuesSpatialBase, ScaledValuesSpatialBaseArgs} from \"./scaled-values-spatial-base\";\nimport {max, min, scaleTime, ScaleTime, ZoomTransform} from \"d3\";\nimport {AxisType} from \"../../../constants/types\";\nimport {ErrorMessages} from \"../../../constants/error\";\n\nexport type ScaledValuesTemporalUserArgs = {\n  values: Date[],\n  scale?: ScaleTime<number, number, never>\n}\n\ntype ScaledValuesTemporalArgs = ScaledValuesTemporalUserArgs & ScaledValuesSpatialBaseArgs\n\nexport class ScaledValuesTemporal extends ScaledValuesSpatialBase<Date> {\n  tag = 'date' as const\n  values: Date[]\n  scale: ScaleTime<number, number, never>\n  flippedScale: ScaleTime<number, number, never>\n  filteredRanges: [Date, Date][]\n\n  constructor(args: ScaledValuesTemporalArgs | ScaledValuesTemporal) {\n    super(args)\n    this.values = args.values\n    const extentMin = min(this.values)\n    const extentMax = max(this.values)\n    if (!extentMin || !extentMax) throw new Error(ErrorMessages.invalidScaledValuesCombination)\n    this.scale = args.scale ?? scaleTime([extentMin, extentMax], [0, 600]).nice()\n    this.flippedScale = this.scale.copy()\n    if ('tag' in args) {\n      this.filteredRanges = args.filteredRanges\n      this.inverted = args.inverted\n    } else {\n      this.filteredRanges = [this.scale.domain() as [Date, Date]]\n    }\n  }\n\n  isValueActive(index: number): boolean {\n    for(let i = 0; i < this.filteredRanges.length; i++) {\n      const range = this.filteredRanges[i]\n      if (this.values[index] >= range[0] && this.values[index] <= range[1]) return true\n    }\n    return false\n  }\n\n  cloneZoomed(transform: ZoomTransform, axisType: AxisType): ScaledValuesTemporal {\n    const scale = axisType === 'x' ? transform.rescaleX(this.scale) : transform.rescaleY(this.scale)\n    return new ScaledValuesTemporal({...this, scale})\n  }\n\n  cloneFiltered() {\n    return this.clone();\n  }\n\n  atScreenPosition(value: number) {\n    return this.scale.invert(value)\n  }\n\n  getNearestValue(estimate: Date): Date {\n    let nearest = this.values[0]\n    for (let i = 1; i < this.values.length; i++) {\n      const current = this.values[i]\n      if ( Math.abs(current.valueOf() - estimate.valueOf()) < Math.abs(nearest.valueOf() - estimate.valueOf()) ) nearest = current\n    }\n    return nearest\n  }\n\n  clone(): ScaledValuesTemporal {\n    return new ScaledValuesTemporal({...this, scale: this.scale.copy()})\n  }\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","import {ScaledValuesSpatialBase, ScaledValuesSpatialBaseArgs} from \"./scaled-values-spatial-base\";\nimport {scaleLinear, ZoomTransform} from \"d3\";\nimport {AxisType} from \"../../../constants/types\";\nimport {ScaleNumeric} from \"../scales\";\n\nexport type ScaledValuesNumericUserArgs = {\n  values: number[],\n  scale?: ScaleNumeric\n}\n\ntype ScaledValuesNumericArgs = ScaledValuesNumericUserArgs & ScaledValuesSpatialBaseArgs\n\nexport class ScaledValuesNumeric extends ScaledValuesSpatialBase<number> {\n  tag = 'linear' as const\n  values: number[]\n  scale: ScaleNumeric\n  flippedScale: ScaleNumeric\n  filteredRanges: [number, number][]\n\n  constructor(args: ScaledValuesNumericArgs | ScaledValuesNumeric) {\n    super(args)\n    this.values = args.values\n    const extent = [Math.min(...this.values), Math.max(...this.values)]\n    this.scale = args.scale ?? scaleLinear().domain(extent).nice()\n    this.flippedScale = this.scale.copy()\n    if ('tag' in args) {\n      this.filteredRanges = args.filteredRanges\n      this.inverted = args.inverted\n    } else {\n      this.filteredRanges = [this.scale.domain() as [number, number]]\n    }\n  }\n\n  isValueActive(index: number): boolean {\n    for(let i = 0; i < this.filteredRanges.length; i++) {\n      const range = this.filteredRanges[i]\n      if (this.values[index] >= range[0] && this.values[index] <= range[1]) return true\n    }\n    return false\n  }\n\n  cloneZoomed(transform: ZoomTransform, axisType: AxisType): ScaledValuesNumeric {\n    const scale = axisType === 'x' ? transform.rescaleX(this.scale) : transform.rescaleY(this.scale)\n    return new ScaledValuesNumeric({...this, scale})\n  }\n\n  cloneFiltered() {\n    return this.clone();\n  }\n\n  atScreenPosition(value: number) {\n    return this.scale.invert(value)\n  }\n\n  getNearestValue(estimate: number) {\n    let nearest = this.values[0]\n    for (let i = 1; i < this.values.length; i++) {\n      const current = this.values[i]\n      if ( Math.abs(current - estimate) < Math.abs(nearest - estimate) ) nearest = current\n    }\n    return nearest\n  }\n\n  clone(): ScaledValuesNumeric {\n    return new ScaledValuesNumeric({...this, scale: this.scale.copy()})\n  }\n}\n","import {AxisDomain} from 'd3';\nimport {ErrorMessages} from \"../../../constants/error\";\nimport {AxisKey} from \"../../../constants/types\";\nimport {ScaledValuesTemporal} from \"./scaled-values-temporal\";\nimport {ScaledValuesNumeric} from \"./scaled-values-numeric\";\nimport {ScaledValuesCategorical} from \"./scaled-values-categorical\";\nimport {RVArray} from \"../../../utilities\";\nimport {ScaledValuesSpatial, ScaledValuesSpatialUserArgs} from \"./scaled-values-spatial\";\nimport {isScaleCategory, isScaleNumeric, isScaleTime} from \"../scales\";\n\nconst {equalizeLengths, hasValueOf, isDateArray, isNumberArray, isStringArray} = RVArray\n\nexport type ScaledValuesSpatialDomain = Extract<AxisDomain, number | string | Date>\n\nexport function validateScaledValuesSpatial(axisScaleArgs: ScaledValuesSpatialUserArgs<ScaledValuesSpatialDomain>,\n                                            axisKey: AxisKey): ScaledValuesSpatial {\n  const {values, scale} = axisScaleArgs\n\n  if (values.length <= 0) throw new Error(ErrorMessages.responsiveValueHasNoValues)\n\n  if (isDateArray(values)) {\n    if (scale && !isScaleTime(scale)) throw new Error(ErrorMessages.invalidScaledValuesCombination)\n    return new ScaledValuesTemporal({values, scale, parentKey: axisKey})\n  }\n\n  if (isNumberArray(values) || hasValueOf(values)) {\n    if (scale && !isScaleNumeric(scale)) {\n      throw new Error(ErrorMessages.invalidScaledValuesCombination)\n    }\n    const valuesNum = isNumberArray(values) ?\n      values.map(value => Number(value)) :\n      values.map(value => parseFloat(value.valueOf()))\n    return new ScaledValuesNumeric({values: valuesNum, scale, parentKey: axisKey})\n  }\n\n  if (isStringArray(values)) {\n    if (scale && !isScaleCategory(scale)) throw new Error(ErrorMessages.invalidScaledValuesCombination)\n    return new ScaledValuesCategorical({values, scale, parentKey: axisKey, title: 'Axis ' + axisKey})\n  }\n  throw new Error(ErrorMessages.invalidScaledValuesCombination)\n}\n\n\ntype SV = { values: any[], scale?: any }\nexport function alignScaledValuesLengths<S1 extends SV, S2 extends SV>\n(vws1: S1, vws2: S2): [S1, S2] {\n  const [vws1Aligned, vws2Aligned] = equalizeLengths(vws1.values, vws2.values)\n  const newVws1: S1 = {...vws1, values: vws1Aligned}\n  const newVws2: S2 = {...vws2, values: vws2Aligned}\n  return [newVws1, newVws2]\n}\n\n\nexport type ScaledValuesSpatialOrdered<T> = {\n  [K in ScaledValuesSpatial[\"tag\"]]: {\n    values: Extract<ScaledValuesSpatial, { tag: K }>,\n    wrapper: T\n  }[]\n}\n\nexport function orderScaledValuesSpatial<T>(values: ScaledValuesSpatial[], wrappers: T[]): ScaledValuesSpatialOrdered<T> {\n  const valuesOrdered: ScaledValuesSpatialOrdered<T> = {linear: [], categorical: [], date: []}\n  values.forEach((val, index) => {\n    //@ts-ignore\n    valuesOrdered[val.tag].push({values: val, wrapper: wrappers[index]})\n  })\n  return valuesOrdered\n}\n","import {scaleLinear} from \"d3\";\nimport {ScaledValuesNumeric} from \"./scaled-values-spatial/scaled-values-numeric\";\nimport {ScaledValuesCategorical} from \"./scaled-values-spatial/scaled-values-categorical\";\nimport {RVArray} from \"../../utilities\";\nimport {ScaleNumeric} from \"./scales\";\n\nexport class ScaledValuesCumulativeSummation {\n  numericalValues: ScaledValuesNumeric\n  categoricalValues: ScaledValuesCategorical\n  additionalCategories: ScaledValuesCategorical\n  aggregatedScale?: ScaleNumeric\n  private aggregationResult?: ScaledValuesNumeric\n  constructor(linearValues: ScaledValuesNumeric,\n              categoricalValues: ScaledValuesCategorical,\n              additionalCategories: ScaledValuesCategorical,\n              aggregatedScale?: ScaleNumeric) {\n    this.numericalValues = linearValues\n    this.categoricalValues = categoricalValues\n    this.additionalCategories = additionalCategories\n    this.aggregatedScale = aggregatedScale\n  }\n\n  sumCached(): ScaledValuesNumeric {\n    if (this.aggregationResult) return this.aggregationResult\n    const numberCategories = this.categoricalValues.categories.categoryArray.length\n    const groupedValues: number[][] = new Array<null>(numberCategories).fill(null).map(() => [])\n    const summedValues: number[] = new Array<number>(numberCategories).fill(0)\n    const numberValues = this.categoricalValues.values.length\n    const cumulativeValues: number[] = new Array<number>(numberValues).fill(0)\n\n    this.categoricalValues.values.forEach((_, i) => {\n      const categoryOrder = this.categoricalValues.getOrder(i)\n      const currentValue = this.numericalValues.values[i]\n      groupedValues[categoryOrder].push(currentValue)\n      if (this.additionalCategories && !this.additionalCategories.isValueActive(i)) return\n      cumulativeValues[i] = summedValues[categoryOrder]\n      summedValues[categoryOrder] += this.numericalValues.values[i]\n    }, [])\n\n    const aggregatedValuesOrder = groupedValues.map(vals => RVArray.sum(vals))\n    console.assert(aggregatedValuesOrder.length === this.categoricalValues.categories.categoryArray.length)\n    const aggregatedDomain = [this.numericalValues.scale.domain()[0], Math.max(...aggregatedValuesOrder)]\n\n    this.aggregationResult = new ScaledValuesNumeric({\n      values: cumulativeValues,\n      scale: this.aggregatedScale ? this.aggregatedScale : scaleLinear().domain(aggregatedDomain).nice(),\n      parentKey: this.numericalValues.parentKey\n    })\n    return this.aggregationResult\n  }\n}\n","import {BaseAxis, BaseAxisUserArgs, validateBaseAxis} from \"../../render/axis\";\nimport {DataSeries} from \"../../render/data-series\";\nimport {Renderer} from \"../../render/chart\";\nimport {validateScaledValuesSpatial} from \"../scale\";\nimport {ScaledValuesSequential} from \"../scale/scaled-values-sequential\";\n\nexport type SequentialColorUserArgs = ScaledValuesSequential & {\n  axis: BaseAxisUserArgs\n}\n\nexport type SequentialColorArgs = SequentialColorUserArgs & {\n  renderer: Renderer\n  series: DataSeries\n}\n\nexport type SequentialColor = Pick<SequentialColorArgs, 'scale' | 'values'> & {\n  axis: BaseAxis\n};\n\nexport function validateSequentialColor(arg: SequentialColorArgs): SequentialColor {\n  const {axis, renderer, values, scale, series} = arg\n  const scaledValues = validateScaledValuesSpatial({values}, 'ac-0')\n  return { values, scale,\n    axis: validateBaseAxis({...axis, scaledValues, renderer, series})\n  }\n}\n","import {zoom, ZoomBehavior, zoomIdentity, ZoomTransform} from \"d3\";\n\nexport type ZoomArgs = {\n  in: number\n  out: number\n}\nexport type Zoom = ZoomArgs & {\n  currentIn: number\n  currentOut: number\n  currentTransform: ZoomTransform\n  behaviour: ZoomBehavior<Element, unknown>\n}\n\nexport function validateZoom(args: ZoomArgs): Zoom {\n  return {\n    ...args,\n    currentIn: args.in,\n    currentOut: args.out,\n    currentTransform: zoomIdentity,\n    behaviour: zoom()\n  }\n}\n","import {select, Selection} from 'd3';\nimport {Position, ScreenPositionInfo, Size} from 'respvis-core';\n\nconst toolTipId = 'tooltip-rv'\nexport const tooltipSelector = `#${toolTipId}`\nexport const tooltipPositionStrategies = ['none', 'sticky'] as const\nexport type TooltipPositionStrategy = typeof tooltipPositionStrategies[number]\n\nexport type TooltipUserArgs = {\n  active?: boolean\n  positionStrategySeries?: TooltipPositionStrategy\n  positionStrategyInspect?: TooltipPositionStrategy\n  onInspectMove?: (info: ScreenPositionInfo) => void\n  autoOffset?: number\n}\nexport type TooltipArgs = TooltipUserArgs\ntype TooltipData = Required<TooltipArgs>\n\nexport class Tooltip implements TooltipData {\n  positionStrategySeries: TooltipPositionStrategy\n  positionStrategyInspect: TooltipPositionStrategy\n  onInspectMove: (info: ScreenPositionInfo) => void;\n  autoOffset: number\n  active = true\n  seriesTooltipVisible = false\n  movableCrossTooltipVisible = false\n  constructor(args?: TooltipArgs) {\n    this.positionStrategySeries = args?.positionStrategySeries ?? 'sticky'\n    this.positionStrategyInspect = args?.positionStrategyInspect ?? 'sticky'\n    this.autoOffset = args?.autoOffset ?? 8\n    this.active = args?.active ?? true\n    this.onInspectMove = args?.onInspectMove ?? (() => {})\n  }\n\n  isVisible() {\n    return this.seriesTooltipVisible || this.movableCrossTooltipVisible\n  }\n\n  applyPositionStrategy(e: PointerEvent, positionStrategy: TooltipPositionStrategy) {\n    const tooltipS = select<HTMLDivElement, any>(tooltipSelector)\n    const mousePosition = { x: e.clientX, y: e.clientY }\n    switch (positionStrategy) {\n      case 'sticky': {\n        updateTooltipPositionCSSVars(tooltipS, {position: mousePosition, offset: this.autoOffset})\n      } break;\n      case \"none\": default: {}\n    }\n    tooltipPositionStrategies.forEach(strategy => {\n      tooltipS.classed(`tooltip-position-${strategy}`, false)\n    })\n    tooltipS.classed(`tooltip-position-${positionStrategy}`, true)\n  }\n}\n\nexport function setTooltipVisibility(visibility: 'visible' | 'hidden') {\n  select(tooltipSelector)\n    .classed('tooltip--visible', visibility === 'visible')\n    .classed('tooltip--hidden', visibility === 'hidden')\n}\n\nexport interface TooltipPosition {\n  position: Position;\n  offset?: number;\n}\n\nexport function updateTooltipPositionCSSVars(tooltipS: Selection<HTMLDivElement>, config: TooltipPosition) {\n  const offset = config.offset || 8\n  const position = config.position\n  const windowSize: Size = {width: window.innerWidth, height: window.innerHeight};\n  const offsetDirection = {\n    x: position.x <= windowSize.width / 2 ? 1 : -1,\n    y: position.y <= windowSize.height / 2 ? 1 : -1,\n  };\n\n  const left = offsetDirection.x >= 0;\n  const top = offsetDirection.y >= 0;\n\n  const leftOffset = position.x + offsetDirection.x * offset;\n  const rightOffset = windowSize.width - leftOffset;\n  const topOffset = position.y + offsetDirection.y * offset;\n  const bottomOffset = windowSize.height - topOffset;\n\n  tooltipS\n    .style('--place-left', left ? ' ' : 'initial')\n    .style('--place-right', !left ? ' ' : 'initial')\n    .style('--place-top', top ? ' ' : 'initial')\n    .style('--place-bottom', !top ? ' ' : 'initial')\n    .style('--left-offset', leftOffset + 'px')\n    .style('--right-offset', rightOffset + 'px')\n    .style('--top-offset', topOffset + 'px')\n    .style('--bottom-offset', bottomOffset + 'px')\n}\n","import {select, Selection} from 'd3';\nimport {DataSeries} from 'respvis-core';\nimport {tooltipSelector} from './tooltip';\n\n/**\n * Generator for the tooltip content of data series.\n */\nexport type DataSeriesTooltipGenerator<E extends Element, D> = (item: E, data: D) => string;\n\nexport function renderDataSeriesTooltip<E extends Element, D>(seriesS: Selection<Element, DataSeries>) {\n  const tooltip = seriesS.datum().renderer.windowS.datum().tooltip\n\n  const seriesTooltipS = select(tooltipSelector)\n    .selectAll('.item.tooltip--series')\n    .data(tooltip.active ? [null] : [])\n    .join('div')\n    .classed('item tooltip--series', true)\n\n  seriesS.on('pointermove.tooltip', (e) => {\n    const positionStrategy = tooltip.positionStrategySeries\n    tooltip.applyPositionStrategy(e, positionStrategy)\n  }).on('pointerover.tooltip', (e, d) => {\n    const item = e.target;\n    if (!d.renderData.markerTooltipGenerator || !item) return\n    const data = select<E, D>(item).datum()\n\n    tooltip.seriesTooltipVisible = true\n    select(tooltipSelector).html(d.renderData.markerTooltipGenerator(item, data));\n  }).on('pointerout.tooltip', () => {\n    tooltip.seriesTooltipVisible = false\n    select(tooltipSelector).html(null);\n  })\n  return seriesTooltipS\n}\n","import {elementFromSelection, Window} from \"respvis-core\";\nimport {select, Selection} from \"d3\";\nimport {setTooltipVisibility, tooltipSelector} from \"./tooltip\";\n\nexport function renderTooltip(): Selection<HTMLDivElement> {\n  const bodyS = select('html > body')\n  const windowS = bodyS.selectAll<HTMLDivElement, Window>('.window-rv')\n  const drawAreaS = windowS.selectAll<HTMLDivElement, Window>('.draw-area')\n\n  const tooltipS = bodyS.selectAll<HTMLDivElement, unknown>(tooltipSelector)\n    .data([null])\n    .join('div')\n    .attr('id', 'tooltip-rv')\n\n  drawAreaS.on('pointermove.tooltipVisibility', function() {\n    const window = windowS.data().find(window => window.tooltip.isVisible())\n    setTooltipVisibility(!!window ? 'visible' : 'hidden')\n  }).on('pointerout.tooltipVisibility', function() {\n    setTooltipVisibility('hidden')\n  })\n\n  select(window).on('pointermove.tooltipVisibility', function(e) {\n    const windowHovered = windowS.data().find(window => {\n      const rect = elementFromSelection(window.renderer.drawAreaBgS).getBoundingClientRect()\n      return (!(e.clientX < rect.x || e.clientX > rect.x + rect.width ||\n        e.clientY < rect.y || e.clientY > rect.y + rect.height))\n    })\n    if (windowHovered) {\n      windowHovered.tooltip.movableCrossTooltipVisible = windowHovered.settings.get('movableCrossActive')\n    }\n    setTooltipVisibility(windowHovered?.tooltip.isVisible() ? 'visible' : 'hidden')\n  })\n  return tooltipS\n}\n","import {DataSeries, elementFromSelection} from \"respvis-core\";\nimport {select} from \"d3\";\nimport {tooltipSelector} from \"./tooltip\";\n\nexport function renderMovableCrossTooltip(series: DataSeries) {\n  const { renderer} = series\n  const tooltipS = select(tooltipSelector)\n  const tooltip = renderer.windowS.datum().tooltip\n\n  const renderContent = (active: boolean) => {\n\n    const toolTipCrossStateS = tooltipS\n      .selectAll('.item.tooltip--cross')\n      .data(active ? [null] : [])\n      .join('div')\n      .classed('item tooltip--cross', true)\n    const crossStateTextS =  toolTipCrossStateS.selectAll('output')\n      .data(active ? [null, null] : [])\n      .join('output')\n    renderer.drawAreaS.classed('cursor-cross', active)\n    return {toolTipCrossStateS, crossStateTextS}\n  }\n\n  const onDrawAreaMove = (e: PointerEvent, active: boolean) => {\n    const windowD = renderer.windowS.datum()\n    tooltip.movableCrossTooltipVisible = windowD.settings.get('movableCrossActive')\n\n    const {crossStateTextS} = renderContent(active)\n    if (!active) return\n\n    const positionStrategy = windowD.tooltip.positionStrategyInspect\n    windowD.tooltip.applyPositionStrategy(e, positionStrategy)\n\n    const backgroundE = elementFromSelection(renderer.drawAreaBgS) as Element\n    const rect = backgroundE.getBoundingClientRect()\n    const x = e.clientX - rect.left\n    const y = e.clientY - rect.top\n\n    const screenData  = series.getScaledValuesAtScreenPosition(x, y)\n    const { horizontal, horizontalName, vertical, verticalName} = screenData\n\n    const firstText = crossStateTextS.filter((d, i) => i === 0 )\n    const secondText = crossStateTextS.filter((d, i) => i === 1)\n\n    if (firstText.size() > 0) firstText.text(horizontal ? `${horizontalName}: ${horizontal}` : firstText.text())\n    if (secondText.size() > 0) secondText.text(vertical ? `${verticalName}: ${vertical}` : secondText.text())\n\n    tooltip.onInspectMove(screenData)\n  }\n\n  const onDrawAreaLeave = (active: boolean) => {\n    tooltip.movableCrossTooltipVisible = false\n    renderContent(active)\n  }\n  const onWindowMove = (e) => {\n    const active = renderer.windowS.datum().settings.get('movableCrossActive')\n      && tooltip.movableCrossTooltipVisible && !tooltip.seriesTooltipVisible\n\n    const rect = elementFromSelection(renderer.drawAreaBgS).getBoundingClientRect()\n    if (!(e.clientX < rect.x || e.clientX > rect.x + rect.width ||\n      e.clientY < rect.y || e.clientY > rect.y + rect.height)) {\n      onDrawAreaMove(e, active)\n      return\n    }\n    onDrawAreaLeave(active)\n  }\n\n  renderer.windowS.on('pointermove.LeaveMovableCrossTooltip', onWindowMove)\n}\n","import {Selection} from \"d3\";\nimport {SVGHTMLElementLegacy} from \"../../constants/types\";\nimport {Window} from \"./window\";\nimport {elementFromSelection} from \"../../utilities\";\nimport {renderTooltip} from \"respvis-tooltip\";\n\nexport function renderWindow<D extends Window>(windowS: Selection<SVGHTMLElementLegacy, D>) {\n  const data = windowS.datum()\n  windowS.classed('window-rv', true)\n    .classed(`window-rv-${data.type}`, true)\n  data.breakpoints.updateCSSVars(elementFromSelection(windowS))\n\n  if (data.tooltip.active) {\n    renderTooltip()\n  }\n\n  return windowS\n}\n","import {genKeyObjectFromObject} from \"../../constants\";\n\ntype DownloadStyleType = 'inline' | 'embedded'\ntype ZoomType = 'geometric' | 'semantic' | 'fish-eye' | 'cartesian'\ntype DownloadType = 'svg' | 'jpg' | 'png' //TODO: add support for raster images\n\nexport type WindowSettings = {\n  // ------------------ download\n  // downloadType: DownloadType\n  downloadStyleType: DownloadStyleType\n\n  downloadRemoveClasses: boolean\n  downloadRemoveDataKeys: boolean\n  downloadRemoveDataStyles: boolean\n\n  downloadRemoveBgElements: boolean\n\n  downloadAttributeMaxDecimals: string\n  downloadAttributeMaxDecimalsActive: boolean\n\n  downloadPrettifyActive: boolean\n  downloadPrettifyIndentionSpaces: string\n\n  downloadMarginLeft: string\n  downloadMarginTop: string\n  downloadMarginRight: string\n  downloadMarginBottom: string\n\n  // ------------------ parcoord\n  parcoordEquidistantAxes: boolean\n\n  // zoomXActive: BooleanString\n  // zoomYActive: BooleanString\n  // zoomStateVisible: BooleanString\n  // zoomType: ZoomType\n\n  movableCrossActive: boolean\n  // gridActive: BooleanString\n}\n\nexport const defaultWindowSettings: WindowSettings = {\n  downloadStyleType: 'inline',\n  downloadRemoveClasses: true,\n  downloadRemoveDataKeys: true,\n  downloadRemoveDataStyles: true,\n  downloadRemoveBgElements: true,\n  downloadPrettifyActive: true,\n  downloadPrettifyIndentionSpaces: '2',\n  downloadMarginLeft: '0',\n  downloadMarginBottom: '0',\n  downloadMarginRight: '0',\n  downloadMarginTop: '0',\n\n  movableCrossActive: false,\n  downloadAttributeMaxDecimals: '1',\n  downloadAttributeMaxDecimalsActive: true,\n  parcoordEquidistantAxes: true\n} as const\n\nexport const windowSettingsKeys=\n  genKeyObjectFromObject(defaultWindowSettings)\n\nexport class Revertible<T> {\n  state: T\n  snapshot: Partial<T>\n  constructor(defaultState: T) {\n    this.state = defaultState\n    this.snapshot = {}\n  }\n  setImmediately<K extends keyof T>(key: K, value: T[K]) {\n    this.state[key] = value\n  }\n  setDeferred<K extends keyof T>(key: K, value: T[K]) {\n    this.snapshot[key] = value\n  }\n  get<K extends keyof T>(key: K) { return this.state[key] }\n  update() {\n    for (const key in this.snapshot) {\n      this.state[key] = this.snapshot[key] ?? this.state[key]\n    }\n    this.reset()\n  }\n  reset() {\n    this.snapshot = {}\n  }\n}\n","import {RenderArgs} from \"../chart/renderer\";\nimport {defaultWindowSettings, Revertible, WindowSettings} from \"./window-settings\";\nimport {Tooltip, TooltipUserArgs} from \"respvis-tooltip\";\nimport {ComponentBreakpoints} from \"../../data/breakpoints/component-breakpoints\";\nimport {ComponentBreakpointsUserArgs} from \"../../data/breakpoints/component-breakpoints/component-breakpoints\";\n\nexport type WindowArgs = RenderArgs & {\n  type: string,\n  breakpoints?: ComponentBreakpointsUserArgs\n  tooltip?: TooltipUserArgs\n}\n\nexport type Window = Required<Omit<WindowArgs, 'breakpoints' | 'tooltip'>> & {\n  breakpoints: ComponentBreakpoints,\n  settings: Revertible<WindowSettings>,\n  tooltip: Tooltip\n}\n\nexport function validateWindow(args: WindowArgs): Window {\n  return {...args,\n    breakpoints: new ComponentBreakpoints(args.breakpoints),\n    settings: new Revertible<WindowSettings>({ ...defaultWindowSettings }),\n    tooltip: new Tooltip(args.tooltip)\n  }\n}\n","import {select, Selection} from 'd3';\n\nexport type ReRenderContext = {\n  type: 'resize' | 'standard-interaction' | 'immediate-interaction',\n  throttleMs: number\n}\n\nexport function resizeEventListener(observeS: Selection<Element>, dispatchS?: Selection<Element>) {\n  const resizeEventDispatcher = new ResizeObserver((entries) => {\n    for (let i = 0; i < entries.length; i++) {\n      const finalDispatchS = dispatchS ? dispatchS : select(entries[i].target)\n      finalDispatchS.dispatch('resize', {\n        detail: { bounds: entries[i].target.getBoundingClientRect(), type: 'resize' }})\n      if (dispatchS) return;\n    }\n  });\n  observeS.each((d, i, g) => {\n    resizeEventDispatcher.observe(g[i])\n  });\n  return resizeEventDispatcher\n}\n","import {Selection} from 'd3';\nimport {ChartData} from \"./validate-chart\";\nimport {renderBgSVGOnlyByRect} from \"../../element/bg-svg-only\";\nimport {rectFromString} from \"../../../utilities/geometry/shapes/rect/rect\";\nimport {AxisOrientation, isCSSBreakpointLengthValue, SVGGroupingElement} from \"../../../constants/types\";\nimport {uniqueId} from \"../../../utilities/unique\";\nimport {cssLengthInPx} from \"../../../utilities/dom/units\";\nimport {getCurrentResponsiveValue} from \"../../../data\";\nimport {createSelectionClasses, elementFromSelection} from \"../../../utilities\";\nimport {wrapTextByTwinWidth} from \"../../../utilities/d3/text\";\n\ntype ChartBaseSelection<T extends SVGGroupingElement, D extends ChartData> = Selection<T, D>;\n\nexport function renderChart<D extends ChartData>(parentS: Selection, data: D, ...classes: string[]) {\n  const {classString, selector} = createSelectionClasses(classes)\n  const chartS = parentS\n    .selectAll<SVGSVGElement, D>(`svg.chart${selector}.layout-container`)\n    .data([data])\n    .join('svg')\n    .classed(`chart ${classString} layout-container`, true)\n    .attr('xmlns', 'http://www.w3.org/2000/svg')\n\n  chartS.datum().breakpoints.updateCSSVars(elementFromSelection(chartS))\n\n  const paddingWrapperS = renderPaddingWrapper(chartS)\n  const {drawArea, ...restDrawArea} = renderDrawArea(paddingWrapperS)\n\n  const header = renderHeader(chartS)\n  const title = renderTitle(header, chartS)\n  const subTitle = renderSubtitle(header, chartS)\n\n  return {chartS, paddingWrapperS, header, title, subTitle, drawArea, ...restDrawArea}\n}\n\nfunction renderPaddingWrapper<T extends SVGGroupingElement, D extends ChartData>(chartS: ChartBaseSelection<T, D>) {\n  return chartS\n    .selectAll<SVGSVGElement, D>('.padding-wrapper')\n    .data([chartS.datum()])\n    .join('g')\n    .classed('padding-wrapper', true)\n}\n\nfunction renderDrawArea<T extends SVGGroupingElement, D extends ChartData>(paddingS: ChartBaseSelection<T, D>) {\n  const drawArea = paddingS\n    .selectAll<SVGSVGElement, T>('.draw-area')\n    .data([paddingS.datum()])\n    .join('g')\n    .classed('draw-area', true)\n    .attr('data-ignore-layout-children', true)\n\n  const boundsAttr = rectFromString(drawArea.attr('bounds') || '0, 0, 0, 0');\n  const background = renderBgSVGOnlyByRect(drawArea, {...boundsAttr, x: 0, y: 0})\n    .classed('background', true)\n\n  const gridArea = drawArea.selectAll('.grid-area')\n    .data([null])\n    .join('g')\n    .classed('grid-area', true)\n\n  const orientations = ['left', 'top', 'right', 'bottom'] as const\n  const containerSArr = orientations.map(orientation => renderPaddingContainers(paddingS, orientation))\n  const [paddingContainerBottomS, paddingContainerTopS, paddingContainerRightS, paddingContainerLeftS] = containerSArr\n  const [paddingLeft, paddingTop, paddingRight, paddingBottom] = containerSArr.map((sel, index) => {\n    const element = elementFromSelection(sel)\n    const orientation = orientations[index]\n    // const dim = (orientation === 'top' || orientation === 'bottom') ? 'height' : 'width' //maybe in future\n    const val = getComputedStyle(element).getPropertyValue(`--chart-padding-${orientation}`)\n    if (isCSSBreakpointLengthValue(val)) return cssLengthInPx(val, element)\n    return 0\n  })\n\n  const drawAreaClipPath = drawArea.selectAll<SVGClipPathElement, null>('.draw-area__clip')\n    .data([null])\n    .join('clipPath')\n    .classed('draw-area__clip', true)\n\n  if (!drawAreaClipPath.attr('id')) drawAreaClipPath.attr('id', uniqueId())\n  const clipPathRect = {\n    x: -paddingLeft, y: -paddingTop,\n    width: boundsAttr.width + paddingLeft + paddingRight,\n    height: boundsAttr.height + paddingTop + paddingBottom\n  }\n  renderBgSVGOnlyByRect(drawAreaClipPath, clipPathRect)\n  drawArea.attr('clip-path', `url(#${drawAreaClipPath.attr('id')})`)\n\n  return {\n    drawArea, background, gridArea, drawAreaClipPath,\n    paddingContainerBottomS, paddingContainerTopS, paddingContainerRightS, paddingContainerLeftS\n  }\n}\n\nfunction renderPaddingContainers<T extends SVGGroupingElement, D extends ChartData>\n(paddingS: Selection<T, D>, orientation: AxisOrientation) {\n  return paddingS\n    .selectAll<SVGGElement, D>(`.padding-container--${orientation}`)\n    .data([null])\n    .join('g')\n    .classed(`padding-container--${orientation}`, true)\n}\n\nfunction renderHeader(selection: Selection<SVGGroupingElement, ChartData>) {\n  return selection\n    .selectAll<SVGSVGElement, ChartData>('.header')\n    .data((d) => [d])\n    .join('g')\n    .classed('header', true);\n}\n\nfunction renderTitle<T extends SVGGroupingElement, D extends ChartData>\n(header: Selection<any, D>, chart: Selection<T, D>) {\n  return header\n    .selectAll('.title')\n    .data((d) => [getCurrentResponsiveValue(d.title, {chart})])\n    .join('g')\n    .classed('title', true)\n    .selectAll<SVGTextElement, any>('text')\n    .data((d) => [d])\n    .join('text')\n    .text((d) => d)\n    .call(s => wrapTextByTwinWidth(s))\n}\n\nfunction renderSubtitle<T extends SVGGroupingElement, D extends ChartData>\n(header: ChartBaseSelection<any, D>, chart: ChartBaseSelection<T, D>) {\n  return header\n    .selectAll('.subtitle')\n    .data((d) => [getCurrentResponsiveValue(d.subTitle, {chart})])\n    .join('g')\n    .classed('subtitle', true)\n    .selectAll('text')\n    .data((d) => [d])\n    .join('text')\n    .text((d) => d);\n}\n","import {select, Selection} from 'd3';\nimport {positionToTransformAttr} from '../../utilities/geometry/position/position';\nimport {rectEquals, rectFromString, rectToAttrs, rectToString,} from '../../utilities/geometry/shapes/rect/rect';\nimport {circleInsideRect, circleToAttrs} from '../../utilities/geometry/shapes/circle';\nimport {cssVars} from \"../../constants/cssVars\";\nimport {ellipseInsideRect, ellipseToAttrs} from \"../../utilities/geometry/shapes/ellipse\";\nimport {SVGTwinInformation} from \"./layouter-compute\";\nimport {positionSVGTextToLayoutCenter} from \"../../utilities\";\nimport {elementAbsoluteBounds, elementRelativeBounds} from \"../../utilities/dom/element/element-bounds\";\n\nexport function layoutNodeStyleAttr(selection: Selection<HTMLDivElement, SVGTwinInformation>): void {\n  selection.each((d, i, g) => {\n    const propTrue = (p: string) => p.trim() === 'true';\n    const computedStyleHTMLElement = window.getComputedStyle(g[i]);\n    const fitWidth = propTrue(computedStyleHTMLElement.getPropertyValue('--fit-width'));\n    const fitHeight = propTrue(computedStyleHTMLElement.getPropertyValue('--fit-height'));\n\n    if (fitWidth || fitHeight) {\n      const bbox = d.element.getBoundingClientRect();\n      if (fitWidth) g[i].style.setProperty('width', `${bbox.width}px`)\n      if (fitHeight) g[i].style.setProperty('height', `${bbox.height}px`)\n    }\n\n    for (let varIndex = 0, len = cssVars.length; varIndex < len; varIndex++) {\n      const prop = d.element.style.getPropertyValue(cssVars[varIndex])\n      if (prop !== undefined) g[i].style.setProperty(cssVars[varIndex], prop)\n    }\n  });\n}\n\nexport function layoutNodeClassAttr(selection: Selection<HTMLDivElement, SVGTwinInformation>): void {\n  selection.each((d, i, g) => {\n    select(g[i]).attr('class', d.element.getAttribute('class'))\n      .each((_, i, g) => select(g[i]).classed(d.element.tagName, true))\n      .classed('layout', true);\n  })\n  // Alternatively preserve classes method:\n  // selection\n  //   .each((d, i, g) => {\n  //     const classList = d.element.getAttribute('class')?.split(/\\s+/) ?? []\n  //     g[i].classList.add(...classList)\n  //     select(g[i]).classed(d.element.tagName, true)\n  //   })\n  //   .classed('layout', true);\n}\n\nexport function layoutNodeDataAttrs(selection: Selection<HTMLDivElement, SVGTwinInformation>): void {\n  selection.each((svgTwin, i, g) => {\n    const layoutE = g[i];\n    const svgE = svgTwin.element\n\n    const dataAttrsToObj = (attrs: NamedNodeMap) =>\n      Array.from(attrs)\n        .filter((a) => a.name.startsWith('data-'))\n        .reduce((obj, a) => Object.assign(obj, {[`${a.name}`]: a.value}), {});\n\n    const layoutAttrs = dataAttrsToObj(layoutE.attributes);\n    const svgAttrs = dataAttrsToObj(svgE.attributes);\n\n    // remove layoutE data attrs that don't exist on svgE\n    Object.keys(layoutAttrs)\n      .filter((attr) => svgAttrs[attr] !== undefined)\n      .forEach((attr) => layoutE.removeAttribute(attr));\n\n    // set svgE data attrs on layoutE\n    Object.keys(svgAttrs).forEach((attr) => layoutE.setAttribute(attr, svgAttrs[attr]));\n  });\n}\n\nexport function layoutNodeBounds(selection: Selection<HTMLDivElement, SVGTwinInformation>): boolean {\n  let anyChanged = false;\n  selection.each(function (svgTwin) {\n    const svgE = svgTwin.element\n    const svgS = select(svgE);\n    if (this.classList.contains('layout-container-positioner')) return\n    const prevBounds = rectFromString(svgS.attr('bounds') || '0, 0, 0, 0');\n    const bounds = elementRelativeBounds(this);\n    const changed = !rectEquals(prevBounds, bounds, 1);\n\n    // if (svgE.classList.contains('axis-y')) {\n    //   const epsilon = 1\n    //   const xAbs = Math.abs(bounds.x - prevBounds.x)\n    //   const yAbs = Math.abs(bounds.y - prevBounds.y)\n    //   const heightAbs = Math.abs(bounds.height - prevBounds.height)\n    //   const widthAbs = Math.abs(bounds.width - prevBounds.width)\n    //   if (xAbs > epsilon)  {\n    //     console.log(svgE.classList, xAbs, 'X')\n    //   }\n    //   if (yAbs > epsilon)  {\n    //     console.log(svgE.classList, yAbs, 'Y')\n    //   }\n    //   if (widthAbs > epsilon)  {\n    //     console.log(svgE.classList, widthAbs, 'WIDTH')\n    //   }\n    //   if (heightAbs > epsilon)  {\n    //     console.log(svgE.classList, heightAbs, 'Height')\n    //   }\n    // }\n\n    anyChanged = anyChanged || changed;\n\n\n    const svgParentE = svgE.parentElement as unknown\n    if (this.classList.contains('layout-container-positioner') && svgParentE instanceof SVGElement) {\n      //TODO: maybe use css variables for this\n      const parentBounds = elementAbsoluteBounds(svgParentE as SVGGraphicsElement)\n      select(this).style('top', parentBounds.y + 'px')\n      select(this).style('left', parentBounds.x + 'px')\n      return anyChanged\n    }\n\n    if (changed) {\n      svgS.attr('bounds', rectToString(bounds));\n      switch (svgE.tagName) {\n        case 'svg':\n        case 'rect':\n          svgS.call((s) => rectToAttrs(s, bounds));\n          break;\n        case 'circle':\n          svgS.call((s) => circleToAttrs(s, circleInsideRect(bounds)));\n          break;\n        case 'ellipse':\n          svgS.call((s) => ellipseToAttrs(s, ellipseInsideRect(bounds)));\n          break;\n        case 'text':\n          positionSVGTextToLayoutCenter(svgS as Selection<SVGTextElement>, bounds)\n          break;\n        default:\n          svgS.call((s) => positionToTransformAttr(s, bounds));\n      }\n    }\n  });\n  return anyChanged;\n}\n","import {select, selectAll, Selection} from \"d3\";\nimport {SVGTwinInformation} from \"./layouter-compute\";\n\nexport function layoutNodeChildren(\n  selection: Selection<HTMLDivElement, SVGTwinInformation>\n): Selection<HTMLDivElement, SVGTwinInformation> {\n  const childS = selection\n    .selectChildren<HTMLDivElement, SVGTwinInformation>('.layout')\n    .data((d) => layedOutChildren(d))\n    .join(enter => {\n      const div = enter.append('div')\n      div.each(function (d, i, g) {\n        if (!d.element.classList.contains('layout-container')) return\n        select(g[i])\n          .classed('layout layout-container-positioner', true)\n          .style('position', 'fixed')\n      })\n      return div\n    })\n    .each(function (d, i, g) {\n      if (!select(g[i]).classed('layout layout-container-positioner')) return\n      select(g[i]).selectChildren('.layout.layout-container')\n        .data([d])\n        .join('div')\n        .classed('layout layout-container', true)\n    })\n\n  const filteredChildS = childS.filter(':not(.layout-container-positioner)')\n  const filteredChildPositionerS = childS.filter('.layout-container-positioner').selectChildren<HTMLDivElement, SVGTwinInformation>('*')\n\n  return selectAll<HTMLDivElement, SVGTwinInformation>([...filteredChildS.nodes(), ...filteredChildPositionerS.nodes()])\n}\n\nexport function layedOutChildren(parent: SVGTwinInformation): SVGTwinInformation[] {\n  let parentIgnoresChildrenAttr = false\n  const parentSFiltered = select(parent.element).filter((d, i, g) => {\n    parentIgnoresChildrenAttr = !!select(g[i]).attr('data-ignore-layout-children')\n\n    const hasNoLayoutContainerDescandant = select(g[i]).selectAll('.layout-container').empty()\n    return !(parentIgnoresChildrenAttr && hasNoLayoutContainerDescandant)\n  })\n\n  let information: SVGTwinInformation[] = []\n  parentSFiltered.selectChildren<SVGElement, unknown>(':not(.layout)')\n    .each(function (d, i, g) {\n      const isLayoutContainer = select(g[i]).classed('layout-container')\n      const ignoreSelfAttr = select(g[i]).attr('data-ignore-layout')\n      const hasNoLayoutContainerDescendant = select(g[i]).selectAll('.layout-container').empty()\n\n      const ignoreBoundsBecauseOfParent = parentIgnoresChildrenAttr && !isLayoutContainer\n      const ignoreBoundsBecauseOfSelf = ignoreSelfAttr && !isLayoutContainer\n      const ignoreBoundsBecauseInBetween = parent.ignoredByAncestor && !isLayoutContainer\n      const ignoreBounds = ignoreBoundsBecauseOfParent || ignoreBoundsBecauseOfSelf || ignoreBoundsBecauseInBetween\n      if (ignoreBounds && hasNoLayoutContainerDescendant) return\n\n      information.push({\n        element: this,\n        ignoredByAncestor: (parentIgnoresChildrenAttr || ignoreSelfAttr) ? true :\n          parent.ignoredByAncestor && !isLayoutContainer,\n        ignoreBounds\n      })\n    })\n  return information\n}\n","import {select, Selection} from \"d3\";\nimport {rectFromString, rectToString} from \"../../data\";\nimport {layoutNodeBounds, layoutNodeClassAttr, layoutNodeDataAttrs, layoutNodeStyleAttr} from \"./layout-elements\";\nimport {layoutNodeChildren} from \"./layout-node-children\";\nimport {createSelectionClasses} from \"../../utilities\";\n\nexport function renderLayouter(parentS: Selection, ...classes: string[]) {\n  const {classString, selector} = createSelectionClasses(classes)\n  return parentS.selectAll<HTMLDivElement, any>(`${selector}.layouter`)\n    .data([null])\n    .join('div')\n    .classed(`${classString} layouter`, true)\n}\n\nexport type SVGTwinInformation = {\n  element: SVGElement\n  ignoredByAncestor: boolean\n  ignoreBounds: boolean\n}\n\nexport function layouterCompute(layouterS: Selection<HTMLDivElement>) {\n  if (!(layouterS.node() as Element).isConnected) return\n\n  const layouterChildDivS = layoutLayouter(layouterS.node()!)\n  return layoutContainerCompute(layouterChildDivS, layouterS)\n}\n\nfunction layoutLayouter(layouter: HTMLDivElement): Selection<HTMLDivElement, SVGTwinInformation> {\n  return select(layouter)\n    .selectChildren<HTMLDivElement, SVGTwinInformation>('.layout.layout-container')\n    .data([{\n      element: select(layouter).selectChildren('svg').node()! as SVGElement,\n      ignoredByAncestor: false,\n      ignoreBounds: false\n    }])\n    .join('div')\n  // .classed('layout layout-container', true)\n}\n\nexport function layoutContainerCompute(layoutContainerS: Selection<HTMLDivElement, SVGTwinInformation>,\n                                       layouterS: Selection<HTMLDivElement>) {\n  if (!(layoutContainerS.node() as Element).isConnected) return false\n  let anyBoundsChanged = false\n\n  layoutContainerS.each(function () {\n    const layoutRootS = select<HTMLDivElement, SVGTwinInformation>(this)\n\n    let layoutS: Selection<HTMLDivElement, SVGTwinInformation> = layoutRootS\n    while (!layoutS.empty()) {\n      layoutNodeClassAttr(layoutS);\n      layoutNodeStyleAttr(layoutS);\n      layoutNodeDataAttrs(layoutS);\n      layoutS = layoutNodeChildren(layoutS);\n    }\n\n    layouterS.selectAll<HTMLDivElement, SVGElement>('.layout').each(function () {\n      const layoutS = select<HTMLDivElement, SVGTwinInformation>(this);\n      if (layoutS.datum().ignoreBounds) return\n\n      //TODO: synchronization phase! has also detection of bounds in it\n      const boundsChanged = layoutNodeBounds(layoutS);\n      anyBoundsChanged = anyBoundsChanged || boundsChanged;\n    });\n\n    if (anyBoundsChanged) {\n      const bounds = rectFromString(select(layoutRootS.datum().element).attr('bounds')!);\n      layoutRootS\n        .style('left', bounds.x)\n        .style('top', bounds.y)\n        .attr('x', null)\n        .attr('y', null)\n        .attr('width', null)\n        .attr('height', null)\n        .attr('viewBox', rectToString({...bounds, x: 0, y: 0}));\n      anyBoundsChanged = true\n    }\n  })\n\n  if (anyBoundsChanged) {\n    layoutContainerS.dispatch('boundschange')\n  }\n  return anyBoundsChanged\n}\n","import {dispatch, Selection} from \"d3\";\nimport {renderWindow, Window} from \"../../window\";\nimport {ChartData} from \"./validate-chart\";\nimport {Renderer} from \"../renderer\";\nimport {ReRenderContext, resizeEventListener} from \"./resize-event-dispatcher\";\nimport {renderChart} from \"./render-chart\";\nimport {attachActiveCursorLocking, ThrottleScheduled} from \"../../../utilities\";\nimport {layouterCompute, renderLayouter} from \"../../layouter\";\nimport {Legend} from \"../../legend\";\n\nexport type ChartWindowed = Window & ChartData\n\nexport abstract class Chart implements Renderer {\n  private addedListeners = false\n  protected initialRenderHappened = false\n  public readonly filterDispatch = dispatch<{ dataKey: string }>('filter')\n  protected subsequentRenderCount = 0\n  protected rerenderAfterResizeScheduled?: NodeJS.Timeout\n  protected resizeObserver?: ResizeObserver\n  private immediateInteractionThrottle?: ThrottleScheduled<any, any>\n  private standardInteractionThrottle?: ThrottleScheduled<any, any>\n  private unmounted: boolean = false;\n\n  abstract _windowS: Selection<HTMLElement, ChartWindowed>\n  get windowS(): Selection<HTMLElement, ChartWindowed> {\n    return (this._windowS && !this._windowS.empty()) ? this._windowS :\n      this.windowS.selectAll<HTMLElement, ChartWindowed>('.window-rv')\n  }\n\n  _layouterS?: Selection<HTMLDivElement>\n  get layouterS(): Selection<HTMLDivElement> {\n    return (this._layouterS && !this._layouterS.empty()) ? this._layouterS :\n      this.windowS.selectAll<HTMLDivElement, any>('.layouter')\n  }\n\n  _chartS?: Selection<SVGSVGElement, ChartWindowed>\n  get chartS(): Selection<SVGSVGElement, ChartWindowed> {\n    return (this._chartS && !this._chartS.empty()) ? this._chartS :\n      this.layouterS.selectAll<SVGSVGElement, ChartWindowed>('svg.chart')\n  }\n\n  _legendS?: Selection<SVGGElement, Legend>\n  get legendS(): Selection<SVGGElement, Legend> {\n    return (this._legendS && !this._legendS.empty()) ? this._legendS :\n      this.chartS.selectAll<SVGGElement, Legend>('.legend')\n  }\n\n  _paddingWrapperS?: Selection<SVGGElement, ChartWindowed>\n  get paddingWrapperS(): Selection<SVGGElement, ChartWindowed> {\n    return (this._paddingWrapperS && !this._paddingWrapperS.empty()) ? this._paddingWrapperS :\n      this.chartS.selectAll<SVGGElement, ChartWindowed>('.padding-wrapper')\n  }\n\n  _drawAreaS?: Selection<SVGGElement>\n  get drawAreaS(): Selection<SVGGElement> {\n    return (this._drawAreaS && !this._drawAreaS.empty()) ? this._drawAreaS :\n      this.chartS.selectAll<SVGGElement, any>('.draw-area')\n  }\n\n  _drawAreaBgS?: Selection<SVGRectElement>\n  get drawAreaBgS(): Selection<SVGRectElement> {\n    return (this._drawAreaBgS && !this._drawAreaBgS.empty()) ? this._drawAreaBgS :\n      this.drawAreaS.selectChildren<SVGRectElement, any>('.background')\n  }\n\n  _drawAreaClipPathS?: Selection<SVGClipPathElement>\n  get drawAreaClipPathS(): Selection<SVGClipPathElement> {\n    return (this._drawAreaClipPathS && !this._drawAreaClipPathS.empty()) ? this._drawAreaClipPathS :\n      this.drawAreaS.selectChildren<SVGClipPathElement, any>('.draw-area__clip')\n  }\n\n  exitEnterActive() {\n    return this.windowS.selectAll('.entering, .exiting').size() > 0\n  }\n\n  buildChart() {\n    this.render()\n    layouterCompute(this.layouterS)\n    if (this.addedListeners) return\n    const chartDivS = this.layouterS.selectChild('div.chart')\n    if (chartDivS) this.resizeObserver = resizeEventListener(\n      chartDivS as Selection<Element>, this.windowS)\n    this.addedListeners = true\n    this.render()\n    layouterCompute(this.layouterS)\n  }\n\n  /**\n   * Adds custom event listener. Be sure to add custom event listeners before calling {@link Chart.buildChart}\n   * as the method also adds listeners and the order matters.\n   */\n  addCustomListener<T extends ChartWindowed>(name: string, callback: (event: Event, data: T) => void) {\n    this.windowS.on(name, callback)\n  }\n\n  private addFinalListeners() {\n    const onResize = () => {\n      this.subsequentRenderCount = 0\n      this.onResizeRender()\n    }\n    const onStandardInteraction = () => {\n      if (this.windowS.selectAll('.mid-d3-transit').size() > 0) return\n      this.subsequentRenderCount = 0\n      this.onStandardInteractionRender()\n    }\n    const onImmediateInteraction = () => {\n      this.subsequentRenderCount = 0\n      this.onImmediateInteractionRender()\n    }\n    if (!this.immediateInteractionThrottle) {\n      //optimal values: //chrome zooming 55 //firefox zooming 30\n      this.immediateInteractionThrottle = new ThrottleScheduled<any, any>(onImmediateInteraction, 30)\n    }\n    if (!this.standardInteractionThrottle) {\n      this.standardInteractionThrottle = new ThrottleScheduled(() =>\n        this.windowS.dispatch('resize', {detail: {type: 'standard-interaction'}}), 50)\n    }\n\n    this.windowS.on('pointermove.final pointerleave.final pointerdown.final pointerup.final',\n      () => this.standardInteractionThrottle?.invokeScheduled())\n\n    this.windowS.on('resize.final', (context: { detail?: ReRenderContext }) => {\n      clearTimeout(this.rerenderAfterResizeScheduled)\n      switch (context.detail?.type) {\n        case 'resize': onResize(); break;\n        case 'standard-interaction': {\n          onStandardInteraction()\n          break;\n        }\n        case 'immediate-interaction': default: {\n          this.immediateInteractionThrottle?.invokeScheduled()\n          break;\n        }\n      }\n    })\n  }\n\n  private inRenderLoop() {\n    if (this.subsequentRenderCount > 3) {\n      /* DEV_MODE_ONLY_START */\n      console.log('TOO MANY RENDERS. THERE MUST BE A PROBLEM')\n      /* DEV_MODE_ONLY_END */\n      return true\n    }\n    this.subsequentRenderCount++\n    return false\n  }\n\n  private onResizeRender() {\n    if (this.inRenderLoop()) return\n    this.render()\n    if (!this.layouterS) return\n    if (!layouterCompute(this.layouterS)) return\n    this.rerenderAfterResizeScheduled = setTimeout(() => {\n      this.onResizeRender()\n    }, 20)\n  }\n\n  private onStandardInteractionRender() {\n    if (this.inRenderLoop()) return\n    if (!this.layouterS) return\n    if (!layouterCompute(this.layouterS)) return //layoutercompute should return any style change?\n    this.subsequentRenderCount++\n    this.render()\n  }\n\n  private onImmediateInteractionRender() {\n    if (this.inRenderLoop()) return\n    this.render()\n    if (!this.layouterS) return\n    if (!layouterCompute(this.layouterS)) return //layoutercompute should return any style change?\n    this.subsequentRenderCount++\n    this.render()\n    this.onResizeRender()\n  }\n\n  public render() {\n    if (!(this.windowS.node() as Element).isConnected || this.unmounted) return\n    this.renderChart()\n    this.renderContent()\n    this.addFinalListeners()\n    this.initialRenderHappened = true\n  }\n\n  private renderChart() {\n    const data = this.windowS.datum()\n    renderWindow(this.windowS)\n    renderLayouter(this.windowS)\n    renderChart(this.layouterS, data, `chart-${data.type}`)\n\n    attachActiveCursorLocking(this.chartS)\n  }\n\n  protected abstract renderContent(): void\n\n  public abstract revalidate(args: any): void\n\n  unmountChart() {\n    this.unmounted = true\n    this.windowS.remove()\n    // delete this\n  }\n}\n","import {RenderArgs} from \"../renderer\";\nimport {WindowArgs} from \"../../window\";\nimport {ComponentBreakpoints} from \"../../../data/breakpoints/component-breakpoints\";\nimport {ComponentBreakpointsUserArgs} from \"../../../data/breakpoints/component-breakpoints/component-breakpoints\";\nimport {ResponsiveValueOptional, ResponsiveValueUserArgs, validateResponsiveValue} from \"../../../data\";\n\nexport type ChartDataUserArgs = Pick<WindowArgs, 'tooltip'> & {\n  breakpoints?: ComponentBreakpointsUserArgs\n  title?: ResponsiveValueUserArgs<string>\n  subTitle?: ResponsiveValueUserArgs<string>\n}\n\nexport type ChartDataArgs = ChartDataUserArgs & RenderArgs\n\nexport type ChartData = Required<Omit<ChartDataArgs, 'breakpoints' | 'tooltip' | 'title' | 'subTitle'>> & {\n  breakpoints: ComponentBreakpoints,\n  title: ResponsiveValueOptional<string>\n  subTitle: ResponsiveValueOptional<string>\n}\n\nexport function validateChart(args: ChartDataArgs): ChartData {\n  return {\n    renderer: args.renderer,\n    breakpoints: new ComponentBreakpoints(args.breakpoints),\n    title: validateResponsiveValue(args.title || ''),\n    subTitle: validateResponsiveValue(args.subTitle || ''),\n  }\n}\n","import {LegendSelection} from \"./render-legend\";\nimport {select, Selection} from \"d3\";\nimport {ErrorMessages} from \"../../constants/error\";\nimport {splitKey} from \"../../utilities/key\";\nimport {LegendItem} from \"./legend-item\";\n\nexport function addLegendHoverHighlighting(legendS: LegendSelection) {\n  const legend = legendS.datum()\n  const chartS = legend.renderer.chartS\n  if (!chartS) throw new Error(ErrorMessages.elementNotExisting)\n  const drawAreaS = chartS.selectAll('.draw-area')\n  return legendS.on('pointerover.chartpointhighlight pointerout.chartpointhighlight', (e) => {\n    highlightElements(\n      drawAreaS,\n      select(e.target.closest('.legend-item')),\n      e.type.endsWith('over')\n    );\n  });\n}\n\nfunction highlightElements(\n  chartS: Selection,\n  legendItemS: Selection<Element, LegendItem>,\n  hover: boolean\n): void {\n  legendItemS.each((_, i, g) => {\n    const key = g[i].getAttribute('data-key')!\n    const tokens = splitKey(key)\n    tokens.reduce((sel, token, index) => {\n      if (index === 0) return sel.selectAll(`.element[data-key~=\"${token}\"]`)\n      return sel.filter(`.element[data-key~=\"${token}\"]`)\n    }, chartS).classed('highlight', hover)\n  });\n}\n","import {Legend} from \"../validate-legend\";\nimport {mergeKeys} from \"../../../utilities/key\";\nimport {LegendItem} from \"./legend-item\";\n\nexport function createLegendItems(legend: Legend): LegendItem[] {\n  const { series, symbols, reverse} = legend;\n  const {categories} = series.originalData\n  if (!categories) return []\n\n  const items = categories.categories.categoryArray.map((c, i) => {\n    return {\n      label: c.formatValue,\n      styleClass: c.styleClass,\n      symbol: Array.isArray(symbols) ? symbols[i] : symbols,\n      key: mergeKeys([categories.parentKey, c.key]),\n    };\n  });\n  return reverse ? items.reverse() : items\n}\n","import {LegendItem} from \"./legend-item\";\nimport {select} from \"d3\";\nimport {rectFromString} from \"../../../utilities/geometry/shapes/rect/rect\";\nimport {LegendSelection} from \"../render-legend\";\nimport {SVGHTMLElementLegacy} from \"../../../constants/types\";\nimport {Legend} from \"../validate-legend\";\nimport {renderBgSVGOnlyBBox} from \"../../element/bg-svg-only\";\nimport {Size} from \"../../../utilities/geometry/shapes/rect/size\";\nimport {createLegendItems} from \"./create-legend-items\";\nimport {getCurrentResponsiveValue} from \"../../../data\";\n\nexport function renderLegendCategories(legendS: LegendSelection) {\n\n  const legendCategoriesS = legendS.selectAll<SVGHTMLElementLegacy, Legend>('.legend__categories')\n    .data([legendS.datum()])\n    .join('g')\n    .classed('legend__categories', true)\n\n  renderTitle(legendCategoriesS)\n\n  const itemS = legendCategoriesS.selectAll<SVGHTMLElementLegacy, Legend>('.items')\n    .data([null])\n    .join('g')\n    .classed('items', true)\n\n\n  itemS\n    .selectAll<SVGGElement, LegendItem>('.legend-item')\n    .data(createLegendItems(legendS.datum()), (d) => d.label)\n    .join(\n      (enter) =>\n        enter\n          .append('g')\n          .classed('legend-item', true)\n          .call((itemS) => itemS.append('path').classed('symbol', true))\n          .call((itemS) => itemS.append('text').classed('label', true)),\n      undefined,\n    )\n    .each((itemD, i, g) => {\n      const itemS = select(g[i]);\n      itemS.selectAll('.label').text(itemD.label);\n      itemS.selectAll<SVGPathElement, any>('.symbol').call((symbolS) => {\n        const boundsAttr = symbolS.attr('bounds');\n        if (!boundsAttr) return;\n        //TODO: this is only a temporary fix as layouter does also apply translation which\n        // would make it double\n        itemD.symbol(symbolS.node()!, {...rectFromString(boundsAttr), x: 0, y: 0} as Size);\n      });\n      renderBgSVGOnlyBBox(itemS)\n    })\n    .attr('data-style', (d) => d.styleClass)\n    .attr('data-key', (d) => d.key)\n    .classed('filter-out', (d) => legendS.datum().series.originalData.categories?.isKeyActiveByKey(d.key) === false)\n    .on('click.filter', function (e, d) {\n      if (legendS.datum().renderer.exitEnterActive()) return\n      legendS.datum().renderer.filterDispatch\n        .call('filter', { dataKey: d.key }, this)\n    })\n    .on('pointerover.legend-item pointerout.legend-item', (e: PointerEvent) => {\n      const item = (<Element>e.currentTarget)\n      if (item) item.classList.toggle('highlight', e.type.endsWith('over'))\n    })\n}\n\nfunction renderTitle(legendS: LegendSelection) {\n  const {renderer, title} = legendS.datum()\n  //TODO: add self to mapping when legend has breakpoints\n  const text = getCurrentResponsiveValue(title, {chart: renderer.chartS})\n  legendS\n    .selectChildren('.title')\n    .data([text])\n    .join('text')\n    .classed('title', true)\n    .classed('empty', d => !d)\n    .text(d => d)\n}\n","import {range, select, Selection} from \"d3\";\nimport {SVGHTMLElement, SVGHTMLElementLegacy} from \"../../constants/types\";\nimport {Legend} from \"./validate-legend\";\nimport {renderLegendCategories} from \"./legend-item/render-legend-categories\";\nimport {uniqueId} from \"../../utilities\";\nimport {Axis, renderAxisLayout} from \"../axis\";\nimport {rectFromString} from \"../../data\";\n\nexport type LegendSelection = Selection<SVGHTMLElement, Legend>\n\nexport function renderLegend(parentS: Selection, legend: Legend): LegendSelection {\n  const legendS = parentS\n    .selectAll<SVGGElement, Legend>('.legend')\n    .data([legend])\n    .join('g')\n    .classed('legend', true)\n    .each((legendD, i, g) => {\n      const legendS = select<SVGHTMLElementLegacy, Legend>(g[i])\n      renderLegendCategories(legendS)\n      renderLegendColorScale(legendS)\n    })\n\n  return legendS\n}\n\nfunction renderLegendColorScale(legendS: LegendSelection) {\n  const {series, renderer} = legendS.datum()\n  const {color} = series.originalData\n  if (!color) return\n\n  const defsS = renderer.chartS.selectAll('defs')\n    .data([null])\n    .join('defs')\n\n  const colorScaleGradientS = defsS.selectAll('.color-scale-gradient')\n    .data([color])\n    .join('linearGradient')\n    .classed('color-scale-gradient', true)\n  if (!colorScaleGradientS.attr('id')) colorScaleGradientS.attr('id', `color-scale-gradient-${uniqueId()}`)\n\n  const [domainMin, domainMax] = [Math.min(...color.scale.domain()), Math.max(...color.scale.domain())]\n  const domainDiff = domainMax - domainMin\n\n  // Set the color stops for the gradient\n  if (colorScaleGradientS.selectAll(\"stop\").empty()) {\n    colorScaleGradientS.selectAll(\"stop\")\n      .data(range(0, 1.05, 0.05))\n      .join(\"stop\")\n      .attr(\"offset\", d => d)\n      .attr(\"stop-color\", d => color?.scale(domainMin + d * domainDiff) ?? null);\n  }\n\n  // Draw the gradient rectangle\n  const legendColorScaleS = legendS.selectAll(\".legend__color-scale\")\n    .data([null])\n    .join('g')\n    .classed('legend__color-scale', true)\n\n  const legendColorScaleRectS = legendColorScaleS.selectAll('rect')\n    .data([null]).join('rect')\n    .style(\"fill\", `url(#${colorScaleGradientS.attr('id')})`)\n\n  const {width, height} = rectFromString(legendColorScaleS.attr('bounds') || '0, 0, 600, 400')\n  color.axis.scaledValues.scale.range([0, width])\n  const legendColorScaleAxisS = legendColorScaleS.selectAll<SVGGElement, Axis>('.axis')\n    .data([color.axis])\n    .join('g')\n    .call((s) => renderAxisLayout(s, 'horizontal'))\n    .classed('axis', true)\n}\n","import {rectFromSize, rectToPath} from \"../../utilities/geometry/shapes/rect/rect\";\nimport {Size} from \"../../utilities/geometry/shapes/rect/size\";\nimport {RenderArgs} from \"../chart/renderer\";\nimport {DataSeries} from \"../data-series\";\nimport {ResponsiveValueOptional, ResponsiveValueUserArgs, validateResponsiveValue} from \"../../data\";\n\nexport type LegendUserArgs = {\n  title?: ResponsiveValueUserArgs<string>\n  symbols?:\n    | ((symbol: SVGPathElement, size: Size) => void)\n    | ((symbol: SVGPathElement, size: Size) => void)[]\n  reverse?: boolean\n}\n\nexport type LegendArgs = LegendUserArgs & RenderArgs & {\n  series: DataSeries\n}\n\nexport type Legend = Required<Omit<LegendArgs, 'title'>> & {\n  title: ResponsiveValueOptional<string>\n  reverse: boolean\n}\n\nexport function validateLegend(data: LegendArgs): Legend {\n  const {renderer, series} = data\n  return {\n    renderer, series,\n    title: validateResponsiveValue(data.title || ''),\n    reverse: data.reverse ?? false,\n    symbols: data.symbols || ((e, s) => rectToPath(e, rectFromSize(s))),\n  };\n}\n","import {Selection} from \"d3\";\n\nimport {createSelectionClasses} from \"../../../../utilities\";\n\nexport type DialogData = {\n  toggleTimeout: NodeJS.Timeout | undefined\n  triggerEnter: () => void\n  triggerExit: () => void\n  onClickOutside: (e: MouseEvent) => void\n  onOpenerClick?: () => void\n}\n\nexport function renderDialog(parentS: Selection, ...classes: string[]) {\n  const {classString, selector} = createSelectionClasses(classes)\n  const dialogS = parentS.selectAll<HTMLDialogElement, DialogData>(selector)\n  const toggleTimeout = dialogS.empty() ? undefined : dialogS.datum().toggleTimeout\n  return dialogS\n    .data([{\n      triggerEnter: () => {},\n      triggerExit: () => {},\n      onClickOutside: () => {},\n      toggleTimeout\n    }])\n    .join('dialog')\n    .classed(classString, true)\n}\n\ntype OpenDialogOptions = {\n  dialogOpenerS: Selection<HTMLElement>,\n  dialogS: Selection<HTMLElement, DialogData>,\n  transitionMS: number,\n  type?: 'modal' | 'modeless'\n}\n\nexport function bindOpenerToDialog(props: OpenDialogOptions) {\n  const {dialogOpenerS, dialogS, transitionMS, type = 'modeless'} = props\n  const dialogE = dialogS.node() as HTMLDialogElement\n\n  dialogOpenerS.on('click.dialog', function () {\n      dialogS.datum().onOpenerClick?.()\n      const currentTransition = dialogE.getAttribute('transition')\n      if (currentTransition === 'enter') exit()\n      else enter()\n  })\n\n  function enter() {\n    clearTimeout(dialogS.datum().toggleTimeout)\n    type === 'modal' ? dialogE.showModal() : dialogE.show()\n    dialogS.attr('transition', 'enter')\n    dialogS.datum().toggleTimeout = setTimeout(() => {\n      dialogS.attr('transition-state', 'enter-done')\n    }, transitionMS)\n  }\n\n  function exit() {\n    clearTimeout(dialogS.datum().toggleTimeout)\n    dialogS.attr('transition', 'exit')\n    dialogS.datum().toggleTimeout = setTimeout(() => {\n      dialogS.attr('transition-state', 'exit-done')\n      dialogE.close()\n    }, transitionMS)\n  }\n\n  dialogS.datum().triggerEnter = () => enter()\n  dialogS.datum().triggerExit = () => exit()\n  dialogS.datum().onClickOutside = (e: MouseEvent) => {\n    if (!e.target || !(e.target instanceof HTMLDialogElement)) return\n    const rect = e.target.getBoundingClientRect();\n\n    const clickedInDialog = rect.top <= e.clientY && e.clientY <= rect.top + rect.height &&\n      rect.left <= e.clientX && e.clientX <= rect.left + rect.width\n\n    if (!clickedInDialog) {\n      dialogS.datum().triggerExit()\n    }\n  }\n\n  dialogS.on('click.Outside', (e: MouseEvent) => {\n    dialogS.datum().onClickOutside(e)\n  })\n}\n","import {Selection} from \"d3\";\n\nexport function renderTool(parentS: Selection, ...additionalClasses: string[]) {\n  const selector = additionalClasses.map(additionalClass => '.' + additionalClass).join('')\n  const names = additionalClasses.map(additionalClass => ' ' + additionalClass).join('')\n  return parentS\n    .selectAll<HTMLDivElement, any>(`.tool${selector}`)\n    .data([null])\n    .join('div')\n    .classed(`tool${names}`, true)\n}\n","import {select, Selection} from \"d3\";\nimport {Renderer} from \"../../../chart/renderer\";\n\nexport function optimizeSVG(selection: Selection<SVGElement>, renderer: Renderer) {\n  const { downloadAttributeMaxDecimals,\n    downloadAttributeMaxDecimalsActive,\n    downloadRemoveBgElements\n  } = renderer.windowS.datum().settings.state\n  if (downloadAttributeMaxDecimalsActive) roundSVGAttributes(selection, parseInt(downloadAttributeMaxDecimals))\n  if (downloadRemoveBgElements) removeBackgrounds(selection)\n}\n\nexport function roundSVGAttributes(selection: Selection<SVGElement>, decimals = 2) {\n  selection.selectAll<SVGElement, any>('*').each((d, i , g) => {\n    const elementS = select(g[i])\n      elementS.each(function () {\n      for (let i = 0; i < this.attributes.length; i++) {\n        const regex = /(\\d+\\.\\d+)|(\\.\\d+)/g\n        const attribute = this.attributes[i]\n        const modifiedValue = this.attributes[i].value.replace(regex, match => {\n          return parseFloat(match).toFixed(decimals)\n        })\n        elementS.attr(attribute.name, modifiedValue)\n      }\n    })\n  })\n}\n\nexport function removeBackgrounds(selection: Selection<SVGElement>) {\n  selection.selectAll<SVGGElement, any>('.background, .background-svgonly')\n    .filter(function () {\n      return !(this.parentNode instanceof SVGClipPathElement) //clippath backgrounds must remain to give clippath bounds!\n    }).remove()\n}\n","import {getUnrestrainedSelectors, groundUnrestrainedSelectors} from \"./adapt-selectors\";\n\nexport function getActiveCSSRulesForElement(target: Element) {\n  const cssRules = new Set<string>();\n  const targetClone = target.cloneNode(true) as Element\n\n  for (let i = 0; i < document.styleSheets.length; i++) {\n    const styleSheet = document.styleSheets[i]\n    if (!styleSheet.cssRules) continue\n    getActiveCSSRules(styleSheet.cssRules).forEach(rule => cssRules.add(rule))\n  }\n\n  function getActiveCSSRules(rules: CSSRuleList) {\n    const cssRules = new Set<string>()\n    for (let i = 0; i < rules.length; i++) {\n      const cssRule = rules[i]\n      switch (true) {\n        case cssRule instanceof CSSMediaRule: {\n          if (window.matchMedia((cssRule as CSSMediaRule).media.mediaText).matches) {\n            const activeMediaRules = getActiveCSSRules((cssRule as CSSMediaRule).cssRules)\n            activeMediaRules.forEach(rule => cssRules.add(rule))\n          }\n        } break\n        case cssRule instanceof CSSContainerRule: {\n          //TODO: maybe replace this method as soon as there is global support for\n          //      checking container queries like for CSSMediaRule\n          const activeContainerRules = getActiveCSSRules((cssRule as CSSContainerRule).cssRules)\n          activeContainerRules.forEach(rule => cssRules.add(rule))\n        } break\n        case cssRule instanceof CSSStyleRule:\n        case cssRule instanceof CSSPageRule: {\n          const styleRules = getStyleRules(cssRule as CSSStyleRule | CSSPageRule)\n          styleRules.forEach(rule => cssRules.add(rule))\n        } break\n        default:\n      }\n    }\n    return cssRules\n  }\n\n  function getWholeSelector(cssRule: CSSStyleRule | CSSPageRule) {\n    const includeParentSelector = (cssRule.parentRule && (cssRule instanceof CSSStyleRule || cssRule instanceof CSSPageRule))\n    return (includeParentSelector ? getWholeSelector(cssRule.parentRule as CSSStyleRule | CSSPageRule) : '') + ' ' + cssRule.selectorText\n  }\n\n  function getStyleRules(cssRule: CSSStyleRule | CSSPageRule) {\n    const selectorText = getWholeSelector(cssRule).replace('&', '')\n    const activeElementSVGStandalone = targetClone.matches(selectorText) ? targetClone : targetClone.querySelector(selectorText)\n    if (activeElementSVGStandalone) {\n      return new Set<string>().add(cssRule.cssText)\n    }\n    const activeElementInDOM = target.matches(selectorText) ? target : target.querySelector(selectorText)\n    if (activeElementInDOM) {\n      if (cssRule.parentRule instanceof CSSContainerRule && CSSRuleHasEffect(cssRule, activeElementInDOM as HTMLElement)) return new Set<string>()\n      const adaptedSelector = groundUnrestrainedSelectors(getUnrestrainedSelectors(targetClone, cssRule))\n      return new Set<string>().add(adaptedSelector.trim() + ' {' + cssRule.style.cssText + '}')\n    }\n    if (cssRule.cssRules && cssRule.cssRules.length > 0) {\n      return getActiveCSSRules(cssRule.cssRules)\n    }\n    return new Set<string>()\n  }\n\n  function CSSRuleHasEffect(rule: CSSStyleRule | CSSPageRule, element: HTMLElement) {\n    const beforeStyleComputed = window.getComputedStyle(element as Element)\n    let beforeStyle = {}\n    for (const prop in beforeStyleComputed) {\n      beforeStyle[prop] = beforeStyleComputed[prop]\n    }\n\n    const styleElement = document.createElement('style')\n    styleElement.appendChild(document.createTextNode(rule.cssText))\n    document.head.appendChild(styleElement)\n    const afterStyle = window.getComputedStyle(element)\n\n    for (const prop in beforeStyle) {\n      if (beforeStyle[prop] !== afterStyle[prop]) {\n        document.head.removeChild(styleElement)\n        return true;\n      }\n    }\n    document.head.removeChild(styleElement)\n    return false;\n  }\n\n  return cssRules\n}\n","export function getUnrestrainedSelectors(root: Element, cssStyleRule: CSSStyleRule | CSSPageRule) {\n  const selectors = cssStyleRule.selectorText.split(',')\n  return selectors.map(selector => {\n    //concat at ampersand places\n    const selectorParts = selector.trim().split(/\\s+/);\n    selectorParts[0] = selectorParts[0] === '&' ? selectorParts[0].substring(1) : selectorParts[0]\n\n    for (let i = 0; i <= selectorParts.length - 1; i++) {\n      const unRestrainedSelector = selectorParts.slice(i).join(' ')\n      try {\n        if (root.querySelector(unRestrainedSelector)) {\n          return unRestrainedSelector;\n        }\n      } catch (e) {\n        if (!(e instanceof DOMException)) throw e\n      }\n    }\n    return ''\n  }).filter(selector => selector !== '')\n}\n\nexport function groundUnrestrainedSelectors(selectors: string[]) {\n  return selectors.map(selector => '.chart ' + selector).join(',')\n}\n","import {getActiveCSSRulesForElement} from \"./get-active-cssrules\";\nimport {Renderer} from \"../../../../chart/renderer\";\nimport {\n  elementComputedStyleWithoutDefaults,\n  elementSVGPresentationAttrs,\n  elementSVGTransformStyles\n} from \"../../../../../utilities/dom/element/element\";\nimport {ErrorMessages} from \"../../../../../constants/error\";\nimport {\n  cssContentFromEntries,\n  getActiveCSSVars,\n  getRelevantCSSVars\n} from \"../../../../toolbar/download-tool/download-chart/apply-download-style/get-active-cssvars\";\nimport {createCSSRule} from \"../../../../toolbar/download-tool/download-chart/apply-download-style/create-cssrule\";\n\nexport function applyDownloadStyle(original: SVGSVGElement, clone: SVGSVGElement, renderer: Renderer) {\n  const { settings } = renderer.windowS.datum()\n  switch (settings.get('downloadStyleType')) {\n    case \"embedded\": embedCSS(original, clone); break\n    case \"inline\": attrsFromComputedStyle(clone, original); break\n    default: {\n      attrsFromComputedStyle(clone, original)\n      /* DEV_MODE_ONLY_START */\n      throw new Error(ErrorMessages.invalidScaledValuesCombination)\n      /* DEV_MODE_ONLY_END */\n    }\n  }\n}\n\nfunction embedCSS(original: SVGSVGElement, clone: SVGSVGElement) {\n  const activeCSSRules = Array.from<string>(getActiveCSSRulesForElement(original))\n  const activeCSSVars = getActiveCSSVars(original)\n  const relevantCSSVars = getRelevantCSSVars(activeCSSVars, [...activeCSSRules])\n  const cssVarRule = createCSSRule('.chart', cssContentFromEntries(relevantCSSVars))\n  const styleTag = document.createElement(\"style\");\n  [...activeCSSRules, cssVarRule].forEach((rule) => {\n    const ruleXMLConform = rule.replace(/&/g, '&amp;')\n    styleTag.appendChild(document.createTextNode(ruleXMLConform))\n  })\n\n  clone.appendChild(styleTag);\n  copyInlineStyles(clone, original)\n}\n\nfunction copyInlineStyles(target: Element, source: Element) {\n  const style = (source as SVGElement).style.cssText\n  if (style) {\n    (target as SVGElement).style.cssText = style\n  }\n  for (let i = 0; i < source.children.length; ++i) {\n    copyInlineStyles(target.children[i], source.children[i]);\n  }\n}\n\nfunction attrsFromComputedStyle(target: SVGElement | HTMLElement, source: Element) {\n  const svgPresentationStyle = elementComputedStyleWithoutDefaults(source, elementSVGPresentationAttrs);\n  for (let prop in svgPresentationStyle) {\n    target.setAttribute(prop, svgPresentationStyle[prop]);\n  }\n  applyTransformOriginStyles(target, source)\n  for (let i = 0; i < source.children.length; ++i) {\n    const child = target.children[i] as (SVGElement | HTMLElement)\n    attrsFromComputedStyle(child, source.children[i]);\n  }\n}\n\n//Check if text elements use 'transform-box' and 'transform-origin'. If so, apply to transform matrix attribute\nfunction applyTransformOriginStyles(target: SVGElement | HTMLElement, source: Element) {\n  // if (source.tagName !== 'text') return\n  const matrixPrev = target.getAttribute('transform')\n  const svgTransformStyles = elementComputedStyleWithoutDefaults(source, elementSVGTransformStyles)\n  if (!('transform-origin' in svgTransformStyles) || !('transform-box' in svgTransformStyles) || !matrixPrev) return\n\n  const transformOriginRegex = /(-?\\d*\\.?\\d+)px (-?\\d*\\.?\\d+)px/;\n  const match = transformOriginRegex.exec(svgTransformStyles['transform-origin'])\n  if (!match) return\n\n  const { x: bboxX, y: bboxY} = (source as SVGTextElement).getBBox()\n  const xTrans = bboxX + parseFloat(match[1])\n  const yTrans = bboxY + parseFloat(match[2])\n\n  const baseMatrix = new DOMMatrix(matrixPrev)\n  const transformToOriginMatrix = new DOMMatrix()\n  transformToOriginMatrix.e = xTrans\n  transformToOriginMatrix.f = yTrans\n  const transformFromOriginMatrix = new DOMMatrix()\n  transformFromOriginMatrix.e = -xTrans\n  transformFromOriginMatrix.f = -yTrans\n\n  const finalMatrix = transformToOriginMatrix.multiply(baseMatrix).multiply(transformFromOriginMatrix)\n\n  const matrixString = `matrix(${finalMatrix.a}, ${finalMatrix.b}, ${finalMatrix.c}, ${finalMatrix.d}, ${finalMatrix.e}, ${finalMatrix.f})`\n  target.setAttribute('transform', matrixString);\n}\n","import {SVGHTMLElementLegacy} from \"../../../../../constants/types\";\n\nexport type CSSVarsEntries = Record<string, string>\n\nexport function getActiveCSSVars(element: SVGHTMLElementLegacy) {\n  const computedStyles = window.getComputedStyle(element);\n  const cssVariables: CSSVarsEntries = {};\n\n  for (let i = 0; i < computedStyles.length; i++) {\n    const propertyName = computedStyles[i];\n    if (!propertyName.startsWith('--')) continue\n    cssVariables[propertyName] = computedStyles.getPropertyValue(propertyName).trim();\n  }\n\n  return cssVariables;\n}\n\nexport function getRelevantCSSVars(cssVars: CSSVarsEntries, cssRules: string[]) {\n  const entries = Object.entries(cssVars)\n  const keys = entries.map(entry => entry[0])\n  const values = entries.map(entry => entry[1])\n  const relevantCSSVars: CSSVarsEntries = {}\n  for (let i = 0; i < keys.length; i++) {\n    for (let j = 0; j < cssRules.length; j++) {\n      const cssVarKey = keys[i]\n      const rule = cssRules[j]\n      if (rule.includes(cssVarKey)) {\n        relevantCSSVars[cssVarKey] = values[i]\n        break\n      }\n    }\n  }\n  return relevantCSSVars\n}\n\nexport function cssContentFromEntries(entries: CSSVarsEntries) {\n  return Object.entries(entries).reduce((prev, [key, value]) => prev + `${key}: ${value};`, '')\n}\n","export function createCSSRule(selectorText: string, content: string) {\n  return selectorText + ' {' + content + '}';\n}\n","import {Renderer} from \"../../../chart/renderer\";\nimport {cssVars} from \"../../../../constants/cssVars\";\n\nexport function prettifySVG(code: string, renderer: Renderer) {\n  const propertiesToRemove = cssVars.map(cssVar => cssVar)\n    .filter(cssVar => cssVar !== '--layout-width' && cssVar !== '--layout-height')\n  let prettifiedSVG = removePropertiesFromSVGStyle(code, propertiesToRemove)\n\n  if (!renderer.windowS.datum().settings.get('downloadPrettifyActive')) return prettifiedSVG\n  prettifiedSVG = addNewLinesBeforeOpeningTags(prettifiedSVG)\n  prettifiedSVG = addNewlineBeforeGroupCloseTag(prettifiedSVG)\n  const indentationSpaces = ' '.repeat(parseInt(renderer.windowS.datum().settings.get('downloadPrettifyIndentionSpaces')))\n  prettifiedSVG = addTabsPerNestingLevel(prettifiedSVG, indentationSpaces)\n  prettifiedSVG = prettifyStyleTags(prettifiedSVG)\n  return prettifiedSVG\n}\n\nfunction addNewLinesBeforeOpeningTags(code: string) {\n  return code.replace(/<([^\\/\\?])/g, \"\\n$&\")\n}\n\nfunction addNewlineBeforeGroupCloseTag(code: string) {\n  //text|tspan\n  const regexGroupTags = /(<\\/(svg|g|defs|symbol|marker|a|switch|mask|clipPath|pattern|filter|textPath|use)>)/g;\n  return code.replace(regexGroupTags, \"\\n$1\")\n}\n\nfunction addTabsPerNestingLevel(code: string, indentationChars: string) {\n  //text|tspan\n  const regexAllTags = /(<\\/?(svg|g|defs|symbol|marker|a|switch|mask|clipPath|pattern|filter|use|rect|circle|ellipse|line|polyline|polygon|path|image|text|textPath|tspan|glyph|missing-glyph|foreignObject).*?>)/g\n  const regexNesting = /(<\\/?(svg|g|defs|symbol|marker|a|switch|mask|clipPath|pattern|filter|textPath|use).*?>)/g\n  const regexNonNesting = /(<\\/?(rect|circle|ellipse|line|polyline|polygon|path|image|text|textPath|tspan|glyph|missing-glyph|foreignObject).*?>)/g\n  let tabs = 0\n  return code.replace(regexAllTags, (match, p1) => {\n    if (p1.startsWith('</') && match.match(regexNesting)) {\n      tabs--;\n    }\n    const tabString = indentationChars.repeat(tabs);\n    if (!p1.startsWith('</') && match.match(regexNesting)) {\n      tabs++;\n    }\n    if (p1.startsWith('</') && match.match(regexNonNesting)) return p1\n    return `${tabString}${p1}`;\n  });\n}\n\nfunction prettifyStyleTags(code: string) {\n  const regexStyle = /<style[^>]*>([\\s\\S]*?)<\\/style>/g;\n\n  return code.replace(regexStyle, (match, p1) => {\n    let cssCode: string = p1\n    cssCode = cssCode.replace(/{/g, \"{\\n\")\n    cssCode = cssCode.replace(/}/g, \"}\\n\\n\")\n\n      // &amp\n    const lines = cssCode.split(/(?<!&amp);/).map(line => line.trim())\n\n    const prettifiedLines = new Array<string>();\n    const spacesPerTab = 4;\n    let indentLevel = 0;\n\n    lines.forEach((line, index) => {\n      if (line) {\n        const indentation = ' '.repeat(spacesPerTab * indentLevel);\n        prettifiedLines.push(indentation + line + (index < (lines.length - 1) ? ';' : ''));\n      }\n    });\n\n    const prettifiedCSS = prettifiedLines.join('\\n');\n    return `<style>\\n${prettifiedCSS}\\n</style>`;\n  });\n}\n\nfunction removePropertiesFromSVGStyle(code: string, propertiesToRemove: string[]): string {\n  const styleRegex = /(\\s)style\\s*=\\s*\"([^\"]*)\"/g;\n\n  function removePropertiesFromStyle(style: string): string {\n    const propertyRegex = /([^:]+)\\s*:\\s*([^;]+);?/g\n\n    let updatedStyle = ''\n    let match\n    while ((match = propertyRegex.exec(style)) !== null) {\n      if (match[0].endsWith(\"&quot;\") || match[0].endsWith(\"&apos;\")) {\n        continue\n      }\n\n      const propertyName = match[1].trim()\n      const propertyValue = match[2].trim()\n\n      if (!propertiesToRemove.includes(propertyName)) {\n        updatedStyle += `${propertyName}:${propertyValue};`\n      }\n    }\n    return updatedStyle\n  }\n\n  return code.replace(styleRegex, (_match, whiteSpace, styleAttr) => {\n    const modifiedStyle = removePropertiesFromStyle(styleAttr)\n    return ` style=\"${modifiedStyle}\"`\n  })\n}\n","import {Selection} from \"d3\";\n\nimport {createSelectionClasses} from \"../../../../utilities/d3\";\n\nexport function renderButton(parentS: Selection, ...classes: string[]) {\n  const {classString, selector} = createSelectionClasses(classes)\n  return parentS.selectAll<HTMLButtonElement, any>(selector)\n    .data([null])\n    .join('button')\n    .classed(classString, true)\n}\n","import {Selection} from \"d3\";\n\nimport {createSelectionClasses} from \"../../../../utilities/d3\";\n\ntype TooltipSimpleData = {\n  text: string\n}\nexport function renderSimpleTooltip(parentS: Selection, data: TooltipSimpleData, ...classes: string[]) {\n  const {classString, selector} = createSelectionClasses(['tooltip-simple', ...classes])\n  return parentS.selectAll<HTMLButtonElement, any>(selector)\n    .data([data])\n    .join('div')\n    .classed(classString, true)\n    .text(data.text)\n}\n","import {select, Selection} from \"d3\";\nimport {InputLabel} from \"./input-label\";\nimport {applyClassList} from \"../../../../utilities/d3/selection\";\n\nexport type LabelsParentData = {\n  labelData: InputLabel[]\n}\n\nexport function renderInputLabels(itemsS: Selection<any, LabelsParentData>) {\n  itemsS.each(function (d, i, g) {\n    const {labelData} = d\n    select(g[i]).selectChildren<HTMLLabelElement, InputLabel>('label')\n      .data(labelData)\n      .join('label')\n      .each((d, i, g) => renderInputLabel(select<HTMLLabelElement, InputLabel>(g[i])))\n  })\n}\n\nexport function renderInputLabel<D extends InputLabel>(labelS: Selection<HTMLLabelElement, D>) {\n  const d = labelS.datum()\n  d.render(labelS)\n  labelS.on('click.callback', function (e) { d.data.onClick?.(e, d.data.type) })\n  labelS.selectAll('input')\n    .attr('size', d.data.size ?? null)\n    .on('click.callback', function (e) { d.data.onInputClick?.(e, d.data.type) })\n  applyClassList(labelS, d.data.activeClasses ?? [], true)\n  applyClassList(labelS, d.data.inactiveClasses ?? [], false)\n}\n","import {Selection} from \"d3\";\n\nexport function renderSVGSeries(parentS: Selection, rawSVGs: string[]) {\n  const parser = new DOMParser()\n  const svgElements = rawSVGs.map(rawSVG => {\n    const svgDocument = parser.parseFromString(rawSVG, 'image/svg+xml')\n    return svgDocument.documentElement.cloneNode(true) as SVGSVGElement\n  })\n\n  parentS.selectAll('svg')\n    .data(svgElements)\n    .join(enter => enter.append(() => enter.datum())\n      ,undefined,\n      exit => exit.remove()\n    )\n  return parentS\n  // parentS.html(rawSVG) //alternative\n}\n","import {Selection} from \"d3\";\nimport {InputLabel, InputLabelDataBase} from \"./input-label\";\nimport {renderSimpleTooltip} from \"../render/render-simple-tooltip\";\nimport InfoSVG from '../../../../../../../assets/svg/tablericons/info-icon.svg'\nimport {renderSVGSeries} from \"../../../element\";\n\nexport type RadioLabelsData = Omit<RadioLabelData, 'value' | 'label'> & {\n  options: Pick<RadioLabelData, 'value' | 'label'>[]\n}\n\ntype RadioLabelData = InputLabelDataBase & {\n  value: string,\n  name: string,\n  defaultVal: string,\n  onChange?: (event: InputEvent, type: string) => void,\n  info?: string\n}\n\nexport class RadioLabel implements InputLabel {\n  tag = 'radio'\n  constructor(public readonly data: RadioLabelData) {}\n  render(labelS: Selection<HTMLLabelElement, RadioLabelData>) {\n    const {value, name, defaultVal,\n      onChange, label, type,\n    info } = this.data\n    const inputS = labelS.selectAll('input[type=\"radio\"]')\n      .data([null])\n      .join('input')\n      .attr('type', 'radio')\n      .attr('value', value)\n      .attr('name', name)\n      .on('change', (e) => onChange?.(e, type))\n    if (defaultVal === value) inputS.attr('checked', true)\n    labelS.selectAll('span')\n      .data([null])\n      .join('span')\n      .text(label)\n    if (info) {\n      const infoButtonS = labelS.selectAll('.info__button')\n        .data([null])\n        .join('button')\n        .classed('info__button', true)\n      renderSVGSeries(infoButtonS, [InfoSVG])\n      renderSimpleTooltip(infoButtonS, {text: info})\n    }\n    return labelS\n  }\n}\n","import {select, Selection} from \"d3\";\nimport {InputLabel} from \"../input-label/input-label\";\nimport CollapseDownRAW from '../../../../../../../assets/svg/tablericons/collapse-down.svg';\nimport {createSelectionClasses, mapSelection} from \"../../../../utilities/d3/selection\";\nimport {renderInputLabel} from \"../input-label/render-input-labels\";\nimport {renderSVGSeries} from \"../../../element/svg-series\";\n\nexport type FieldSetData = {\n  legend: string\n  collapsable?: boolean\n  filterable?: InputLabel\n}\n\nexport function renderFieldset<D extends FieldSetData>(\n  parentS: Selection, data: D[], ...classes: string[]) {\n\n  const {classString, selector} = createSelectionClasses(classes)\n  const itemS = parentS.selectAll<HTMLFieldSetElement, InputLabel>(selector)\n    .data(data)\n    .join('fieldset')\n    .classed(classString, true)\n\n  itemS.each(function (d, i, g) {\n    const currentItemS = select<HTMLFieldSetElement, typeof d>(g[i])\n    currentItemS.selectAll<HTMLLegendElement, any>('legend')\n      .data([null])\n      .join('legend')\n      .call((s) => fieldsetLegendRender(s, d))\n    if (d.collapsable) fieldsetCollapseWrapperRender(currentItemS)\n  })\n\n  return mapSelection(itemS, (currentS) => {\n    const collapsableS = currentS.selectAll<HTMLElement, D>('.collapsable')\n    return !collapsableS.empty() ? collapsableS : itemS\n  })\n}\n\nfunction fieldsetLegendRender(legendS: Selection<HTMLLegendElement>, data: FieldSetData) {\n  legendS.selectAll<any, InputLabel>('.active')\n    .data(data.filterable ? [data.filterable] : [])\n    .join('label')\n    .classed('active', true)\n    .each((d, i, g) => renderInputLabel(select<HTMLLabelElement, InputLabel>(g[i])))\n  legendS.selectAll<any, string>('.text')\n    .data([data.legend])\n    .join('span')\n    .classed('text', true)\n    .text(d => d)\n\n  legendS.selectAll(\".collapse-icon\")\n    .data(data.collapsable ? [CollapseDownRAW] : [])\n    .join('span')\n    .classed('collapse-icon', true)\n    .each((d,i,g) => renderSVGSeries(select(g[i]), [CollapseDownRAW]))\n}\n\nexport function fieldsetCollapseWrapperRender<D extends FieldSetData>\n(fieldsetS: Selection<HTMLFieldSetElement, D>) {\n  fieldsetS.each(function(d, i, g) {\n    const collapsableWrapperS = select(g[i]).selectAll('.collapsable-wrapper')\n      .data([null])\n      .join('div')\n      .classed('collapsable-wrapper', true)\n    collapsableWrapperS.selectAll('.collapsable').data([d])\n      .join('div')\n      .classed('collapsable', true)\n  })\n\n  fieldsetS.selectAll<HTMLLegendElement, unknown>('legend')\n    .classed('collapsable-opener', true)\n    .each(function (d, i, g) {\n      const collapsableWrapperS = select(g[i].parentElement).select('.collapsable-wrapper')\n      const currentlyCollapsed = collapsableWrapperS.classed('collapsed')\n      const legendS = select<HTMLLegendElement, string>(g[i])\n      collapsableWrapperS.classed('expanded', () => !currentlyCollapsed)\n      legendS.selectChildren('.text, .collapse-icon').on('click.toggleCollapsable', () => {\n        collapsableWrapperS.classed('expanded', () => !collapsableWrapperS.classed('expanded'))\n        collapsableWrapperS.classed('collapsed', () => !collapsableWrapperS.classed('collapsed'))\n      })\n    })\n  return fieldsetS\n}\n","import {Selection} from \"d3\";\nimport {Renderer} from \"../../../chart/renderer\";\nimport {windowSettingsKeys} from \"../../../window/window-settings\";\nimport {uniqueId} from \"../../../../utilities/unique\";\nimport {RadioLabel} from \"../../tool/input-label/radio-label\";\nimport {renderFieldset} from \"../../tool/render/render-fieldset\";\n\nexport function renderStyleTypeOptions(selection: Selection, renderer: Renderer) {\n  const currentSettings = renderer.windowS.datum().settings.state\n  const onChange = (e: InputEvent, type: string) => {\n    currentSettings[type] = (e.target as HTMLInputElement).value\n    renderer.windowS.dispatch('resize')\n  }\n  const sharedData = {\n    defaultVal: currentSettings.downloadStyleType,\n    type: windowSettingsKeys.downloadStyleType,\n    name: uniqueId(),\n    onChange,\n  }\n  const data = [{\n    legend: 'Style Type',\n    labelData: [\n      new RadioLabel({...sharedData, value: 'inline', label: 'Inline CSS (styles in elements)'}),\n      new RadioLabel({...sharedData,\n        value: 'embedded', label: 'Embedded CSS (styles in style block)'\n        , info: 'Success of this method is not guaranteed.'\n      }),\n    ]\n  }]\n  return renderFieldset(selection, data, 'item', 'item--radio')\n}\n","import {Selection} from \"d3\";\n\nimport {InputLabel, InputLabelDataBase} from \"./input-label\";\n\nexport type CheckboxLabelData = InputLabelDataBase & {\n  dataKey?: string\n  defaultVal?: boolean,\n  onChange?: (e: InputEvent, type: string) => void\n}\n\nexport class CheckBoxLabel implements InputLabel {\n  tag = 'checkbox'\n  constructor(public readonly data: CheckboxLabelData) {}\n  render(labelS: Selection<HTMLLabelElement>) {\n    const data = this.data\n\n    const inputS = labelS.selectAll('input[type=\"checkbox\"]')\n      .data([data])\n      .join('input')\n      .attr('type', 'checkbox')\n      .on('change', function (e) { data.onChange?.(e, data.type) })\n    if (data.defaultVal !== undefined) inputS.property('checked', data.defaultVal)\n    if (data.dataKey) inputS.attr('data-key', data.dataKey)\n\n    labelS.selectAll('span')\n      .data([data])\n      .join('span')\n      .text(d => d.label)\n    return labelS\n  }\n}\n","import {Selection} from \"d3\";\nimport {Renderer} from \"../../../chart/renderer\";\nimport {CheckBoxLabel} from \"../../tool/input-label/checkbox-label\";\nimport {windowSettingsKeys} from \"../../../window/window-settings\";\nimport {renderFieldset} from \"../../tool/render/render-fieldset\";\n\nexport function renderAttributeRemovalOptions(selection: Selection, renderer: Renderer) {\n  const currentSettings = renderer.windowS.datum().settings.state\n  const onChange = (e: InputEvent, type: string) => {\n    currentSettings[type] = (e.target as HTMLInputElement).checked\n    renderer.windowS.dispatch('resize')\n  }\n\n  const data = [{\n    legend: 'Removal of Attributes',\n    labelData: [new CheckBoxLabel({\n      label: 'Remove Data Key Attributes',\n      type: windowSettingsKeys.downloadRemoveDataKeys,\n      defaultVal: currentSettings.downloadRemoveDataKeys,\n      onChange,\n    }), new CheckBoxLabel({\n      label: 'Remove Class Attributes',\n      type: windowSettingsKeys.downloadRemoveClasses,\n      defaultVal: currentSettings.downloadRemoveClasses,\n      onChange,\n      activeClasses: currentSettings.downloadStyleType === 'embedded' ? ['disabled'] : [],\n      inactiveClasses: [currentSettings.downloadStyleType !== 'embedded' ? 'disabled': ''],\n    }), new CheckBoxLabel({\n      label: 'Remove Data Style Attributes',\n      type: windowSettingsKeys.downloadRemoveDataStyles,\n      defaultVal: currentSettings.downloadRemoveDataStyles,\n      onChange,\n      activeClasses: currentSettings.downloadStyleType === 'embedded' ? ['disabled'] : [],\n      inactiveClasses: [currentSettings.downloadStyleType !== 'embedded' ? 'disabled': ''],\n    })\n    ]\n  }]\n  return renderFieldset(selection, data, 'item', 'item--removal-attributes')\n}\n","import {Selection} from \"d3\";\nimport {InputLabel, InputLabelDataBase} from \"./input-label\";\n\ntype NumberLabelData = InputLabelDataBase & {\n  value: string,\n  min?: number\n  max?: number\n  step?: number\n  onChange?: (event: InputEvent, labelD: NumberLabel) => void\n  onInput?: (event: InputEvent, labelD: NumberLabel) => void\n}\n\nexport class NumberLabel implements InputLabel {\n  constructor(public readonly data: NumberLabelData) {}\n  render(labelS: Selection<HTMLLabelElement, NumberLabelData>) {\n    const {value, onChange, onInput,\n      label, min, max,\n      step} = this.data\n    labelS.selectAll('input[type=\"number\"]')\n      .data([null])\n      .join('input')\n      .attr('type', 'number')\n      .attr('value', value)\n      .attr('min', min ?? null)\n      .attr('max', max ?? null)\n      .attr('step', step ?? null)\n      .on('change', (e) => onChange?.(e, this))\n      .on('input', (e) => onInput?.(e, this))\n    labelS.selectAll('span')\n      .data([null])\n      .join('span')\n      .text(label)\n    return labelS\n  }\n\n  valueAsInt(e: InputEvent) {\n    const target = e.target as HTMLInputElement\n    return parseInt(target.value)\n  }\n\n  valueAsFloat(e: InputEvent) {\n    const target = e.target as HTMLInputElement\n    return parseFloat(target.value)\n  }\n\n  inMinMaxRange(value: number) {\n    return (this.data.min && value >= this.data.min) || (this.data.max && value <= this.data.max)\n  }\n}\n","import {Selection} from \"d3\";\nimport {Renderer} from \"../../../chart/renderer\";\nimport {NumberLabel} from \"../../tool/input-label/number-label\";\nimport {CheckBoxLabel} from \"../../tool/input-label/checkbox-label\";\nimport {windowSettingsKeys} from \"../../../window/window-settings\";\nimport {renderFieldset} from \"../../tool/render/render-fieldset\";\n\nexport function renderDecimalNumberOptions(selection: Selection, renderer: Renderer) {\n  const currentSettings = renderer.windowS.datum().settings.state\n  const onChangeActive = (e: InputEvent, type: string) => {\n    currentSettings[type] = (e.target as HTMLInputElement).checked\n    renderer.windowS.dispatch('resize')\n  }\n\n  const onInputNumber = (e, d: NumberLabel) => {\n    const value = d.valueAsInt(e)\n    if (isNaN(value)) e.target.value = currentSettings[d.data.type]\n  }\n  const onChangeNumber = (e, d: NumberLabel) => {\n    const value = d.valueAsInt(e)\n    if (isNaN(value) || !d.inMinMaxRange(value)) {\n      e.target.value = currentSettings[d.data.type]\n    }\n    currentSettings[d.data.type] = (e.target as HTMLInputElement).value\n  }\n\n  const data = [{\n    legend: 'Number of Decimal Points',\n    labelData: [new CheckBoxLabel({\n      label: 'Limit Decimal Points',\n      type: windowSettingsKeys.downloadAttributeMaxDecimalsActive,\n      defaultVal: currentSettings.downloadAttributeMaxDecimalsActive,\n      onChange: onChangeActive,\n    }), new NumberLabel({\n      label: '',\n      type: windowSettingsKeys.downloadAttributeMaxDecimals,\n      value: currentSettings.downloadAttributeMaxDecimals,\n      min: 1, max: 20, step: 1, size: 2,\n      onInput: onInputNumber,\n      onChange: onChangeNumber,\n      activeClasses: !currentSettings.downloadAttributeMaxDecimalsActive ? ['disabled'] : [],\n      inactiveClasses: currentSettings.downloadAttributeMaxDecimalsActive ? ['disabled'] : [],\n    })\n    ]\n  }]\n  return renderFieldset(selection, data, 'item', 'item--decimal-options')\n}\n","import {select, Selection} from \"d3\";\nimport downloadSVGRaw from '../../../../../../../assets/svg/tablericons/download.svg'\nimport cancelSVGRaw from '../../../../../../../assets/svg/feathericons/x-circle.svg'\nimport {Renderer} from \"../../../chart/renderer\";\nimport {bindOpenerToDialog, DialogData, renderDialog} from \"../../tool/render/render-dialog\";\nimport {renderTool} from \"../../tool/render/render-tool\";\nimport {downloadChart} from \"../download-chart/download-chart\";\nimport {renderButton} from \"../../tool/render/render-button\";\nimport {renderSimpleTooltip} from \"../../tool/render/render-simple-tooltip\";\nimport {renderInputLabels} from \"../../tool/input-label/render-input-labels\";\nimport {renderStyleTypeOptions} from \"./render-style-type-options\";\nimport {renderAttributeRemovalOptions} from \"./render-attribute-removal-options\";\nimport {renderDecimalNumberOptions} from \"./render-decimal-number-options\";\nimport {renderPrettifyOptions} from \"./render-prettify-options\";\nimport {renderMarginOptions} from \"./render-margin-options\";\nimport {renderSVGSeries} from \"../../../element/svg-series\";\n\nexport function renderDownloadTool(toolbarS: Selection<HTMLDivElement>, renderer: Renderer) {\n  const contentS = toolbarS.selectAll<HTMLDivElement, any>('.toolbar__content')\n  const downloadToolS = renderTool(contentS, 'tool--download')\n  const dialogContainerS = toolbarS.selectAll<HTMLDivElement, any>('.toolbar__dialog-container')\n\n  const dialogOpenerS = renderButton(downloadToolS, 'toolbar__btn')\n  renderSVGSeries(dialogOpenerS, [downloadSVGRaw])\n  renderSimpleTooltip(dialogOpenerS, {text: 'Download'})\n  const dialogS = renderDialog(dialogContainerS, 'dialog--center', 'dialog--download')\n  bindOpenerToDialog({dialogOpenerS, dialogS, transitionMS: 300, type: 'modal'})\n\n  renderMarginOptions(dialogS, renderer).call(renderInputLabels)\n  renderPrettifyOptions(dialogS, renderer).call(renderInputLabels)\n  renderStyleTypeOptions(dialogS, renderer).call(renderInputLabels)\n  renderAttributeRemovalOptions(dialogS, renderer).call(renderInputLabels)\n  // renderElementRemovalOptions(dialogS, renderer).call(renderInputLabels)\n  renderDecimalNumberOptions(dialogS, renderer).call(renderInputLabels)\n  downloadButtonRender(dialogS, renderer)\n  cancelButtonRender(dialogS)\n}\n\nfunction downloadButtonRender(selection: Selection<HTMLDialogElement, DialogData>, renderer: Renderer) {\n  const buttonS = selection\n    .selectAll<HTMLLIElement, any>('.button--icon.button--download')\n    .data([null])\n    .join('button')\n    .classed('button--icon button--download', true)\n    .on('click', function () {\n      select(this.closest('.window-rv'))\n        .selectAll<SVGSVGElement, unknown>('.layouter > svg.chart')\n        .call((s) => downloadChart(s, 'chart.svg', renderer));\n      select<HTMLDialogElement, DialogData>(this.closest('dialog')!).datum()?.triggerExit()\n    });\n\n  buttonS.selectAll('span')\n    .data([null])\n    .join(\"span\")\n    .text('Download SVG')\n  renderSVGSeries(buttonS, [downloadSVGRaw])\n}\n\nfunction cancelButtonRender(selection: Selection<HTMLDialogElement, DialogData>) {\n  const buttonS = selection\n    .selectAll<HTMLLIElement, any>('.button--icon.button--cancel')\n    .data([null])\n    .join('button')\n    .classed('button--icon button--cancel', true)\n    .on('click.cancel', function () {\n      select<HTMLDialogElement, DialogData>(this.closest('dialog')!).datum()?.triggerExit()\n    });\n\n  buttonS.selectAll('span')\n    .data([null])\n    .join(\"span\")\n    .text('Cancel')\n  renderSVGSeries(buttonS, [cancelSVGRaw])\n}\n","import {Selection} from \"d3\";\nimport {Renderer} from \"../../../chart\";\nimport {renderFieldset} from \"../../tool\";\nimport {windowSettingsKeys} from \"../../../window\";\nimport {NumberLabel} from \"../../tool/input-label/number-label\";\n\nexport function renderMarginOptions(selection: Selection, renderer: Renderer) {\n  const currentSettings = renderer.windowS.datum().settings\n\n  const options = [{\n    settingKey: windowSettingsKeys.downloadMarginLeft,\n    abbreviation: 'left'\n  }, {\n    settingKey: windowSettingsKeys.downloadMarginTop,\n    abbreviation: 'top'\n  }, {\n    settingKey: windowSettingsKeys.downloadMarginRight,\n    abbreviation: 'right'\n  }, {\n    settingKey: windowSettingsKeys.downloadMarginBottom,\n    abbreviation: 'bottom'\n  }\n  ]\n\n  const onInputNumber = (e, d: NumberLabel) => {\n    const value = d.valueAsInt(e)\n    if (isNaN(value)) e.target.value = currentSettings.state[d.data.type]\n  }\n  const onChangeNumber = (e, d: NumberLabel) => {\n    const value = d.valueAsInt(e)\n    if (isNaN(value) || !d.inMinMaxRange(value)) {\n      e.target.value = currentSettings.state[d.data.type]\n    }\n    currentSettings.state[d.data.type] = (e.target as HTMLInputElement).value\n  }\n\n  const data = [{\n    legend: 'Margin',\n    labelData: options.map(option => {\n      return new NumberLabel({\n        label: `Margin-${option.abbreviation}`,\n        type: windowSettingsKeys[option.settingKey],\n        value: currentSettings.get(option.settingKey),\n        min: 0, max: 10000, step: 1, size: 5,\n        onInput: onInputNumber,\n        onChange: onChangeNumber,\n      })\n    })\n  }]\n  return renderFieldset(selection, data, 'item', 'item--margin-options')\n}\n","import {Selection} from \"d3\";\nimport {Renderer} from \"../../../chart/renderer\";\nimport {CheckBoxLabel} from \"../../tool/input-label/checkbox-label\";\nimport {windowSettingsKeys} from \"../../../window/window-settings\";\nimport {renderFieldset} from \"../../tool/render/render-fieldset\";\nimport {NumberLabel} from \"../../tool/input-label/number-label\";\n\nexport function renderPrettifyOptions(selection: Selection, renderer: Renderer) {\n  const currentSettings = renderer.windowS.datum().settings.state\n  const onChange = (e: InputEvent, type: string) => {\n    currentSettings[type] = (e.target as HTMLInputElement).checked\n    renderer.windowS.dispatch('resize')\n  }\n\n  const onInputNumber = (e, d: NumberLabel) => {\n    const value = d.valueAsInt(e)\n    if (isNaN(value)) e.target.value = currentSettings[d.data.type]\n  }\n  const onChangeNumber = (e, d: NumberLabel) => {\n    const value = d.valueAsInt(e)\n    if (isNaN(value) || !d.inMinMaxRange(value)) {\n      e.target.value = currentSettings[d.data.type]\n    }\n    currentSettings[d.data.type] = (e.target as HTMLInputElement).value\n  }\n\n  const data = [{\n    legend: 'Prettify SVG',\n    labelData: [new CheckBoxLabel({\n      label: 'Prettify SVG',\n      type: windowSettingsKeys.downloadPrettifyActive,\n      defaultVal: currentSettings.downloadPrettifyActive,\n      onChange,\n    }), new NumberLabel({\n      label: 'Indentation spaces',\n      type: windowSettingsKeys.downloadPrettifyIndentionSpaces,\n      value: currentSettings.downloadPrettifyIndentionSpaces,\n      min: 1, max: 20, step: 1, size: 2,\n      onInput: onInputNumber,\n      onChange: onChangeNumber,\n      activeClasses: !currentSettings.downloadPrettifyActive ? ['disabled'] : [],\n      inactiveClasses: currentSettings.downloadPrettifyActive ? ['disabled'] : [],\n    })]\n  }]\n  return renderFieldset(selection, data, 'item', 'item--prettify-svg')\n}\n","import {select, Selection, ValueFn} from 'd3';\nimport {optimizeSVG} from \"./optimize-svg\";\nimport {Renderer} from \"../../../chart/renderer\";\nimport {applyDownloadStyle} from \"./apply-download-style/apply-download-style\";\nimport {prettifySVG} from \"./prettify-svg\";\n\nexport function downloadChart<Datum>(\n  chartSelection: Selection<SVGSVGElement, Datum>,\n  fileName: string | ValueFn<SVGSVGElement, Datum, string>,\n  renderer: Renderer\n): void {\n  chartSelection.each((d, i, g) => {\n    const {\n      downloadStyleType, downloadRemoveClasses,\n      downloadRemoveDataKeys, downloadRemoveDataStyles,\n      downloadMarginLeft, downloadMarginTop,\n      downloadMarginRight, downloadMarginBottom\n    } = renderer.windowS.datum().settings.state\n\n    const clonedChart = <SVGSVGElement>g[i].cloneNode(true);\n    const width = clonedChart.getAttribute('width');\n    const height = clonedChart.getAttribute('height');\n    const finalX = `${0 - parseInt(downloadMarginLeft)}`\n    const finalY = `${0 - parseInt(downloadMarginTop)}`\n    const finalWidth = `${parseInt(width ?? '0') + parseInt(downloadMarginLeft) + parseInt(downloadMarginRight)}`\n    const finalHeight = `${parseInt(height ?? '0') + parseInt(downloadMarginTop) + parseInt(downloadMarginBottom)}`\n    clonedChart.setAttribute('viewBox', `${finalX}, ${finalY}, ${finalWidth}, ${finalHeight}`);\n    clonedChart.removeAttribute('width');\n    clonedChart.removeAttribute('height');\n    clonedChart.removeAttribute('x');\n    clonedChart.removeAttribute('y');\n\n\n    applyDownloadStyle(g[i], clonedChart, renderer)\n\n    optimizeSVG(select(clonedChart), renderer)\n\n    const cloneContainer = document.createElement('div');\n    cloneContainer.append(clonedChart);\n\n    //prev regex / (layout|bounds|data-ignore-layout|data-ignore-layout-children)=\".*?\"/g\n    const classString = (downloadStyleType === 'inline' && downloadRemoveClasses) ? '|class' : ''\n    const dataKeyString = (downloadRemoveDataKeys) ? '|data-key' : ''\n    const dataStyleString = (downloadStyleType === 'inline' && downloadRemoveDataStyles) ? '|data-style' : ''\n    const optionalAttrs = classString + dataKeyString + dataStyleString\n    const regex = new RegExp(`\\\\s(layout|bounds|data-ignore-layout|data-ignore-layout-children${optionalAttrs})=\".*?\"`, 'g')\n\n    let cloneHTML = cloneContainer.innerHTML.replace(regex, '')\n    cloneHTML = prettifySVG(cloneHTML, renderer)\n    const blobType = 'image/svg+xml;charset=utf-8';\n    const blob = new Blob([cloneHTML], {type: blobType});\n    const url = URL.createObjectURL(blob);\n    const anchor = document.createElement('a');\n    fileName = fileName instanceof Function ? fileName.call(g[i], d, i, g) : fileName;\n\n    anchor.href = url;\n    anchor.download = fileName;\n    document.body.appendChild(anchor);\n    anchor.click();\n    document.body.removeChild(anchor);\n  });\n}\n","import {Selection} from \"d3\";\nimport {Renderer} from \"../../../chart/renderer\";\nimport {CheckBoxLabel} from \"../../tool/input-label/checkbox-label\";\nimport {windowSettingsKeys} from \"../../../window/window-settings\";\nimport {renderFieldset} from \"../../tool/render/render-fieldset\";\n\nexport function renderElementRemovalOptions(selection: Selection, renderer: Renderer) {\n  const currentSettings = renderer.windowS.datum().settings.state\n  const onChange = (e: InputEvent, type: string) => {\n    currentSettings[type] = (e.target as HTMLInputElement).checked\n    renderer.windowS.dispatch('resize')\n  }\n\n  const data = [{\n    legend: 'Removal of Elements',\n    labelData: [new CheckBoxLabel({\n      label: 'Remove Interactive Elements',\n      type: windowSettingsKeys.downloadRemoveBgElements,\n      defaultVal: currentSettings.downloadRemoveBgElements,\n      onChange,\n    })]\n  }]\n  return renderFieldset(selection, data, 'item', 'item--removal-elements')\n}\n","import {Selection} from \"d3\";\nimport {InputLabel, InputLabelDataBase} from \"./input-label\";\n\ntype RangeLabelData = InputLabelDataBase & {\n  value: string,\n  min?: number\n  max?: number\n  step?: number\n  onChange?: (event: InputEvent, labelD: RangeLabel) => void\n  onInput?: (event: InputEvent, labelD: RangeLabel) => void\n  onDrag?: (event: DragEvent, labelD: RangeLabel) => void\n}\n\nexport class RangeLabel implements InputLabel {\n  constructor(public readonly data: RangeLabelData) {}\n  render(labelS: Selection<HTMLLabelElement, RangeLabelData>) {\n    const {value, onChange, onInput, onDrag,\n      label, min, max, step} = this.data\n    labelS.selectAll('input[type=\"range\"]')\n      .data([null])\n      .join('input')\n      .attr('type', 'range')\n      .attr('min', min ?? null)\n      .attr('max', max ?? null)\n      .attr('step', step ?? null)\n      .attr('value', value)\n      .on('change', (e) => onChange?.(e, this))\n      .on('input', (e) => onInput?.(e, this))\n      .on('drag', (e) => onDrag?.(e, this))\n    labelS.selectAll('span')\n      .data([null])\n      .join('span')\n      .text(label)\n    return labelS\n  }\n}\n","import {select, Selection} from \"d3\";\nimport {renderTool} from \"../tool/render/render-tool\";\nimport {bindOpenerToDialog, renderDialog} from \"../tool/render/render-dialog\";\nimport filterSVGRaw from \"../../../../../../assets/svg/tablericons/filter.svg\";\nimport {FieldSetData, renderFieldset} from \"../tool/render/render-fieldset\";\nimport {Toolbar} from \"../render-toolbar\";\nimport {DataSeries} from \"../../data-series\";\nimport {mergeKeys} from \"../../../utilities/key\";\nimport {Axis} from \"../../axis\";\nimport {ScaledValuesCategorical} from \"../../../data/scale/scaled-values-spatial/scaled-values-categorical\";\nimport {CheckBoxLabel} from \"../tool/input-label/checkbox-label\";\nimport {renderButton} from \"../tool/render/render-button\";\nimport {renderSimpleTooltip} from \"../tool/render/render-simple-tooltip\";\nimport {LabelsParentData, renderInputLabels} from \"../tool/input-label/render-input-labels\";\nimport {InputLabel} from \"../tool/input-label/input-label\";\nimport {RangeLabel} from \"../tool/input-label/range-label\";\nimport type {KeyedAxis} from \"../../../../../respvis-parcoord/ts/render\";\nimport {getCurrentResponsiveValue, orderScaledValuesSpatial, ScaledValuesSpatialNumericOrTemporal} from \"../../../data\";\nimport {renderSVGSeries} from \"../../element\";\n\nexport function renderFilterTool(toolbarS: Selection<HTMLDivElement>, args: Toolbar) {\n  const seriesCollection = args.getSeries()\n  const axes = args.getAxes()\n  const contentS = toolbarS.selectAll<HTMLDivElement, any>('.toolbar__content')\n  const dialogContainerS = toolbarS.selectAll<HTMLDivElement, any>('.toolbar__dialog-container')\n\n  const filterToolS = renderTool(contentS, 'tool--filter')\n  const dialogOpenerS = renderButton(filterToolS, 'toolbar__btn')\n  renderSVGSeries(dialogOpenerS, [filterSVGRaw])\n  renderSimpleTooltip(dialogOpenerS, {text: 'Filter'})\n  const dialogS = renderDialog(dialogContainerS, 'dialog--side', 'dialog--filter')\n  bindOpenerToDialog({dialogOpenerS, dialogS, transitionMS: 300})\n\n  seriesCollection.forEach(series => {\n    if (seriesCollection.length > 1) renderSeriesControl(dialogS, series)\n    renderCategoryControls(dialogS, series)\n  })\n  const axesOrdered = orderScaledValuesSpatial(axes.map(axis => axis.scaledValues), axes);\n  [...axesOrdered.linear, ...axesOrdered.date].forEach(axisOrdered => renderAxisLinearControls(dialogS, axisOrdered.wrapper, axisOrdered.values))\n  axesOrdered.categorical.forEach(axis => renderAxisControls(dialogS, axis.wrapper))\n\n  return filterToolS\n}\n\nfunction renderSeriesControl(menuToolsItemsS: Selection, series: DataSeries) {\n  const {renderer} = series\n  const {key, keysActive} = series.originalData\n  const onClick = (e) => {\n    if (renderer.exitEnterActive()) {\n      e.preventDefault()\n      e.stopPropagation()\n    }\n  }\n  const data: (LabelsParentData & FieldSetData)[] = [{\n    legend: 'Main Series',\n    collapsable: true,\n    labelData: [new CheckBoxLabel({\n      label: 'Series', type: 'series',\n      dataKey: key, defaultVal: keysActive[key] ? true : false,\n      onClick,\n      onChange: () => {\n        renderer.filterDispatch.call('filter', {dataKey: key}, this)\n      }\n    })\n    ]\n  }]\n  const fieldSetS = renderFieldset(menuToolsItemsS, data, 'item', 'item--checkbox-series', 'filter-series')\n  renderInputLabels(fieldSetS)\n}\n\n//TODO: Refactor Double Input Range in own file\nfunction renderAxisLinearControls(menuToolsItemsS: Selection, axis: Axis, values: ScaledValuesSpatialNumericOrTemporal) {\n  const {renderer} = axis\n  const title = getCurrentResponsiveValue(axis.title, {chart: renderer.chartS})\n  const domain: number[] = values.scale.domain().map(d => d.valueOf())\n  const [minFilter, maxFilter] = [values.filteredRanges[0][0].valueOf(), values.filteredRanges[0][1].valueOf()]\n  const [minDomain, maxDomain] = [Math.min(...domain), Math.max(...domain)]\n\n  const onNumberInput = (e: InputEvent, labelD: RangeLabel) => {\n    const target = e.target as HTMLInputElement\n    const doubleRangeSliderS = select(target?.closest('.double-range-slider'))\n    const inputMin = doubleRangeSliderS.selectAll('.min-range input')\n    const inputMax = doubleRangeSliderS.selectAll('.max-range input')\n    const type = labelD.data.type\n    const index = type.charAt(type.length - 1)\n    const valueString = (e.target as HTMLInputElement).value\n    const valueNumber = parseFloat(valueString)\n\n    if (isNaN(valueNumber)) return\n    const dragMinOverMax = (type === `$range-0-0` && valueNumber >= maxFilter)\n    const dragMaxBelowMin = (type === `$range-0-1` && valueNumber <= minFilter)\n    const valueResult = dragMinOverMax ? maxFilter :\n      dragMaxBelowMin ? minFilter : valueNumber\n    if (values.tag === 'linear') values.filteredRanges[0][index] = valueResult\n    else values.filteredRanges[0][index] = new Date(Math.floor(valueResult))\n    if (dragMinOverMax || dragMaxBelowMin) {\n      target.value = valueResult.toString()\n    }\n    inputMin.classed('dominant', labelD.data.type === `$range-0-0`)\n    inputMax.classed('dominant', labelD.data.type === `$range-0-1`)\n    renderer.windowS.dispatch('resize')\n  }\n\n  const data: (LabelsParentData & FieldSetData)[] = [{\n    legend: title,\n    collapsable: true,\n    filterable: 'key' in axis ? createKeyedAxisCheckboxLabel(axis) : undefined,\n    labelData: values.filteredRanges.map((range) => {\n      const axisFormatFunction = axis.d3Axis?.tickFormat() ?? values.scale.tickFormat()\n      return [\n        new RangeLabel({\n          label: 'Min: ' + axisFormatFunction(range[0], 0),\n          type: `$range-0-0`,\n          value: values.filteredRanges[0][0].valueOf().toString(),\n          min: minDomain, max: maxDomain,\n          step: 1,\n          activeClasses: ['min-range'],\n          onInput: onNumberInput,\n        }),\n        new RangeLabel({\n          label: 'Max: ' + axisFormatFunction(range[1], 0),\n          type: `$range-0-1`,\n          value: values.filteredRanges[0][1].valueOf().toString(),\n          min: minDomain, max: maxDomain,\n          activeClasses: ['max-range'],\n          step: 1,\n          onInput: onNumberInput,\n        })\n      ]\n    }).flat()\n  }]\n  const fieldSetS = renderFieldset(menuToolsItemsS, data, 'item', 'item--double-range-filter', `filter-axis-${values.parentKey}`)\n  const doubleRangeSliderS = fieldSetS.selectAll('.double-range-slider')\n    .data((d) => [d]).join('div')\n    .classed('double-range-slider', true)\n    .style('--range-start', (Math.abs(minDomain - minFilter) / Math.abs(maxDomain - minDomain)) + '')\n    .style('--range-end', ((maxFilter - minDomain) / (maxDomain - minDomain)) + '')\n\n  doubleRangeSliderS.selectAll('.double-range-slider__track')\n    .data([null]).join('div')\n    .classed('double-range-slider__track', true)\n  doubleRangeSliderS.selectAll('.double-range-slider__range')\n    .data([null]).join('div')\n    .classed('double-range-slider__range', true)\n  renderInputLabels(doubleRangeSliderS)\n  doubleRangeSliderS.selectAll('input').classed('double-range-slider__input', true)\n}\n\nfunction renderCategoryControls(menuToolsItemsS: Selection, series: DataSeries) {\n  const {renderer, originalData} = series\n  const {categories} = originalData\n  if (!categories) return\n\n  const {title: categoriesTitle} = categories.categories\n  const categoryText = getCurrentResponsiveValue(categoriesTitle, {chart: renderer.chartS})\n  const categoryArray = categories.categories.categoryArray\n\n  const onClick = (e) => {\n    if (renderer.exitEnterActive()) {\n      e.preventDefault()\n      e.stopPropagation()\n    }\n  }\n\n  const data: (LabelsParentData & FieldSetData)[] = [{\n    legend: categoryText,\n    collapsable: true,\n    labelData: categoryArray.map((option) => {\n      const dataKey = mergeKeys([categories.parentKey, option.key])\n      return new CheckBoxLabel({\n        label: option.value, type: 'category',\n        dataKey,\n        defaultVal: categories.isKeyActiveByKey(dataKey),\n        onClick,\n        onChange: () => {\n          if (renderer.exitEnterActive()) return\n          renderer.filterDispatch.call('filter', {dataKey}, this)\n        }\n      })\n    })\n  }]\n  const fieldSetS = renderFieldset(menuToolsItemsS, data, 'item', 'item--checkbox-series', 'filter-categories')\n  renderInputLabels(fieldSetS)\n}\n\nfunction renderAxisControls(menuToolsItemsS: Selection, axis: Axis) {\n  const {renderer} = axis\n  const axisScaledValues = axis.scaledValues\n  const title = getCurrentResponsiveValue(axis.title, {chart: renderer.chartS})\n  const {keys, options} = getAxisCategoryProps(axis)\n\n  const onClick = (e) => {\n    if (renderer.exitEnterActive()) {\n      e.preventDefault()\n      e.stopPropagation()\n    }\n  }\n\n  const labelData: InputLabel[] = options.map((option, index) => {\n    return new CheckBoxLabel({\n      label: option.value, type: 'category',\n      dataKey: keys[index], defaultVal: axis.scaledValues.isKeyActiveByKey(keys[index]),\n      onClick,\n      onChange: () => {\n        if (renderer.exitEnterActive()) return\n        renderer.filterDispatch.call('filter', {dataKey: keys[index]}, this)\n      }\n    })\n  })\n\n  if (keys.length === 0 && !('key' in axis)) return\n\n  const data: (LabelsParentData & FieldSetData)[] = [{\n    legend: getCurrentResponsiveValue(`${title ?? axisScaledValues.parentKey.toUpperCase()}`, {chart: renderer.chartS}),\n    collapsable: (!('key' in axis) || keys.length > 1),\n    filterable: 'key' in axis ? createKeyedAxisCheckboxLabel(axis) : undefined,\n    labelData\n  }]\n\n  const fieldSetS = renderFieldset(menuToolsItemsS, data, 'item', 'item--checkbox-series', `filter-axis-${axisScaledValues.parentKey}`)\n  renderInputLabels(fieldSetS)\n}\n\nfunction getAxisCategoryProps(axis: Axis) {\n  const axisScaledValues = axis.scaledValues\n  return {\n    keys: axisScaledValues instanceof ScaledValuesCategorical ?\n      axisScaledValues.categories.categoryArray.map(c => `${axisScaledValues.parentKey}-${c.key}`) : [],\n    options: axisScaledValues instanceof ScaledValuesCategorical ?\n      axisScaledValues.categories.categoryArray : []\n  }\n}\n\nfunction createKeyedAxisCheckboxLabel(axis: KeyedAxis) {\n  const defaultVal = axis.keysActive[axis.key]\n\n  const axisNecessary = (axis.series.renderData.axes.length <= 2 && defaultVal)\n  // const axes = axis.series.originalData.axes //TODO: delete this if works without\n  // const axisNecessar = axes.map((_, index) => index)\n  //   .filter(index => axes[index].isKeyActiveByKey(axes[index].key)).length <= 2 && defaultVal\n\n  return new CheckBoxLabel({\n    activeClasses: axisNecessary ? ['disabled'] : undefined,\n    inactiveClasses: !axisNecessary ? ['disabled'] : undefined,\n    label: '', type: 'category',\n    dataKey: axis.key, defaultVal,\n    onChange: () => {\n      axis.series.renderer.filterDispatch.call('filter', {dataKey: axis.key}, this)\n    }\n  })\n}\n","import {Selection} from \"d3\";\n\nexport function clickSAddEnterExitAttributes(clickS: Selection<HTMLElement>, refS: Selection<HTMLElement>, delayMs: number) {\n  const refE = refS.node() as HTMLDialogElement\n  let timeout\n  const triggerTransition = () => {\n    const currentTransition = refE.getAttribute('transition')\n    if (currentTransition === 'enter') exit()\n    else enter()\n  }\n  clickS.on('click.transition', triggerTransition)\n\n  function enter() {\n    clearTimeout(timeout)\n    refE.setAttribute('transition', 'enter')\n    timeout = setTimeout(() => {\n      refE.setAttribute('transition-state', 'enter-done')\n    }, delayMs)\n  }\n\n  function exit() {\n    clearTimeout(timeout)\n    refE.setAttribute('transition', 'exit')\n    timeout = setTimeout(() => {\n      refE.setAttribute('transition-state', 'exit-done')\n    }, delayMs)\n  }\n}\n","import {Selection} from \"d3\";\nimport {DataSeriesChartData} from \"../chart/series-chart/series-chart\";\nimport {renderDownloadTool} from \"./download-tool\";\nimport {renderFilterTool} from \"./filter-tool/render-filter-tool\";\nimport {renderCrossTool} from \"./cross-tool/render-cross-tool\";\nimport ChevronsRight from \"../../../../../assets/svg/tablericons/chevrons-right.svg\"\nimport {DialogData} from \"./tool/render/render-dialog\";\nimport {clickSAddEnterExitAttributes} from \"./tool/animation/animtation\";\nimport {renderChartTool} from \"./chart-tool/render-chart-tool\";\nimport {renderSVGSeries} from \"../element/svg-series\";\n\nexport type Toolbar = Pick<DataSeriesChartData, 'renderer' | 'getSeries' | 'getAxes'>\n\nexport function renderToolbar(windowS: Selection, args: Toolbar) {\n  const toolbarS = windowS\n    .selectAll<HTMLDivElement, any>('.toolbar')\n    .data([null])\n    .join('div')\n    .classed('toolbar', true)\n\n  const toolbarBarS = toolbarS\n    .selectAll<HTMLDivElement, any>('.toolbar__bar')\n    .data([null])\n    .join('div')\n    .classed('toolbar__bar', true)\n\n  toolbarBarS\n    .selectAll<HTMLDivElement, any>('.toolbar__content-wrapper')\n    .data([null])\n    .join('div')\n    .classed('toolbar__content-wrapper', true)\n    .selectAll<HTMLDivElement, any>('.toolbar__content')\n    .data([null])\n    .join('div')\n    .classed('toolbar__content', true)\n\n  const toolbarOpenerS = toolbarBarS\n    .selectAll<HTMLDivElement, any>('.toolbar__opener')\n    .data([null])\n    .join('div')\n    .classed('toolbar__opener', true)\n  clickSAddEnterExitAttributes(toolbarOpenerS, toolbarS, 600)\n  renderSVGSeries(toolbarOpenerS, [ChevronsRight])\n\n  toolbarS\n    .selectAll<HTMLDivElement, any>('.toolbar__dialog-container')\n    .data([null])\n    .join('div')\n    .classed('toolbar__dialog-container', true)\n\n\n  renderFilterTool(toolbarS, args)\n  renderDownloadTool(toolbarS, args.renderer)\n  renderCrossTool(toolbarS, args.getSeries())\n  renderChartTool(toolbarS, args.getSeries())\n\n  const dialogS = toolbarS.selectAll<HTMLDialogElement, DialogData>('dialog')\n\n  dialogS.each(function (d, i) {\n    const otherElements = dialogS.filter((d, j) => i !== j)\n    d.onOpenerClick = () => {\n      otherElements.each(d => d.triggerExit())\n    }\n  })\n\n  toolbarOpenerS.on('click.close', () => {\n    dialogS.each((d) => d.triggerExit())\n  })\n}\n","import {Selection} from \"d3\";\nimport {renderTool} from \"../tool/render/render-tool\";\nimport crossSVGRaw from \"../../../../../../assets/svg/tablericons/movable-cross.svg\";\nimport {renderButton} from \"../tool/render/render-button\";\nimport {renderSimpleTooltip} from \"../tool/render/render-simple-tooltip\";\nimport {clickSAddEnterExitAttributes} from \"../tool/animation/animtation\";\nimport {renderMovableCrossTooltip} from \"respvis-tooltip\";\nimport {DataSeries} from \"../../data-series\";\nimport {renderSVGSeries} from \"../../element\";\n\nexport function renderCrossTool(toolbarS: Selection<HTMLDivElement>, seriesCollection: DataSeries[]) {\n  if (seriesCollection.length <= 0) return\n  const renderer = seriesCollection[0].renderer\n  const contentS = toolbarS.selectAll<HTMLDivElement, any>('.toolbar__content')\n  const crossToolS = renderTool(contentS, 'tool--cross')\n  const crossActivatorS = renderButton(crossToolS, 'toolbar__btn')\n  renderSVGSeries(crossActivatorS, [crossSVGRaw])\n  renderSimpleTooltip(crossActivatorS, {text: 'Inspect Chart'})\n  clickSAddEnterExitAttributes(crossActivatorS, crossActivatorS, 600)\n  crossActivatorS.on('click.settings', () => {\n    const settings = renderer.windowS.datum().settings.state\n    settings.movableCrossActive = !settings.movableCrossActive\n    renderer.windowS.dispatch('resize')\n  })\n  seriesCollection.forEach(series => renderMovableCrossTooltip(series))\n}\n","import {select, Selection} from \"d3\";\nimport {renderTool} from \"../tool/render/render-tool\";\nimport {renderButton} from \"../tool/render/render-button\";\nimport chartSVGRaw from \"../../../../../../assets/svg/tablericons/chart-settings.svg\";\nimport {renderSimpleTooltip} from \"../tool/render/render-simple-tooltip\";\nimport {bindOpenerToDialog, DialogData, renderDialog} from \"../tool/render/render-dialog\";\nimport {DataSeries} from \"../../data-series\";\nimport {renderSVGSeries} from \"../../element\";\n\nexport function renderChartTool(toolbarS: Selection<HTMLDivElement>, seriesCollection: DataSeries[]) {\n  if (seriesCollection.filter(series => series.renderTool).length <= 0) return\n\n  const contentS = toolbarS.selectAll<HTMLDivElement, any>('.toolbar__content')\n  const chartToolS = renderTool(contentS, 'tool--chart')\n  const dialogContainerS = toolbarS.selectAll<HTMLDivElement, any>('.toolbar__dialog-container')\n\n  const dialogOpenerS = renderButton(chartToolS, 'toolbar__btn')\n  renderSVGSeries(dialogOpenerS, [chartSVGRaw])\n  renderSimpleTooltip(dialogOpenerS, {text: 'Chart Settings'})\n  const dialogS = renderDialog(dialogContainerS, 'dialog--center', 'dialog--chart')\n  bindOpenerToDialog({dialogOpenerS, dialogS, transitionMS: 300, type: 'modal'})\n\n  dialogS.on('close', function (e) {\n    e.preventDefault()\n    seriesCollection[0]?.renderer.windowS.datum().settings.reset()\n    select<HTMLDialogElement, DialogData>(this.closest('dialog')!).datum()?.triggerExit()\n    seriesCollection[0]?.renderer.windowS.dispatch('resize')\n  });\n\n  seriesCollection.forEach(series => {\n    series.renderTool?.(toolbarS)\n  })\n}\n","import {select, Selection} from \"d3\";\nimport {DataSeries} from \"./data-series\";\n\nexport function addSeriesHighlighting(seriesS: Selection<any, DataSeries>) {\n  return seriesS.on('pointerover.seriespointhighlight pointerout.seriespointhighlight', (e: PointerEvent) => {\n      const target = (<Element>e.target)\n      const key = select(target).attr('data-key')\n      const equalDataS = select(target.closest('.chart')).selectAll(`[data-key='${key}']`)\n\n      const toggleVal = e.type.endsWith('over')\n      equalDataS.classed('highlight', toggleVal)\n    }\n  )\n}\n","import {easeCubicOut, select, Selection} from 'd3';\nimport {\n  addCSSTransitionEnterClass,\n  addCSSTransitionExitClass,\n  cancelExitClassOnUpdate,\n  createSelectionClasses,\n  cssVarFromSelection,\n} from \"../../utilities\";\nimport {Orientation} from \"../../constants\";\nimport {Label} from \"./label\";\nimport {MarkerPrimitive} from \"../marker-primitive\";\nimport {positionToTransformAttr} from \"../../utilities/geometry/position\";\n\ninterface LabelSeries<D extends MarkerPrimitive> {\n  elements: D[]\n  classes: string[]\n  orientation: Orientation\n}\n\nexport function renderLabelSeries<D extends MarkerPrimitive>(parentS: Selection, series: LabelSeries<D>) {\n  const {elements, classes, orientation} = series\n  const {selector, classString} = createSelectionClasses(classes)\n  const labels = elements.flatMap(element => element.getLabel(orientation))\n  return parentS.selectAll<SVGGElement, any>(selector)\n    .data([null])\n    .join('g')\n    .classed(classString, true)\n    .attr('data-ignore-layout-children', true)\n    .call((s) => renderLabels(s, labels))\n}\n\nexport function renderLabels<D extends Label>(seriesS: Selection, labels: D[]) {\n  return seriesS.selectAll<SVGTextElement, D>('text')\n    .data(labels, (d) => d.marker.key.rawKey)\n    .call((s) => joinLabelSeries(seriesS, s));\n}\n\nfunction joinLabelSeries(seriesS: Selection, joinS: Selection<Element, Label>): void {\n  const tDurationString = cssVarFromSelection(seriesS, '--transition-time-label-enter-ms')\n  const tDuration = tDurationString ? parseInt(tDurationString) : 250\n  joinS\n    .join(\n      (enter) =>\n        enter\n          .append('text')\n          .classed('label', true)\n          .each((d, i, g) => positionToTransformAttr(select(g[i]), d))\n          .call(s => addCSSTransitionEnterClass(s, tDuration))\n          .call((s) => seriesS.dispatch('enter', {detail: {selection: s}})),\n      (update) => update.call(() => {\n        update.call(cancelExitClassOnUpdate)\n      }),\n      (exit) =>\n        exit.call((s) => addCSSTransitionExitClass(s, tDuration)\n          .on('end', function() {\n            if (!select(this).classed('exit-done')) return\n            exit.remove().call((s) => seriesS.dispatch('exit', {detail: {selection: s}}))\n          }))\n    )\n    .each((d, i, g) =>\n      select(g[i])\n        .transition('position')\n        .duration(250)\n        .ease(easeCubicOut)\n        .call((t) => positionToTransformAttr(t, d))\n    )\n    .text((d) => d.text)\n    .attr('data-key', (d) => d.marker.key.rawKey)\n    .attr('data-polarity', (d) => d.marker.polarity ? d.marker.polarity : null)\n    .call((s) => seriesS.dispatch('update', {detail: {selection: s}}));\n}\n","import {Chart} from \"../chart\";\nimport {Selection} from \"d3\";\nimport {DataSeriesChartData} from \"./series-chart\";\nimport {Window} from \"../../window\";\nimport {renderLegend} from \"../../legend\";\nimport {addLegendHoverHighlighting} from \"../../legend/legend-highlighting\";\nimport {renderToolbar} from \"../../toolbar/render-toolbar\";\nimport {DataSeries} from \"../../data-series\";\nimport {addSeriesHighlighting} from \"../../data-series/data-series-highlighting\";\nimport {renderDataSeriesTooltip} from \"respvis-tooltip\";\nimport {renderLabelSeries} from \"../../label\";\nimport {MarkerPrimitive} from \"../../marker-primitive/marker-primitive\";\n\nexport abstract class DataSeriesChartMixin extends Chart {\n  abstract get windowS(): Selection<HTMLElement, Window & DataSeriesChartData>\n  abstract get chartS(): Selection<SVGSVGElement, Window & DataSeriesChartData>\n\n  addFilterListener() {\n    const renderer = this\n    renderer.windowS\n    this.filterDispatch.on('filter', function() {\n      const currentKey = this.dataKey\n      const chartD = renderer.windowS.datum()\n\n      chartD.getAxes().forEach(axis => {\n        if ('key' in axis) {\n          axis.setKeyActiveIfDefined(currentKey, !axis.isKeyActiveByKey(currentKey))\n        }\n        axis.scaledValues.setKeyActiveIfDefined(currentKey, !axis.scaledValues.isKeyActiveByKey(currentKey))\n      })\n\n      chartD.getSeries().forEach(series => {\n        const {keysActive, categories} = series.originalData\n        if (keysActive[currentKey] !== undefined) {\n          keysActive[currentKey] = !keysActive[currentKey]\n        }\n        categories?.setKeyActiveIfDefined(currentKey, !categories?.keysActive[currentKey])\n      })\n      renderer.windowS.dispatch('resize')\n    })\n  }\n\n  renderSeriesChartComponents() {\n    const chartSelection = this.chartS!\n    const chartD = chartSelection.datum()\n    chartD.getSeries().forEach(series => series.responsiveState.update())\n    this.addFilterListener()\n    renderLegend(chartSelection, chartD.legend).call(addLegendHoverHighlighting)\n    chartD.getSeries().forEach(series => series.renderLegendInfo?.(this.legendS))\n    renderToolbar(this.windowS!, chartSelection.datum())\n  }\n\n  addSeriesLabels(seriesS: Selection<SVGGElement, DataSeries>) {\n    const seriesElementsS = seriesS.selectAll<any, MarkerPrimitive>('.element:not(.exiting):not(.exit-done)')\n    renderLabelSeries(this.drawAreaS, {\n      elements: seriesElementsS.data(),\n      classes: ['series-label'],\n      orientation: seriesS.datum().responsiveState.currentlyFlipped ? 'horizontal' : 'vertical'\n    })\n  }\n\n  addAllSeriesFeatures(seriesS: Selection<SVGGElement, DataSeries>) {\n    seriesS.call(addSeriesHighlighting)\n      .call(renderDataSeriesTooltip)\n      .call((s) => this.addSeriesLabels(s))\n  }\n}\n","import {\n  CategoriesUserArgs,\n  ResponsiveValueUserArgs,\n  ScaledValuesCategorical,\n  SequentialColor,\n  SequentialColorUserArgs,\n  validateSequentialColor\n} from \"../../data\";\nimport {ActiveKeyMap, SeriesKey} from \"../../constants\";\nimport {RenderArgs} from \"../chart\";\nimport {DataSeriesTooltipGenerator} from \"respvis-tooltip\";\nimport {DataSeries} from \"./data-series\";\nimport {mergeKeys} from \"../../utilities\";\n\nexport type DataSeriesUserArgs = {\n  categories?: CategoriesUserArgs\n  color?: SequentialColorUserArgs\n  markerTooltipGenerator?: DataSeriesTooltipGenerator<SVGElement, any>\n  flipped?: ResponsiveValueUserArgs<boolean>\n}\nexport type DataSeriesArgs = DataSeriesUserArgs & RenderArgs & {\n  key: SeriesKey\n}\nexport type DataSeriesData = {\n  categories?: ScaledValuesCategorical\n  color?: SequentialColor\n  key: SeriesKey\n  keysActive: ActiveKeyMap\n  markerTooltipGenerator?: DataSeriesTooltipGenerator<SVGElement, any>\n  getMergedKeys: () => string[]\n  getCombinedKey: (i: number) => string\n}\n\nexport function validateDataSeriesArgs(args: DataSeriesArgs, series: DataSeries): DataSeriesData {\n  const {key} = args\n  const keysActive = {}\n  keysActive[key] = true\n\n  return {\n    //TODO: pass correct parameters here\n    categories: args.categories ? new ScaledValuesCategorical({\n      ...args.categories, parentKey: key,\n    }) : undefined,\n    color: args.color ? validateSequentialColor({...args.color, renderer: args.renderer, series}) : undefined,\n    key: args.key,\n    keysActive,\n    getMergedKeys(this: DataSeriesData) {\n      if (this.categories) {\n        return this.categories.categories.categoryArray.map(c =>\n          mergeKeys([this.key, c.key]))\n      }\n      return []\n    },\n    getCombinedKey(this:DataSeriesData, i: number) {\n      throw new Error('Method not implemented.')\n    }\n  }\n}\n\nfunction cloneDataSeriesData(args: DataSeriesData): DataSeriesData {\n  return {\n    ...args,\n    keysActive: {...args.keysActive}\n  }\n}\n","import {\n  getCurrentResponsiveValue,\n  rectFromString,\n  ResponsiveValueOptional,\n  ResponsiveValueUserArgs,\n  validateResponsiveValue\n} from \"../../data\";\nimport {DataSeries} from \"./data-series\";\n\nexport type ResponsiveStateArgs = {\n  series: DataSeries\n  flipped?: ResponsiveValueUserArgs<boolean>\n  currentlyFlipped?: boolean\n  previouslyFlipped?: boolean\n  drawAreaWidth?: number\n  drawAreaHeight?: number\n}\n\nexport class ResponsiveState {\n  protected _series: DataSeries\n  protected _flipped: ResponsiveValueOptional<boolean>\n  protected _currentlyFlipped: boolean\n  protected _previouslyFlipped: boolean\n  protected _drawAreaWidth: number\n  protected _drawAreaHeight: number\n\n  constructor(args: ResponsiveStateArgs) {\n    this._series = args.series\n    this._flipped = args.flipped ? validateResponsiveValue(args.flipped) : false\n    this._currentlyFlipped = args.currentlyFlipped ?? false\n    this._previouslyFlipped = this._currentlyFlipped\n    this._drawAreaWidth = args.drawAreaWidth ?? 0\n    this._drawAreaHeight = args.drawAreaHeight ?? 0\n  }\n\n  get flipped() {\n    return this._flipped\n  }\n\n  get currentlyFlipped() {\n    return this._currentlyFlipped\n  }\n\n  get drawAreaWidth() {\n    return this._drawAreaWidth\n  }\n\n  get drawAreaHeight() {\n    return this._drawAreaHeight\n  }\n\n  drawAreaS() {\n    return this._series.renderer.windowS.selectAll<SVGSVGElement, any>('.draw-area')\n  }\n\n  drawAreaRange() {\n    return {\n      horizontal: [0, this._drawAreaWidth],\n      horizontalInverted: [this._drawAreaWidth, 0],\n      vertical: [this._drawAreaHeight, 0],\n      verticalInverted: [0, this._drawAreaHeight]\n    }\n  }\n\n  update() {\n    const drawArea = this.drawAreaS()\n    const {width, height} = rectFromString(drawArea.attr('bounds') || '0, 0, 600, 400')\n    this._drawAreaWidth = width\n    this._drawAreaHeight = height\n\n    this._previouslyFlipped = this._currentlyFlipped\n    this._currentlyFlipped = getCurrentResponsiveValue(this._flipped, {chart: this._series.renderer.chartS})\n  }\n}\n","import {DataSeries} from \"./data-series\";\nimport {DataSeriesArgs, DataSeriesData, validateDataSeriesArgs} from \"./validate-data-series\";\nimport {Renderer} from \"../chart/renderer\";\nimport {ResponsiveState} from \"./responsive-state\";\n\nconst placeholder = 'empty-series'\n\nexport class EmptySeries implements DataSeries {\n  originalData: DataSeriesData;\n  renderData: DataSeriesData;\n  renderer: Renderer;\n  responsiveState: ResponsiveState;\n\n  constructor(args: DataSeriesArgs) {\n    this.originalData = validateDataSeriesArgs(args, this)\n    this.renderData = this.originalData\n    this.renderer = args.renderer\n    this.responsiveState = new ResponsiveState({\n      series: this,\n      flipped: ('flipped' in args) ? args.flipped : false\n    })\n  }\n\n  cloneToRenderData() {\n    return this\n  };\n\n  applyFilter() {\n    return this\n  };\n\n  applyZoom() {\n    return this\n  };\n\n  applyInversion() {\n    return this\n  };\n\n  getScaledValuesAtScreenPosition() {\n    return {\n      horizontal: placeholder,\n      horizontalName: placeholder,\n      horizontalNearestRealValue: placeholder,\n      horizontalScreenValue: placeholder,\n      vertical: placeholder,\n      verticalName: placeholder,\n      verticalNearestRealValue: placeholder,\n      verticalScreenValue: placeholder\n    };\n  }\n}\n","import {\n  BaseAxis,\n  BaseAxisArgs,\n  BaseAxisUserArgs,\n  ResponsiveValueOptional,\n  ResponsiveValueUserArgs,\n  validateBaseAxis,\n  validateResponsiveValue\n} from \"respvis-core\";\nimport {CartesianSeries} from \"./cartesian-series\";\n\nexport type CartesianAxisUserArgs = BaseAxisUserArgs & {\n  gridLineFactor?: number\n  inverted?: ResponsiveValueUserArgs<boolean>\n}\n\nexport type CartesianAxisArgs = BaseAxisArgs & Pick<CartesianAxisUserArgs, 'gridLineFactor' | 'inverted'> & {\n  series: CartesianSeries\n}\n\nexport type CartesianAxis = BaseAxis & {\n  series: CartesianSeries\n  gridLineFactor: number | undefined\n  inverted: ResponsiveValueOptional<boolean>\n  originalAxis: CartesianAxis\n}\n\nexport function validateCartesianAxis(args: CartesianAxisArgs): CartesianAxis {\n  const axis = {\n    ...validateBaseAxis(args),\n    inverted: validateResponsiveValue(args.inverted ?? false),\n    originalAxis: this,\n    series: args.series,\n    gridLineFactor: (typeof args.gridLineFactor === 'number' && args.gridLineFactor > 0.01) ?\n      args.gridLineFactor : undefined\n  }\n  axis.originalAxis = axis\n  return axis\n}\n","import {Selection} from 'd3';\nimport {\n  DataSeriesChartArgs,\n  DataSeriesChartData,\n  DataSeriesChartUserArgs,\n  validateChart,\n  validateLegend\n} from \"respvis-core\";\nimport {CartesianSeries, CartesianSeriesUserArgs} from \"../cartesian-series\";\nimport {CartesianAxis, CartesianAxisUserArgs, validateCartesianAxis} from \"../validate-cartesian-axis\";\n\nexport type CartesianChartUserArgs = DataSeriesChartUserArgs & {\n  series: CartesianSeriesUserArgs\n  // additionalSeries:\n  x?: CartesianAxisUserArgs\n  y?: CartesianAxisUserArgs\n}\n\nexport type CartesianChartArgs = DataSeriesChartArgs & Omit<CartesianChartUserArgs, 'series'> & {\n  series: CartesianSeries\n}\n\nexport type CartesianChartData = DataSeriesChartData & {\n  series: CartesianSeries\n  x: CartesianAxis\n  y: CartesianAxis\n}\n\nexport type CartesianChartSelection = Selection<SVGSVGElement | SVGGElement, CartesianChartData>\n\nexport function validateCartesianChart(args: CartesianChartArgs): CartesianChartData {\n  const {renderer, series, x, y} = args\n\n  return {\n    series,\n    x: validateCartesianAxis({...(x ?? {}), renderer, scaledValues: series.originalData.x, series}),\n    y: validateCartesianAxis({...(y ?? {}), renderer, scaledValues: series.originalData.y, series}),\n    getAxes: function (this:CartesianChartData) {\n      return [this.x, this.y, ...(this.series.originalData.color ? [this.series.originalData.color.axis] : [])]\n    },\n    getSeries: function (this:CartesianChartData) { return [this.series] },\n    getMainSeries: function (this:CartesianChartData) { return this.series },\n    legend: validateLegend({...args.legend, renderer, series}),\n    ...validateChart(args),\n  }\n}\n","import {CartesianChartSelection} from \"../validate-cartesian-chart\";\nimport {CartesianAxis} from \"../../validate-cartesian-axis\";\nimport {\n  Axis,\n  AxisSelection,\n  renderAxisLayout,\n  ScaledValuesCumulativeSummation,\n  ScaledValuesNumeric\n} from \"respvis-core\";\n\nexport function renderCartesianAxes<T extends CartesianChartSelection>(chartS: T) {\n  const {renderer, series, ...data} = chartS.datum()\n\n  const flipped = series.responsiveState.currentlyFlipped\n  const [horizontalAxisType, verticalAxisType] = flipped ? ['y', 'x'] as const : ['x', 'y'] as const\n\n  const verticalAxisD: CartesianAxis = {...data[verticalAxisType], scaledValues: series.renderData[verticalAxisType]}\n  const horizontalAxisD: CartesianAxis = {...data[horizontalAxisType], scaledValues: series.renderData[horizontalAxisType]}\n  const paddingWrapperS = chartS.selectAll('.padding-wrapper')\n\n  //TODO: clean this stacked bar chart mess up\n  const aggScaledValues = ('aggScaledValues' in series && series.aggScaledValues instanceof ScaledValuesCumulativeSummation) ?\n    series.aggScaledValues.sumCached() : undefined\n\n  const horizontalAxisDAgg = (aggScaledValues && horizontalAxisD.scaledValues instanceof ScaledValuesNumeric) ?\n    {...horizontalAxisD, scaledValues: aggScaledValues} : horizontalAxisD\n  horizontalAxisDAgg.scaledValues.scale.range(horizontalAxisD.scaledValues.scale.range())\n\n  const verticalAxisDAgg = (aggScaledValues && verticalAxisD.scaledValues instanceof ScaledValuesNumeric) ?\n    {...verticalAxisD, scaledValues: aggScaledValues} : verticalAxisD\n  verticalAxisDAgg.scaledValues.scale.range(verticalAxisD.scaledValues.scale.range())\n\n  paddingWrapperS.selectAll<SVGGElement, AxisSelection>(`.axis-${verticalAxisType}`)\n    .data([verticalAxisDAgg])\n    .join('g')\n    .call((s) => renderAxisLayout(s, 'vertical'))\n    .classed(`axis-${verticalAxisType}`, true)\n  data[verticalAxisType].d3Axis = verticalAxisD.d3Axis\n\n  paddingWrapperS.selectAll<SVGGElement, Axis>(`.axis-${horizontalAxisType}`)\n    .data([horizontalAxisDAgg])\n    .join('g')\n    .call((s) => renderAxisLayout(s, 'horizontal'))\n    .classed(`axis-${horizontalAxisType}`, true)\n  data[horizontalAxisType].d3Axis = horizontalAxisD.d3Axis\n}\n","import {CartesianChartSelection} from \"../validate-cartesian-chart\";\nimport {select} from \"d3\";\nimport {lineToPath} from \"respvis-core\";\n\nexport function renderGrid<T extends CartesianChartSelection>(chartS: T) {\n  const {series} = chartS.datum()\n  const {drawAreaS} = series.renderer\n  const gridAreaS = drawAreaS.selectAll('.grid-area')\n  const horizontalAxisS = series.renderer.horizontalAxisS\n  const verticalAxisS = series.renderer.verticalAxisS\n  const drawAreaBgE = series.renderer.drawAreaBgS.node() as SVGGElement\n  if (!drawAreaBgE) return\n  const drawAreaPos = drawAreaBgE.getBoundingClientRect()\n\n  cartesianGridHorizontalLinesRender()\n  cartesianGridVerticalLinesRender()\n\n  function cartesianGridHorizontalLinesRender() {\n    const gridLineFactor = verticalAxisS.datum().gridLineFactor\n    const ticks = verticalAxisS.selectAll<SVGLineElement, any>(\".tick line\").filter(function () {\n      const visibilityCheck = (element: Element) => {\n        const computedStyle = getComputedStyle(element)\n        const isVisibleFallback = !(computedStyle.display === 'none' || computedStyle.visibility === 'hidden')\n        return element.checkVisibility() && isVisibleFallback\n      }\n      //Parent Check necessary because of chrome\n      return visibilityCheck(this) && !!this.parentElement && visibilityCheck(this.parentElement)\n    })\n\n    const tickPositions: number[] = []\n    ticks.each(function() {\n      const tickPos = this.getBoundingClientRect()\n      tickPositions.splice(0, 0, tickPos.y + tickPos.height / 2 - drawAreaPos.y)\n    })\n    if (Math.min(...tickPositions) > 0) tickPositions.splice(0, 0, 0)\n    if (Math.max(...tickPositions) < drawAreaPos.height) tickPositions.push(drawAreaPos.height)\n\n    let linePositions: number[] = []\n    if (gridLineFactor !== undefined) {\n      linePositions = linePositionsFromTickPositions(tickPositions, gridLineFactor)\n      const maxPosition = Math.max(...tickPositions)\n      linePositions = linePositions.filter(position => position >= 1 && position <= maxPosition - 1)\n      linePositions.splice(0, 0, 0)\n    }\n\n    const [x1, x2] = horizontalAxisS.datum().scaledValues.scale.range()\n    gridAreaS.selectAll('.line.line--grid.line--horizontal')\n      .data(linePositions)\n      .join('path')\n      .each((d, i, g) => lineToPath(select(g[i]), [\n        {x: x1, y: d}, {x: x2, y: d}]))\n      .classed('line line--grid line--horizontal', true)\n  }\n\n  function cartesianGridVerticalLinesRender() {\n    const gridLineFactor = horizontalAxisS.datum().gridLineFactor\n    const ticks = horizontalAxisS.selectAll<SVGLineElement, any>(\".tick line\").filter(function () {\n      const visibilityCheck = (element: Element) => {\n        const computedStyle = getComputedStyle(element)\n        const isVisibleFallback = !(computedStyle.display === 'none' || computedStyle.visibility === 'hidden')\n        return element.checkVisibility() && isVisibleFallback\n      }\n      //Parent Check necessary because of chrome\n      return visibilityCheck(this) && !!this.parentElement && visibilityCheck(this.parentElement)\n    })\n\n    const tickPositions: number[] = [0]\n    ticks.each(function() {\n      const tickPos = this.getBoundingClientRect()\n      tickPositions.push(tickPos.x + tickPos.width / 2 - drawAreaPos.x)\n    })\n    if (Math.min(...tickPositions) > 0) tickPositions.splice(0, 0, 0)\n    if (Math.max(...tickPositions) < drawAreaPos.width) tickPositions.push(drawAreaPos.width)\n\n    let linePositions: number[] = []\n    if (gridLineFactor !== undefined) {\n      linePositions = linePositionsFromTickPositions(tickPositions, gridLineFactor)\n      const maxPosition = drawAreaPos.width\n      linePositions = linePositions.filter(position => position >= 1 && position <= maxPosition - 1)\n      linePositions.push(maxPosition)\n    }\n\n\n    const [y1, y2] = verticalAxisS.datum().scaledValues.scale.range()\n    gridAreaS.selectAll('.line.line--grid.line--vertical')\n      .data(linePositions)\n      .join('path')\n      .each((d, i, g) => lineToPath(select(g[i]), [\n        {x: d, y: y1}, {x: d, y: y2}]))\n      .classed('line line--grid line--vertical', true)\n  }\n\n}\n\n\n\n\nfunction linePositionsFromTickPositions(tickPositions: number[], gridLineFactor: number) {\n  const linePositions: number[] = []\n  const maxPosition = Math.max(...tickPositions)\n  if (gridLineFactor < 1) factorSmaller1()\n  if (gridLineFactor > 1) factorGreater1()\n  if (gridLineFactor === 1) factorEquals1()\n\n  function factorSmaller1() {\n    linePositions.push(tickPositions[0])\n    for(let i = 0; i < tickPositions.length - 1; i++) {\n      const lastPosition = linePositions[linePositions.length - 1]\n      while (tickPositions[i] < lastPosition && i < tickPositions.length) i++\n      linePositions.push(...splitDistance(gridLineFactor, tickPositions[i], tickPositions[i + 1]))\n    }\n    linePositions.shift()\n  }\n\n  function factorGreater1() {\n    const distances = tickPositions.slice(0, tickPositions.length - 1)\n      .map((pos, index) => Math.abs(tickPositions[index + 1] - pos))\n    const maxDistanceIndex = distances\n      .reduce((pIndex, _, cIndex) => distances[pIndex] > distances[cIndex] ? pIndex : cIndex, 0)\n    const maxDistance = distances[maxDistanceIndex]\n    let lastPosition = tickPositions[maxDistanceIndex] % maxDistance\n    do {\n      linePositions.push(lastPosition)\n      lastPosition = lastPosition + maxDistance * gridLineFactor\n    } while (lastPosition < maxPosition)\n  }\n\n  function factorEquals1() {\n    linePositions.push(tickPositions[0])\n    for(let i = 0; i < tickPositions.length - 1; i++) {\n      const lastPosition = linePositions[linePositions.length - 1]\n      linePositions.push( lastPosition + Math.abs(tickPositions[i + 1] - tickPositions[i]) * gridLineFactor)\n    }\n    linePositions.shift()\n  }\n\n  return linePositions\n}\n\nfunction splitDistance(gridLineFactor: number, position1: number, position2: number) {\n  const positions: number[] = []\n  const distance = Math.abs(position1 - position2)\n  let position = position1\n  do {\n    positions.push(position)\n    position += gridLineFactor * distance\n  } while (position < position2)\n  return positions\n}\n","import {lineToPath, ScaledValuesNumeric, ScaledValuesSpatial} from \"respvis-core\";\nimport {CartesianChartSelection} from \"../validate-cartesian-chart\";\n\nexport function renderOriginLine<T extends CartesianChartSelection>(chartS: T): void {\n  const {horizontalAxisS, verticalAxisS, drawAreaS} = chartS.datum().series.renderer\n  const gridAreaS = drawAreaS.selectAll('.grid-area')\n\n  function needsBaseLine(values: ScaledValuesSpatial) {\n    if (values.tag !== 'linear') return false\n    const hasNegativeVal = values.values.find(val => val < 0)\n    const hasPositiveVal = values.values.find(val => val > 0)\n    return hasNegativeVal && hasPositiveVal\n  }\n\n  if (needsBaseLine(horizontalAxisS.datum().scaledValues)) {\n    const vals = horizontalAxisS.datum().scaledValues as ScaledValuesNumeric\n    const x1 = vals.scale(0)\n    const x2 = x1\n    const [y1, y2] = verticalAxisS.datum().scaledValues.scale.range()\n    gridAreaS.selectAll('.line.line--origin.line--vertical')\n      .data([null])\n      .join('path')\n      .call((s) => lineToPath(s, [{x: x1, y: y1}, {x: x2, y: y2}]))\n      .classed('line line--origin line--vertical', true)\n  } else gridAreaS.selectAll('.line.line--origin.line--vertical').remove()\n\n  if (needsBaseLine(verticalAxisS.datum().scaledValues)) {\n    const vals = verticalAxisS.datum().scaledValues as ScaledValuesNumeric\n    const y1 = vals.scale(0)\n    const y2 = y1\n    const [x1, x2] = horizontalAxisS.datum().scaledValues.scale.range()\n    gridAreaS.selectAll('.line.line--origin.line--horizontal')\n      .data([null])\n      .join('path')\n      .classed('line line--origin line--horizontal', true)\n      .call((s) => lineToPath(s, [{x: x1, y: y1}, {x: x2, y: y2}]))\n  } else gridAreaS.selectAll('.line.line--origin.line--horizontal').remove()\n}\n","import {Selection} from \"d3\";\nimport {CartesianAxis} from \"../validate-cartesian-axis\";\nimport {Chart, getCurrentResponsiveValue, Window} from \"respvis-core\";\nimport {renderCartesianAxes, renderGrid, renderOriginLine} from \"./render\";\nimport {CartesianChartData} from \"./validate-cartesian-chart\";\nimport {CartesianRenderer} from \"./cartesian-renderer\";\n\ntype CartesianChartSelection = Selection<SVGSVGElement, Window & CartesianChartData>\n\nexport abstract class CartesianChartMixin extends Chart implements CartesianRenderer {\n  abstract get chartS(): CartesianChartSelection\n\n  get xAxisS(): Selection<SVGGElement, CartesianAxis> {\n    return this.chartS.selectAll<SVGGElement, CartesianAxis>('.axis-x')\n  }\n\n  get yAxisS(): Selection<SVGGElement, CartesianAxis> {\n    return this.chartS.selectAll<SVGGElement, CartesianAxis>('.axis-y')\n  }\n\n  get horizontalAxisS(): Selection<SVGGElement, CartesianAxis> {\n    return this.chartS.selectAll<SVGGElement, CartesianAxis>('.axis-bottom, .axis-top')\n  }\n\n  get verticalAxisS(): Selection<SVGGElement, CartesianAxis> {\n    return this.chartS.selectAll<SVGGElement, CartesianAxis>('.axis-left, .axis-right')\n  }\n\n  getAxisInversionState() {\n    return {\n      horizontal: this.horizontalAxisS.empty() ? false : getCurrentResponsiveValue(\n        this.horizontalAxisS.datum().inverted, {chart: this.chartS, self: this.horizontalAxisS}),\n      vertical: this.verticalAxisS.empty() ? false : getCurrentResponsiveValue(\n        this.verticalAxisS.datum().inverted, {chart: this.chartS, self: this.verticalAxisS}),\n      x: this.xAxisS.empty() ? false : getCurrentResponsiveValue(\n        this.xAxisS.datum().inverted, {chart: this.chartS, self: this.xAxisS}),\n      y: this.yAxisS.empty() ? false : getCurrentResponsiveValue(\n        this.yAxisS.datum().inverted, {chart: this.chartS, self: this.yAxisS})\n    }\n  }\n\n  renderCartesianAxis() {\n    const flipped = this.chartS.datum().series.responsiveState.currentlyFlipped\n    this.chartS.classed('chart-cartesian', true)\n      .attr('data-flipped', flipped)\n    renderCartesianAxes(this.chartS)\n  }\n  renderOriginLine() { renderOriginLine(this.chartS) }\n  renderGrid() { renderGrid(this.chartS) }\n  renderCartesianComponents() {\n    this.renderCartesianAxis()\n    this.renderOriginLine()\n    this.renderGrid()\n  }\n}\n","import {AxisType, BaseAxis, DataSeries, getCurrentResponsiveValue, SVGHTMLElementLegacy} from \"respvis-core\";\nimport {CartesianResponsiveState} from \"./cartesian-responsive-state\";\nimport {CartesianRenderer} from \"../cartesian-chart/cartesian-renderer\";\nimport {CartesianAxis} from \"../validate-cartesian-axis\";\nimport {Selection} from \"d3\";\nimport {CartesianSeriesData} from \"./validate-cartesian-series\";\n\nexport abstract class CartesianSeries implements DataSeries {\n  abstract originalData: CartesianSeriesData\n  abstract renderData: CartesianSeriesData\n  abstract responsiveState: CartesianResponsiveState\n  abstract renderer: CartesianRenderer\n\n  getScaledValuesAtScreenPosition(x: number, y: number) {\n    const getAxisData = (axisS: Selection<SVGHTMLElementLegacy, CartesianAxis>, position: number) => {\n      const axis = axisS.datum()\n      const scaleFormat = axis.scaledValues.tag !== 'categorical' ? axis.scaledValues.scale.tickFormat() : (h => h)\n      const appliedFormat = axis.d3Axis?.tickFormat() ?? scaleFormat\n      const screenValue = axis.scaledValues.atScreenPosition(position)\n      const nearestRealValue = axis.scaledValues.getNearestValue(screenValue as never)\n      return {\n        appliedFormat,\n        formattedValue: appliedFormat(screenValue, 0),\n        title: getCurrentResponsiveValue(axis.title, {\n          self: axisS,\n          chart: axis.renderer.chartS\n        }),\n        screenValue, nearestRealValue\n      }\n    }\n\n    const horizontal = getAxisData(this.renderer.horizontalAxisS, x)\n    const vertical = getAxisData(this.renderer.verticalAxisS, y)\n\n    return {\n      horizontal: horizontal.formattedValue,\n      horizontalName: horizontal.title,\n      horizontalNearestRealValue: horizontal.nearestRealValue,\n      horizontalScreenValue: horizontal.screenValue,\n      vertical: vertical.formattedValue,\n      verticalName: vertical.title,\n      verticalNearestRealValue: vertical.nearestRealValue,\n      verticalScreenValue: vertical.screenValue,\n    }\n  }\n\n  abstract cloneToRenderData(): CartesianSeries\n\n  applyFilter(): CartesianSeries {\n    const {x, y, color, categories} = this.renderData\n\n    this.renderData = {...this.renderData,\n      x: x.cloneFiltered(),\n      y: y.cloneFiltered()\n    }\n\n    if (color) {\n      const colorFiltered = color.axis.scaledValues.cloneFiltered()\n      const axis: BaseAxis = {...color.axis, scaledValues: colorFiltered}\n      this.renderData.color = {...color, axis}\n    }\n    if (categories) {\n      this.renderData.categories = categories.cloneFiltered()\n    }\n    return this\n  }\n\n  applyZoom(): CartesianSeries {\n    const {zoom, x, y} = this.renderData\n    if (!zoom) return this\n\n    const [xDirection, yDirection]: [AxisType, AxisType] =\n      this.responsiveState.currentlyFlipped ? ['y', 'x'] : ['x', 'y']\n\n    this.renderData = {...this.renderData,\n      x: x.cloneZoomed(zoom.currentTransform, xDirection),\n      y: y.cloneZoomed(zoom.currentTransform, yDirection)\n    }\n\n    return this\n  }\n\n  abstract applyInversion(): DataSeries\n}\n","import {CartesianSeries} from \"./cartesian-series\";\nimport {throttle} from \"respvis-core\";\nimport {D3ZoomEvent, zoomIdentity} from \"d3\";\n\nexport function handleZoom(series: CartesianSeries) {\n  const throttledZoom = throttle((e) => onZoomDrawArea(e, series), 50)\n  const onZoom = (e) => {\n    throttledZoom.func(e)\n    series.renderer.windowS.dispatch('resize')\n  }\n  const zoom = series.renderData.zoom\n  if (!zoom) return\n  series.renderer.drawAreaS.call(zoom.behaviour.on('zoom.zoom', onZoom))\n}\n\nfunction onZoomDrawArea(e: D3ZoomEvent<any, any>, series: CartesianSeries) {\n  const transform = e.transform\n  const {zoom} = series.originalData\n  if (!zoom) return\n  zoom.currentTransform = (e.transform.k === 1) ? zoomIdentity : transform\n\n  const {horizontal, verticalInverted} = series.responsiveState.drawAreaRange()\n  const extent: [[number, number], [number, number]] = [\n    [horizontal[0], verticalInverted[0]],\n    [horizontal[1], verticalInverted[1]],\n  ];\n  zoom.behaviour.extent(extent).translateExtent(extent).scaleExtent([zoom.out, zoom.in])\n}\n","import {AxisType, Orientation, ResponsiveState, ResponsiveStateArgs} from \"respvis-core\";\nimport {CartesianSeries} from \"./cartesian-series\";\nimport {handleZoom} from \"./handle-zoom\";\n\nexport type CartesianResponsiveStateArgs = ResponsiveStateArgs & {\n  series: CartesianSeries\n}\n\nexport class CartesianResponsiveState extends ResponsiveState {\n  protected _series: CartesianSeries\n  protected _inversionState: Record<AxisType | Orientation, boolean> = {\n    horizontal: false, vertical: false, x: false, y: false\n  }\n\n  constructor(args: CartesianResponsiveStateArgs) {\n    super(args)\n    this._series = args.series\n  }\n\n  horizontalVals() {\n    return this.currentlyFlipped ? this._series.renderData.y : this._series.renderData.x\n  }\n\n  verticalVals() {\n    return this.currentlyFlipped ? this._series.renderData.x : this._series.renderData.y\n  }\n\n  update() {\n    super.update();\n    let {horizontal, vertical} = this.drawAreaRange()\n\n    this.updateInversionState()\n\n    if (this._inversionState.horizontal) horizontal.reverse()\n    if (this._inversionState.vertical) vertical.reverse()\n\n    const [xOrientation, yOrientation] = this.currentlyFlipped ? ['vertical', 'horizontal'] as const : ['horizontal', 'vertical'] as const\n    this._series.originalData.x.updateRange(horizontal, vertical, xOrientation)\n    this._series.originalData.y.updateRange(horizontal, vertical, yOrientation)\n    handleZoom(this._series)\n  }\n\n  updateInversionState() {\n    const inversionState = this._series.renderer.getAxisInversionState()\n    const horizontalAxisS = this._series.renderer.horizontalAxisS\n    const verticalAxisS = this._series.renderer.verticalAxisS\n\n    this._series.originalData.x.inverted = inversionState.x\n    this._series.originalData.y.inverted = inversionState.y\n    if (!horizontalAxisS.empty()) horizontalAxisS.datum().scaledValues.inverted = inversionState.horizontal\n    if (!verticalAxisS.empty()) verticalAxisS.datum().scaledValues.inverted = inversionState.vertical\n\n    this._inversionState = {\n      horizontal: inversionState.horizontal,\n      vertical: inversionState.vertical,\n      x: this.currentlyFlipped ? inversionState.vertical : inversionState.horizontal,\n      y: this.currentlyFlipped ? inversionState.horizontal : inversionState.vertical,\n    }\n  }\n}\n","import {\n  alignScaledValuesLengths,\n  combineKeys,\n  DataSeriesArgs,\n  DataSeriesData,\n  DataSeriesUserArgs,\n  ErrorMessages,\n  ScaledValuesCategorical,\n  ScaledValuesSpatial,\n  ScaledValuesSpatialDomain,\n  ScaledValuesSpatialUserArgs,\n  validateDataSeriesArgs,\n  validateScaledValuesSpatial,\n  validateZoom,\n  Zoom,\n  ZoomArgs\n} from \"respvis-core\";\nimport {CartesianSeries} from \"./cartesian-series\";\nimport {CartesianRenderer} from \"../cartesian-chart\";\n\nexport type CartesianSeriesUserArgs = DataSeriesUserArgs & {\n  x: ScaledValuesSpatialUserArgs<ScaledValuesSpatialDomain>\n  y: ScaledValuesSpatialUserArgs<ScaledValuesSpatialDomain>\n  zoom?: ZoomArgs\n}\nexport type CartesianSeriesArgs = DataSeriesArgs & CartesianSeriesUserArgs & {\n  original?: CartesianSeries\n  renderer: CartesianRenderer\n}\nexport type CartesianSeriesData = DataSeriesData & {\n  x: ScaledValuesSpatial\n  y: ScaledValuesSpatial\n  zoom?: Zoom\n}\n\nexport function validateCartesianSeriesArgs(args: CartesianSeriesArgs, series: CartesianSeries) {\n  const [xAligned, yAligned] =\n    alignScaledValuesLengths(args.x, args.y)\n\n  const data = {\n    ...validateDataSeriesArgs(args, series),\n    x: validateScaledValuesSpatial(xAligned, 'a-0'),\n    y: validateScaledValuesSpatial(yAligned, 'a-1'),\n    zoom: args.zoom ? validateZoom(args.zoom) : undefined,\n    getCombinedKey(this: CartesianSeriesData, i: number) {\n      const xKey = this.x instanceof ScaledValuesCategorical ? this.x.getCategoryData(i).combinedKey : undefined\n      const yKey = this.y instanceof ScaledValuesCategorical ? this.y.getCategoryData(i).combinedKey : undefined\n      const seriesCategoryKey = this.categories ? this.categories.getCategoryData(i).combinedKey : undefined\n      return combineKeys([this.key, seriesCategoryKey, xKey, yKey])\n    }\n  }\n\n  if (data.categories && data.categories.values.length !== data.x.values.length) {\n    throw new Error(ErrorMessages.categoricalValuesMismatch)\n  }\n\n  if (data.color && data.color.values.length !== data.x.values.length) {\n    throw new Error(ErrorMessages.sequentialColorValuesMismatch)\n  }\n\n  return data\n}\n\nexport function cloneCartesianSeriesData<D extends CartesianSeriesData>(original: D): D {\n  return {...original,\n    x: original.x.clone(),\n    y: original.y.clone(),\n  }\n}\n","import {Key, MarkerPrimitive, MarkerPrimitiveArgs, Orientation, Polarity, Position, Rect} from \"respvis-core\";\nimport {BarLabel, BarLabelData} from \"./bar-label\";\n\nexport type BarArgs = Rect & MarkerPrimitiveArgs & {\n  xValue: any\n  yValue: any\n  label?: BarLabelData\n  inverted?: boolean\n}\n\nexport class Bar implements BarArgs, MarkerPrimitive {\n  x: number\n  y: number\n  width: number\n  height: number\n  xValue: any\n  yValue: any\n  category?: string\n  categoryFormatted?: string\n  styleClass: string\n  key: Key\n  labelData?: BarLabelData\n  polarity: Polarity\n  inverted: boolean\n\n  constructor(args: BarArgs) {\n    this.x = args.x\n    this.y = args.y\n    this.width = args.width\n    this.height = args.height\n    this.xValue = args.xValue\n    this.yValue = args.yValue\n    this.category = args.category\n    this.categoryFormatted = args.categoryFormatted\n    this.styleClass = args.styleClass\n    this.key = args.key\n    this.labelData = args.label\n    this.inverted = args.inverted ?? false\n    this.polarity = this.positionOnTop() ? 'positive' : 'negative'\n  }\n\n  getLabel(orientation: Orientation): BarLabel | [] {\n    if (!this.labelData) return []\n    return {\n      ...this.labelData,\n      ...(orientation === 'horizontal' ? this.getLabelPositionHorizontal() : this.getLabelPositionVertical()),\n      marker: this,\n      text: this.labelData.format(this, this.labelData.value)\n    }\n  }\n  private getLabelPositionVertical(): Position {\n    const { offset, positionStrategy, offsetX, offsetY } = this.labelData!\n    return {\n      x: offsetX + this.x + this.width / 2,\n      y: offsetY + this.y + (positionStrategy === 'center' ? this.height / 2 :\n        this.positionOnTop() ? (-1 * offset) : (this.height + offset)),\n    }\n  }\n  private getLabelPositionHorizontal(): Position {\n    const { offset, positionStrategy, offsetX, offsetY } = this.labelData!\n    return {\n      x: offsetX + this.x + (positionStrategy === 'center' ? this.width / 2 :\n        this.positionOnTop() ? (this.width + offset) : (-1 * offset)),\n      y: offsetY + this.y + this.height / 2,\n    }\n  }\n  private positionOnTop() {\n    const positionStrategy = this.labelData?.positionStrategy ?? 'dynamic'\n    const yPositive = this.yValue >= 0\n    return ((this.inverted !== yPositive) && positionStrategy === 'dynamic') ||\n      (!this.inverted && positionStrategy === 'positive') ||\n      (this.inverted && positionStrategy === 'negative')\n  }\n}\n","import {CartesianResponsiveState, CartesianResponsiveStateArgs} from \"respvis-cartesian\";\nimport {BarBaseSeries} from \"./bar-base-series\";\nimport {Rect, ScaledValuesCategorical, ScaledValuesNumeric} from \"respvis-core\";\n\ntype BarBaseResponsiveStateArgs = CartesianResponsiveStateArgs & {\n  series: BarBaseSeries\n}\n\nexport class BarBaseResponsiveState extends CartesianResponsiveState {\n  protected _series: BarBaseSeries\n\n  constructor(args: BarBaseResponsiveStateArgs) {\n    super(args)\n    this._series = args.series\n  }\n\n  update() {\n    super.update();\n  }\n\n  getBarBaseRect(i: number): Rect {\n    return this.currentlyFlipped ?\n      this.getBarRectHorizontal(i, this.horizontalVals() as ScaledValuesNumeric, this.verticalVals() as ScaledValuesCategorical) :\n      this.getBarRectVertical(i, this.verticalVals() as ScaledValuesNumeric, this.horizontalVals() as ScaledValuesCategorical)\n  }\n\n  private getBarRectVertical(i: number, linearVals: ScaledValuesNumeric, categoryVals: ScaledValuesCategorical) {\n    return {\n      x: barRectFormula.barCategoryStart(categoryVals, i),\n      y: barRectFormula.barLinearStart(linearVals, i),\n      width: barRectFormula.barCategoryLength(categoryVals, i),\n      height: barRectFormula.barLinearLength(linearVals, i),\n    }\n  }\n\n  private getBarRectHorizontal(i: number, linearVals: ScaledValuesNumeric, categoryVals: ScaledValuesCategorical) {\n    return {\n      x: barRectFormula.barLinearStart(linearVals, i),\n      y: barRectFormula.barCategoryStart(categoryVals, i),\n      width: barRectFormula.barLinearLength(linearVals, i),\n      height: barRectFormula.barCategoryLength(categoryVals, i),\n    }\n  }\n}\n\nconst barRectFormula = {\n  barCategoryStart: (vals: ScaledValuesCategorical, i: number) => vals.getScaledValueStart(i),\n  barCategoryLength: (vals: ScaledValuesCategorical, _: number) => vals.scale.bandwidth(),\n  barLinearStart: (vals: ScaledValuesNumeric, i: number) => Math.min(vals.getScaledValueEnd(i), vals.scale(0)!),\n  barLinearLength: (vals: ScaledValuesNumeric, i: number) => Math.abs(vals.scale(0)! - vals.getScaledValue(i)),\n} as const\n","import {CartesianRenderer, CartesianSeries} from \"respvis-cartesian\";\nimport {defaultStyleClass, Key, Rect} from \"respvis-core\";\nimport {Bar} from \"../../bar\";\nimport {BarBaseResponsiveState} from \"./bar-base-responsive-state\";\nimport {BarBaseSeriesArgs, BarBaseSeriesData} from \"./validate-bar-base-series\";\n\nexport abstract class BarBaseSeries extends CartesianSeries {\n  abstract originalData: BarBaseSeriesData\n  abstract renderData: BarBaseSeriesData\n  responsiveState: BarBaseResponsiveState\n  renderer: CartesianRenderer\n\n  protected constructor(args: BarBaseSeriesArgs) {\n    super();\n    this.responsiveState = new BarBaseResponsiveState({\n      series: this,\n      flipped: ('flipped' in args) ? args.flipped : false\n    })\n    this.renderer = args.renderer\n  }\n\n  getBars(): Bar[] {\n    const data: Bar[] = []\n    const {x, y, color,\n      keysActive, key, categories, labels} = this.renderData\n\n    const optionalColorValues = color?.axis.scaledValues\n    if (!keysActive[key]) return data\n    for (let i = 0; i < y.values.length; ++i) {\n      if (categories && !categories.isValueActive(i)) continue\n      if (!x.isValueActive(i) || !y.isValueActive(i) || !(optionalColorValues?.isValueActive(i) ?? true)) continue\n      const category = categories?.values[i]\n      data.push(new Bar({\n        ...this.getRect(i),\n        xValue: x.values[i],\n        yValue: y.values[i],\n        styleClass: categories?.getStyleClass(i) ?? defaultStyleClass,\n        category,\n        categoryFormatted: category ? categories?.categories.categoryMap[category].formatValue : undefined,\n        label: labels?.at(i),\n        key: new Key(this.renderData.getCombinedKey(i) + ` i-${i}`),\n        inverted: y.inverted\n      }));\n    }\n    return data\n  }\n\n  abstract getRect(i: number): Rect\n}\n","import {Bar} from \"./bar\";\nimport {Label} from \"respvis-core\";\n\ntype BarLabelPosition = 'positive' | 'negative' | 'dynamic' | 'center'\n\nexport type BarLabelsUserArg = {\n  offset?: number\n  positionStrategy?: BarLabelPosition\n  format?: (bar: Bar, label: string) => string\n  offsetX?: number[]\n  offsetY?: number[]\n  values: string[]\n}\n\ntype BarLabelsData = Required<BarLabelsUserArg>\n\nexport type BarLabelData = Omit<BarLabelsData, 'offsetX' | 'offsetY' | 'values'> & {\n  value: string\n  offsetX: number\n  offsetY: number\n}\n\nexport type BarLabel = Label & BarLabelData\n\nexport class BarLabelsDataCollection implements BarLabelsData {\n  values: string[]\n  offset: number\n  offsetX: number[]\n  offsetY: number[]\n  positionStrategy: BarLabelPosition\n  format: (bar: Bar, label: string) => string\n  constructor(args: BarLabelsUserArg) {\n    this.values = args.values\n    this.offset = args.offset ?? 0\n    this.offsetX = args.offsetX ?? this.values.map(() => 0)\n    this.offsetY = args.offsetY ?? this.values.map(() => 0)\n    this.positionStrategy = args.positionStrategy ?? 'dynamic'\n    this.format = args.format ?? ((bar, label) => label)\n  }\n\n  at(i: number) : BarLabelData {\n    return { value: this.values[i], offset: this.offset, positionStrategy: this.positionStrategy,\n      offsetX: this.offsetX[i], offsetY: this.offsetY[i], format: this.format }\n  }\n}\n","import {\n  CartesianSeriesArgs,\n  CartesianSeriesData,\n  CartesianSeriesUserArgs,\n  validateCartesianSeriesArgs\n} from \"respvis-cartesian\";\nimport {\n  ErrorMessages,\n  ScaledValuesCategorical,\n  ScaledValuesCategoricalUserArgs,\n  ScaledValuesNumericUserArgs\n} from \"respvis-core\";\nimport {Bar} from \"../../bar\";\nimport {BarLabelsDataCollection, BarLabelsUserArg} from \"../../bar-label\";\nimport {DataSeriesTooltipGenerator} from \"respvis-tooltip\";\nimport {BarBaseSeries} from \"./bar-base-series\";\n\nexport type BarBaseSeriesUserArgs = Omit<CartesianSeriesUserArgs, 'markerTooltipGenerator'> & {\n  x: ScaledValuesCategoricalUserArgs\n  y: ScaledValuesNumericUserArgs\n  original?: BarBaseSeries\n  labels?: BarLabelsUserArg\n  markerTooltipGenerator?: DataSeriesTooltipGenerator<SVGRectElement, Bar>\n}\nexport type BarBaseSeriesArgs = BarBaseSeriesUserArgs & CartesianSeriesArgs\nexport type BarBaseSeriesData = CartesianSeriesData & {\n  x: ScaledValuesCategorical\n  labels?: BarLabelsDataCollection\n  markerTooltipGenerator?: DataSeriesTooltipGenerator<SVGRectElement, Bar>\n}\n\nexport function validateBarBaseSeriesArgs(args: BarBaseSeriesArgs, series: BarBaseSeries): BarBaseSeriesData {\n  const cartesianData = validateCartesianSeriesArgs(args, series) as CartesianSeriesData & { x: ScaledValuesCategorical }\n  if (!(cartesianData.x instanceof ScaledValuesCategorical)) throw new Error(ErrorMessages.invalidScaledValuesCombination)\n  return {\n    ...cartesianData,\n    markerTooltipGenerator: args.markerTooltipGenerator,\n    labels: args.labels ? new BarLabelsDataCollection(args.labels) : undefined\n  }\n}\n","import {\n  CategoriesUserArgs,\n  ErrorMessages,\n  ScaledValuesCategorical,\n  ScaledValuesCumulativeSummation,\n  ScaledValuesNumeric,\n  ScaleNumeric,\n} from \"respvis-core\";\nimport {createStackedBarRect} from \"./bar-stacked-creation\";\nimport {BarBaseSeries} from \"../bar-base/bar-base-series\";\nimport {Bar} from \"../../bar\";\nimport {\n  BarBaseSeriesArgs,\n  BarBaseSeriesData,\n  BarBaseSeriesUserArgs,\n  validateBarBaseSeriesArgs\n} from \"../bar-base/validate-bar-base-series\";\nimport {cloneCartesianSeriesData} from \"respvis-cartesian\";\n\nexport type BarStackedSeriesUserArgs = BarBaseSeriesUserArgs & {\n  type: 'stacked'\n  aggregationScale?: ScaleNumeric\n  categories: CategoriesUserArgs\n}\n\nexport type BarStackedSeriesArgs = BarBaseSeriesArgs & BarStackedSeriesUserArgs\n\nexport type BarStackedSeriesData = BarBaseSeriesData & {\n  categories: ScaledValuesCategorical\n  y: ScaledValuesNumeric\n  aggregationScale?: ScaleNumeric\n}\n\nfunction validateBarStackedSeriesArgs(args: BarStackedSeriesArgs, series: BarStackedSeries): BarStackedSeriesData {\n  const data: BarStackedSeriesData = {...validateBarBaseSeriesArgs(args, series),\n    aggregationScale: args.aggregationScale\n  } as BarStackedSeriesData\n  if (!data.categories) throw new Error(ErrorMessages.missingArgumentForSeries)\n  if (!(data.y instanceof ScaledValuesNumeric)) throw new Error(ErrorMessages.missingArgumentForSeries)\n  return data\n}\n\nexport class BarStackedSeries extends BarBaseSeries {\n  originalData: BarStackedSeriesData\n  renderData: BarStackedSeriesData\n  type: 'stacked'\n  aggScaledValues: ScaledValuesCumulativeSummation\n  constructor(args: BarStackedSeriesArgs) {\n    super(args);\n    this.originalData = validateBarStackedSeriesArgs(args, this)\n    this.renderData = this.originalData\n    this.type = 'stacked'\n    const {x, y,categories,\n      aggregationScale} = this.originalData\n    this.aggScaledValues = new ScaledValuesCumulativeSummation(y, x, categories, aggregationScale)\n  }\n\n  override getBars(): Bar[] {\n    const {x, y,categories,\n      aggregationScale} = this.renderData\n    this.aggScaledValues = new ScaledValuesCumulativeSummation(y, x, categories, aggregationScale)\n    return super.getBars();\n  }\n\n  getRect(i: number) {\n    return createStackedBarRect({ series: this, i })\n  }\n\n  cloneToRenderData(): BarStackedSeries {\n    this.renderData = cloneCartesianSeriesData(this.originalData)\n    return this\n  }\n\n  applyZoom(): BarStackedSeries {\n    // TODO: make zooming work for stacked bar chart\n    // super.applyZoom()\n    return this\n  }\n\n  applyFilter(): BarStackedSeries {\n    super.applyFilter()\n    return this\n  }\n\n  applyInversion(): BarStackedSeries {\n    throw new Error('Method not implemented')\n  }\n}\n","import {ScaledValuesNumeric, ScaledValuesTemporal} from \"respvis-core\";\nimport {BarStackedSeries} from \"./bar-stacked-series\";\n\ntype CreateStackedBarProps = {\n  series: BarStackedSeries\n  i: number\n}\nexport function createStackedBarRect(props: CreateStackedBarProps) {\n  const {i, series} = props\n  const {responsiveState} = series\n  const aggScaledValues = series.aggScaledValues.sumCached()\n\n  const scaledValuesOriginalY = series.renderData.y\n  const flipped = responsiveState.currentlyFlipped\n  const wholeBarRect = responsiveState.getBarBaseRect(i)\n\n\n  const scaledValuesOriginalYRange = scaledValuesOriginalY.scale.range()\n  aggScaledValues.scale.range(scaledValuesOriginalYRange)\n  if (!flipped) {\n    const scaledValuesOriginalYRangeInverted = [scaledValuesOriginalYRange[1], scaledValuesOriginalYRange[0]]\n    aggScaledValues.scale.range(scaledValuesOriginalYRangeInverted)\n  }\n\n  const innerValueStart = aggScaledValues.scale(aggScaledValues.values[i])\n\n  function getHorizontalStackedBar() {\n    const x = series.renderData.y as (ScaledValuesNumeric | ScaledValuesTemporal)\n    return  {\n      x: wholeBarRect.x + innerValueStart,\n      y: wholeBarRect.y,\n      width: aggScaledValues.scale(x.values[i]),\n      height: wholeBarRect.height\n    }\n  }\n\n  function getVerticalStackedBar() {\n    const y = series.renderData.y as (ScaledValuesNumeric | ScaledValuesTemporal)\n    return  {\n      x: wholeBarRect.x,\n      y: aggScaledValues.scale.range()[1] - innerValueStart - aggScaledValues.scale(y.values[i]),\n      width: wholeBarRect.width,\n      height: aggScaledValues.scale(y.values[i])\n    }\n  }\n\n  return flipped ? getHorizontalStackedBar() : getVerticalStackedBar()\n}\n","import {CategoriesUserArgs, ErrorMessages, ScaledValuesCategorical} from \"respvis-core\";\nimport {createGroupedBarRect} from \"./bar-grouped-creation\";\nimport {BarBaseSeries} from \"../bar-base/bar-base-series\";\nimport {\n  BarBaseSeriesArgs,\n  BarBaseSeriesData,\n  BarBaseSeriesUserArgs,\n  validateBarBaseSeriesArgs\n} from \"../bar-base/validate-bar-base-series\";\nimport {cloneCartesianSeriesData} from \"respvis-cartesian\";\n\nexport type BarGroupedSeriesUserArgs = BarBaseSeriesUserArgs & {\n  type: 'grouped'\n  categories: CategoriesUserArgs\n}\n\nexport type BarGroupedSeriesArgs = BarBaseSeriesArgs & BarGroupedSeriesUserArgs\n\nexport type BarGroupedSeriesData = BarBaseSeriesData & {\n  categories: ScaledValuesCategorical\n}\n\nfunction validateBarGroupedSeriesArgs(args: BarGroupedSeriesArgs, series: BarGroupedSeries): BarGroupedSeriesData {\n  const data: BarGroupedSeriesData = validateBarBaseSeriesArgs(args, series) as BarGroupedSeriesData\n  if (!data.categories) throw new Error(ErrorMessages.missingArgumentForSeries)\n  return data\n}\n\nexport class BarGroupedSeries extends BarBaseSeries {\n  type: 'grouped'\n  originalData: BarGroupedSeriesData\n  renderData: BarGroupedSeriesData\n\n  constructor(args: BarGroupedSeriesArgs) {\n    super(args);\n    this.type = 'grouped'\n    this.originalData = validateBarGroupedSeriesArgs(args, this)\n    this.renderData = this.originalData\n  }\n\n  getRect(i: number) {\n    return createGroupedBarRect(this, i)\n  }\n\n  cloneToRenderData(): BarGroupedSeries {\n    this.renderData = cloneCartesianSeriesData(this.originalData)\n    return this\n  }\n\n  applyZoom(): BarGroupedSeries {\n    super.applyZoom()\n    return this\n  }\n\n  applyFilter(): BarGroupedSeries {\n    super.applyFilter()\n    return this\n  }\n\n  applyInversion(): BarGroupedSeries {\n    throw new Error('Method not implemented')\n  }\n}\n","import {scaleBand} from \"d3\";\nimport {getActiveKeys, Rect, ScaledValuesCategorical} from \"respvis-core\";\nimport {BarGroupedSeries} from \"./bar-grouped-series\";\n\nexport function createGroupedBarRect(series: BarGroupedSeries, i: number): Rect {\n  const {categories} = series.renderData\n\n  const flipped = series.responsiveState.currentlyFlipped\n  const categoryGroupValues = flipped ? series.responsiveState.verticalVals() : series.responsiveState.horizontalVals()\n  const wholeBarRect = series.responsiveState.getBarBaseRect(i)\n\n  const innerScaleDomain = getActiveKeys(categories.keysActive)\n  const innerScale = scaleBand<string>()\n    .domain(innerScaleDomain)\n    .range([0, (categoryGroupValues as ScaledValuesCategorical).scale.bandwidth()])\n    .padding(0.1); //TODO: create parameter for this\n\n  const categoryKey = categories.getCombinedKey(i)\n  const innerValue = innerScale(categoryKey) ?? 0\n\n  return  {\n    x: flipped ? wholeBarRect.x : wholeBarRect.x + innerValue,\n    y: flipped ? wholeBarRect.y + innerValue : wholeBarRect.y,\n    width: flipped ? wholeBarRect.width : innerScale.bandwidth(),\n    height: flipped ? innerScale.bandwidth() : wholeBarRect.height\n  }\n}\n","import {BarSeriesType, Rect} from \"respvis-core\";\nimport {BarBaseSeries} from \"./bar-base-series\";\nimport {\n  BarBaseSeriesArgs,\n  BarBaseSeriesData,\n  BarBaseSeriesUserArgs,\n  validateBarBaseSeriesArgs\n} from \"./validate-bar-base-series\";\nimport {cloneCartesianSeriesData} from \"respvis-cartesian\";\n\nexport type BarStandardSeriesUserArgs = BarBaseSeriesUserArgs & {\n  type?: 'standard'\n}\n\nexport type BarStandardSeriesArgs = BarBaseSeriesArgs & BarStandardSeriesUserArgs\n\nexport class BarStandardSeries extends BarBaseSeries {\n  type: BarSeriesType\n  originalData: BarBaseSeriesData\n  renderData: BarBaseSeriesData\n  constructor(args: BarStandardSeriesArgs) {\n    super(args);\n    this.originalData = validateBarBaseSeriesArgs(args, this)\n    this.renderData = this.originalData\n    this.type = args.type ?? 'standard'\n  }\n\n  getRect(i: number): Rect {\n    return this.responsiveState.getBarBaseRect(i)\n  }\n\n  cloneToRenderData(): BarStandardSeries {\n    this.renderData = cloneCartesianSeriesData(this.originalData)\n    return this\n  }\n\n  applyZoom(): BarStandardSeries {\n    super.applyZoom()\n    return this\n  }\n\n  applyFilter(): BarStandardSeries {\n    super.applyFilter()\n    return this\n  }\n\n  applyInversion(): BarStandardSeries {\n    throw new Error(\"Method not implemented.\");\n  }\n}\n","import {easeCubicOut, select, Selection} from \"d3\";\nimport {Bar} from \"../bar\";\nimport {\n  addD3TransitionClass,\n  cssLengthInPx,\n  CSSLengthUnit,\n  rectFitStroke,\n  rectMinimized,\n  rectToAttrs,\n  UnitValue\n} from \"respvis-core\";\n\nexport function joinBarSeries(\n  seriesSelection: Selection,\n  joinSelection: Selection<SVGRectElement, Bar>\n): void {\n  joinSelection.join(\n      (enter) =>\n        enter\n          .append('rect')\n          .classed('element bar', true)\n          .each((d, i, g) => rectToAttrs(select(g[i]), rectMinimized(d)))\n          .call((s) => seriesSelection.dispatch('enter', {detail: {selection: s}})),\n      undefined,\n      (exit) =>\n        exit\n          .classed('exiting', true)\n          .each((d, i, g) =>\n            select(g[i])\n              .transition('minimize')\n              .duration(250)\n              .call(addD3TransitionClass)\n              .call((t) => rectToAttrs(t, rectMinimized(d)))\n              .remove()\n          )\n          .call((s) => seriesSelection.dispatch('exit', {detail: {selection: s}}))\n    )\n    .classed('exiting', false)\n    .classed('exit-done', false)\n    .attr('data-style', (d) => d.styleClass)\n    .attr('data-key', (d) => d.key.rawKey)\n    .each((d, i, g) =>\n      select(g[i])\n        .transition('position')\n        .call(addD3TransitionClass)\n        .duration(250)\n        .ease(easeCubicOut)\n        .call((t) => {\n          const cssLength = select(g[i]).style('stroke-width')! as UnitValue<CSSLengthUnit>\n          const strokeSize = cssLengthInPx(cssLength, select(g[i]).node()!)\n          return rectToAttrs(t, rectFitStroke(d, strokeSize))\n        })\n    )\n    .call((s) => seriesSelection.dispatch('update', {detail: {selection: s}}));\n}\n","import {Selection} from \"d3\";\nimport {BarSeries} from \"./bar-series\";\nimport {BarArgs} from \"../bar\";\nimport {joinBarSeries} from \"./join-bar-series\";\nimport {BarStandardSeries} from \"./bar-base/bar-standard-series\";\nimport {createSelectionClasses, SVGGroupingElement} from \"respvis-core\";\n\nexport function renderBarSeries(parentS: Selection<SVGGroupingElement>, series: BarSeries[], ...classes: string[]) {\n  const {classString, selector} = createSelectionClasses(classes)\n\n  const seriesS = parentS.selectAll<SVGGElement, BarStandardSeries>(`${selector}.series-bar`)\n    .data(series)\n    .join('g')\n    .classed(`${classString} series-bar`, true)\n\n  const barS = seriesS.selectAll<SVGRectElement, BarArgs>('rect')\n    .data(d => d.getBars(), (d) => d.key.rawKey)\n    .call((s) => joinBarSeries(seriesS, s))\n\n  return {seriesS, barS}\n}\n","import {CartesianChartData, CartesianChartUserArgs, CartesianRenderer, validateCartesianChart} from \"respvis-cartesian\";\nimport {BarSeries, BarSeriesUserArgs} from \"../bar-series/bar-series\";\nimport {BarStackedSeries} from \"../bar-series/bar-stacked/bar-stacked-series\";\nimport {BarGroupedSeries} from \"../bar-series/bar-grouped/bar-grouped-series\";\nimport {BarStandardSeries} from \"../bar-series\";\n\nexport interface BarChartUserArgs extends Omit<CartesianChartUserArgs, 'series'> {\n  series: BarSeriesUserArgs\n}\n\nexport interface BarChartArgs extends BarChartUserArgs {\n  renderer: CartesianRenderer\n}\n\nexport interface BarChartData extends Omit<CartesianChartData, 'series'> {\n  series: BarSeries\n}\n\nexport function validateBarChart(args: BarChartArgs): BarChartData {\n  const {renderer, x, y,\n    legend, breakpoints,\n    title, subTitle\n  } = args\n  const series = args.series.type === 'stacked' ?\n    new BarStackedSeries({...args.series, key: 's-0', renderer}) : args.series.type === 'grouped' ?\n    new BarGroupedSeries({...args.series, key: 's-0', renderer}) :\n    new BarStandardSeries({...args.series, key: 's-0', renderer})\n  const cartesianData =\n    validateCartesianChart({renderer, series, x, y, legend, breakpoints, title, subTitle})\n  return {\n    ...cartesianData,\n    series\n  }\n}\n","import {Selection} from \"d3\";\nimport {BarChartData, BarChartUserArgs, validateBarChart} from \"./validate-bar-chart\";\nimport {CartesianChartMixin} from \"respvis-cartesian\";\nimport {applyMixins, Chart, DataSeriesChartMixin, validateWindow, Window} from \"respvis-core\";\nimport {renderBarSeries} from \"../bar-series\";\n\ntype WindowSelection = Selection<HTMLDivElement, Window & BarChartData>\ntype ChartSelection = Selection<SVGSVGElement, Window & BarChartData>\n\nexport interface BarChart extends CartesianChartMixin, DataSeriesChartMixin {}\nexport class BarChart extends Chart {\n  constructor(windowSelection: Selection<HTMLDivElement>, data: BarChartUserArgs) {\n    super()\n    this._windowS = windowSelection as WindowSelection\n    this.revalidate(data)\n  }\n  _windowS: WindowSelection\n  get windowS(): WindowSelection { return this._windowS }\n  _chartS?: ChartSelection\n  get chartS(): ChartSelection {\n    return ((this._chartS && !this._chartS.empty()) ? this._chartS :\n      this.layouterS.selectAll('svg.chart')) as ChartSelection\n  }\n\n  protected override renderContent() {\n    this.renderSeriesChartComponents()\n\n    const series = this.chartS.datum().series.cloneToRenderData().applyZoom().applyFilter()\n    const {seriesS, barS} = renderBarSeries(this.drawAreaS, [series])\n\n    this.addAllSeriesFeatures(seriesS)\n    this.drawAreaS.selectAll('.series-label')\n      .attr( 'layout-strategy', barS.data()[0]?.labelData?.positionStrategy ?? null)\n      .attr( 'data-inverted', barS.data()[0]?.inverted ? 'true' : null)\n\n    this.renderCartesianComponents()\n  }\n\n  public revalidate(data: BarChartUserArgs) {\n    const initialWindowData = validateWindow({...data, type: 'bar', renderer: this})\n    const chartData = validateBarChart({...data, renderer: this})\n    this.windowS.datum({...initialWindowData, ...chartData})\n  }\n}\n\napplyMixins(BarChart, [CartesianChartMixin, DataSeriesChartMixin])\n","import {CartesianResponsiveState, CartesianResponsiveStateArgs} from \"respvis-cartesian\";\nimport {PointSeries} from \"./point-series\";\nimport {BubbleRadius} from \"../../data/radius\";\nimport {BreakpointProperty, Circle, elementFromSelection} from \"respvis-core\";\n\ntype PointResponsiveStateArgs = CartesianResponsiveStateArgs & {\n  series: PointSeries\n}\n\nexport class PointResponsiveState extends CartesianResponsiveState {\n  protected _series: PointSeries\n\n  constructor(args: PointResponsiveStateArgs) {\n    super(args)\n    this._series = args.series\n  }\n\n  update() {\n    super.update();\n\n    const radii = this._series.originalData.radii\n    const chart = this._series.renderer.chartS\n\n\n    updateRadii()\n\n    chart.style('--max-radius', this.getMaxRadius() + 'px')\n\n    function updateRadii() {\n      if (typeof radii === 'number') return\n      if (radii instanceof BreakpointProperty) {\n        return\n      }\n      interpolateBubbleRadius(radii)\n    }\n\n    function interpolateBubbleRadius(radii: BubbleRadius) {\n      if (!(radii.extrema instanceof BreakpointProperty)) {\n        radii.scale.range([radii.extrema.minimum, radii.extrema.maximum]); return\n      }\n\n      let {preBreakpoint, postBreakpoint,\n      firstBreakpoint, lastBreakpoint} =\n        radii.extrema.getRespValInterpolated({chart})\n\n      if (postBreakpoint === null) {\n        radii.scale.range([lastBreakpoint.value.minimum, lastBreakpoint.value.maximum]); return\n      }\n      if (preBreakpoint === null) {\n        radii.scale.range([firstBreakpoint.value.minimum, firstBreakpoint.value.maximum]); return\n      }\n\n      const elementLength = elementFromSelection(chart).getBoundingClientRect()[radii.extrema.dependentOn]\n      const breakpointDiff = postBreakpoint.length - preBreakpoint.length\n      const currentDiff = elementLength - preBreakpoint.length\n      const minimumDiff = postBreakpoint.value.minimum - preBreakpoint.value.minimum\n      const maximumDiff = postBreakpoint.value.maximum - preBreakpoint.value.maximum\n\n      const minimum = preBreakpoint.value.minimum + currentDiff / breakpointDiff * minimumDiff\n      const maximum = preBreakpoint.value.maximum + currentDiff / breakpointDiff * maximumDiff\n      radii.scale.range([minimum, maximum])\n    }\n  }\n\n  getRadius(i: number): number {\n    const radii = this._series.originalData.radii\n    const chart = this._series.renderer.chartS\n    if (typeof radii === 'number') return radii\n    if (radii instanceof BreakpointProperty) {\n      return interpolateInterpolatedRadius(radii)\n    }\n    return radii.scale(radii.values[i])\n\n    function interpolateInterpolatedRadius(radii: BreakpointProperty<number>) {\n      let {preBreakpoint, postBreakpoint,\n        firstBreakpoint, lastBreakpoint} =\n        radii.getRespValInterpolated({chart})\n\n      if (postBreakpoint === null) {\n        return lastBreakpoint.value\n      }\n      if (preBreakpoint === null) {\n        preBreakpoint = firstBreakpoint\n        preBreakpoint.length = 0\n      }\n\n      const elementLength = elementFromSelection(chart).getBoundingClientRect()[radii.dependentOn]\n      const breakpointLengthDiff = postBreakpoint.length - preBreakpoint.length\n      const currentLengthDiff = elementLength - preBreakpoint.length\n      const valueDiff = postBreakpoint.value - preBreakpoint.value\n\n      return preBreakpoint.value + currentLengthDiff / breakpointLengthDiff * valueDiff\n    }\n  }\n\n  getMaxRadius() {\n    const radii = this._series.originalData.radii\n    return (typeof radii === 'number') ? radii :\n      radii instanceof BreakpointProperty ? this.getRadius(0) :\n        Math.max(...radii.scale.range())\n  }\n\n  getRadiusValue(i: number) {\n    const radii = this._series.renderData.radii\n    return typeof radii === 'number' ? radii :\n      radii instanceof BreakpointProperty ? undefined :\n        radii.values[i]\n  }\n\n  getPointCircle(i: number): Circle {\n    return {\n      center: {\n        x: this.horizontalVals().getScaledValue(i),\n        y: this.verticalVals().getScaledValue(i),\n      },\n      radius: this.getRadius(i) ?? 5\n    }\n  }\n}\n","import {\n  BreakpointProperty,\n  BreakpointPropertyUserArgs,\n  isBreakpointPropertyUserArgsResponsive,\n  validateBreakpointProperty\n} from \"respvis-core\";\n\nexport type BaseRadiusUserArgs = BreakpointPropertyUserArgs<number>\nexport type BaseRadius = BreakpointProperty<number> | number\n\nexport function isBaseRadiusUserArgs(args: any): args is BaseRadiusUserArgs {\n  return typeof args === 'number' || isBreakpointPropertyUserArgsResponsive(args)\n}\n\nexport function validateBaseRadius(args?: BaseRadiusUserArgs): BaseRadius {\n  return validateBreakpointProperty(args || 5)\n}\n","export type Extrema = {\n  minimum: number\n  maximum: number\n}\n\nexport function isExtrema(args: any): args is Extrema {\n  return typeof args.minimum === 'number' && typeof args.maximum === 'number'\n}\n","import {\n  BaseAxis,\n  BaseAxisUserArgs,\n  DataSeries,\n  ErrorMessages,\n  Renderer,\n  ScaledValuesNumeric,\n  ScaledValuesNumericUserArgs,\n  ScaleNumeric,\n  validateBaseAxis,\n  validateScaledValuesSpatial\n} from \"respvis-core\";\nimport {\n  BreakpointProperty,\n  BreakpointPropertyOptional,\n  BreakpointPropertyUserArgs,\n  validateBreakpointProperty\n} from \"respvis-core\";\nimport {Extrema, isExtrema} from \"./extrema\";\nimport {scaleLinear} from \"d3\";\n\nexport type BubbleRadiusUserArgs = ScaledValuesNumericUserArgs & {\n  extrema: BreakpointPropertyUserArgs<Extrema>\n  axis: BaseAxisUserArgs\n}\n\nexport type BubbleRadiusArgs = BubbleRadiusUserArgs & {\n  renderer: Renderer\n  series: DataSeries\n}\n\ntype LinearRangeAxis = Omit<BaseAxis, 'scaledValues'> & {\n  scaledValues: ScaledValuesNumeric\n}\n\nexport type BubbleRadius = Omit<BubbleRadiusArgs, 'series' | 'renderer' | 'axis' | 'extrema'> & {\n  tag: 'bubble'\n  axis: LinearRangeAxis,\n  scale: ScaleNumeric\n  extrema: BreakpointPropertyOptional<Extrema>\n}\n\nexport function validateBubbleRadius(args: BubbleRadiusArgs): BubbleRadius {\n  const {series, renderer, values} = args\n  const extrema = validateBubbleRadiusExtrema(args.extrema)\n\n  const scale = args.scale ??\n    scaleLinear().domain([Math.min(...values), Math.max(...values)]).nice()\n\n  const axis = validateBaseAxis({...args.axis, renderer, series,\n    scaledValues: validateScaledValuesSpatial({values},'ar-0'),\n  }) as LinearRangeAxis\n\n  return {extrema, values, scale, axis, tag: 'bubble'}\n}\n\nfunction validateBubbleRadiusExtrema(extremaArgs: BreakpointPropertyUserArgs<Extrema>) {\n  const extrema = validateBreakpointProperty(extremaArgs)\n  if (extrema instanceof BreakpointProperty) {\n    const mapping = extrema.mapping\n    Object.values(mapping).forEach((values) => {\n      if (values.minimum > values.maximum) throw new Error(ErrorMessages.invalidExtremaCombination)\n    })\n    return extrema\n  }\n  if (!isExtrema(extrema)) throw new Error(ErrorMessages.invalidResponsiveValue)\n  return extrema\n}\n","import {Label} from \"respvis-core\";\nimport {Point} from \"./point\";\n\ntype PointLabelPositionHorizontal = 'left' | 'center' | 'right'\ntype PointLabelPositionVertical = 'top' | 'center' | 'bottom'\n\n//TODO: offset as array as in bar labels?\nexport type PointLabelsUserArgs = {\n  offset?: number\n  positionStrategyHorizontal?: PointLabelPositionHorizontal\n  positionStrategyVertical?: PointLabelPositionVertical\n  format?: (point: Point, label: string) => string\n  values: string[]\n}\n\nexport type PointLabelsData = Required<PointLabelsUserArgs>\n\nexport type PointLabelData = Omit<PointLabelsData, 'values'> & {\n  value: string\n}\n\nexport type PointLabel = Label & PointLabelData\n\nexport class PointLabelsDataCollection implements PointLabelsData {\n  values: string[]\n  offset: number\n  positionStrategyHorizontal: PointLabelPositionHorizontal\n  positionStrategyVertical: PointLabelPositionVertical\n  format: (bar: Point, label: string) => string\n  constructor(args: PointLabelsUserArgs) {\n    this.values = args.values\n    this.offset = args.offset ?? 0\n    this.positionStrategyHorizontal = args.positionStrategyHorizontal ?? 'center'\n    this.positionStrategyVertical = args.positionStrategyVertical ?? 'top'\n    this.format = args.format ?? ((point, label) => label)\n  }\n\n  getLabelData(i: number) : PointLabelData {\n    return { value: this.values[i], offset: this.offset,\n      positionStrategyHorizontal: this.positionStrategyHorizontal, positionStrategyVertical: this.positionStrategyVertical,\n      format: this.format\n    }\n  }\n}\n","import {\n  CartesianSeriesArgs,\n  CartesianSeriesData,\n  CartesianSeriesUserArgs,\n  cloneCartesianSeriesData,\n  validateCartesianSeriesArgs\n} from \"respvis-cartesian\";\nimport {isBaseRadiusUserArgs, Radius, RadiusUserArgs, validateBaseRadius, validateBubbleRadius} from \"../../data\";\nimport {PointLabelsDataCollection, PointLabelsUserArgs} from \"../point-label\";\nimport {DataSeriesTooltipGenerator} from \"respvis-tooltip\";\nimport type {Point} from \"../point\";\nimport {PointSeries} from \"./point-series\";\n\nexport type PointSeriesUserArgs = Omit<CartesianSeriesUserArgs, 'markerTooltipGenerator'> & {\n  radii?: RadiusUserArgs\n  original?: PointSeries\n  labels?: PointLabelsUserArgs\n  markerTooltipGenerator?: DataSeriesTooltipGenerator<SVGCircleElement, Point>\n}\nexport type PointSeriesArgs = PointSeriesUserArgs & CartesianSeriesArgs\nexport type PointSeriesData = CartesianSeriesData & {\n  radii: Radius\n  labels?: PointLabelsDataCollection\n  markerTooltipGenerator?: DataSeriesTooltipGenerator<SVGCircleElement, Point>\n}\n\nexport function validatePointSeriesArgs(args: PointSeriesArgs, series: PointSeries): PointSeriesData {\n  return {\n    ...validateCartesianSeriesArgs(args, series),\n    radii: (isBaseRadiusUserArgs(args.radii) || !args.radii) ? validateBaseRadius(args.radii) :\n      validateBubbleRadius({...args.radii, renderer: args.renderer, series}),\n    markerTooltipGenerator: args.markerTooltipGenerator,\n    labels: args.labels ? new PointLabelsDataCollection(args.labels) : undefined,\n  }\n}\n\nexport function clonePointSeriesData(original: PointSeriesData) {\n  return cloneCartesianSeriesData(original)\n}\n","import {DataSeries, LegendSelection} from \"respvis-core\";\nimport {CartesianRenderer, CartesianSeries} from \"respvis-cartesian\";\nimport {PointResponsiveState} from \"./point-responsive-state\";\nimport {renderRadiusScale} from \"./render-radius-scale\";\nimport {clonePointSeriesData, PointSeriesArgs, PointSeriesData, validatePointSeriesArgs} from \"./validate-point-series\";\n\nexport class PointSeries extends CartesianSeries {\n  renderer: CartesianRenderer\n  originalData: PointSeriesData\n  renderData: PointSeriesData\n  responsiveState: PointResponsiveState\n\n  constructor(args: PointSeriesArgs) {\n    super()\n    this.originalData = validatePointSeriesArgs(args, this)\n    this.renderData = this.originalData\n    this.renderer = args.renderer\n    this.responsiveState = new PointResponsiveState({\n      series: this,\n      flipped: ('flipped' in args) ? args.flipped : false\n    })\n  }\n\n  renderLegendInfo(legendS: LegendSelection) {\n    renderRadiusScale(legendS, this)\n  }\n\n  cloneToRenderData() {\n    this.renderData = clonePointSeriesData(this.originalData)\n    return this\n  }\n\n  applyZoom(): PointSeries {\n    return super.applyZoom() as PointSeries\n  }\n\n  applyFilter(): PointSeries {\n    return super.applyFilter() as PointSeries\n    //TODO\n    // if (typeof clone.radii === 'object' && 'tag' in clone.radii) {\n    //   const scaledValues = clone.radii.axis.scaledValues.cloneFiltered()\n    //   const axis: BaseAxis = {...clone.radii.axis, scaledValues}\n    //   clone.radii = {...clone.radii, axis}\n    // }\n  }\n\n  applyInversion(): DataSeries {\n    throw new Error(\"Method not implemented.\");\n  }\n}\n","import {PointSeries} from \"./point-series\";\nimport {\n  Axis,\n  BreakpointProperty,\n  cssVarDefaultsKeys,\n  LegendSelection,\n  rectFromString,\n  renderAxisLayout\n} from \"respvis-core\";\n\nexport function renderRadiusScale(legendS: LegendSelection, series: PointSeries) {\n  const {radii} = series.renderData\n  if (typeof radii === 'number' || radii instanceof BreakpointProperty) return\n\n  const [minRadius, maxRadius] = radii.scale.range()\n\n  legendS.style(cssVarDefaultsKeys[\"--min-radius\"], `${minRadius}px`)\n    .style(cssVarDefaultsKeys[\"--max-radius\"], `${maxRadius}px`)\n\n  const legendRadiusScaleS = legendS.selectAll(\".legend__radius-scale\")\n    .data([null])\n    .join('g')\n    .classed('legend__radius-scale', true)\n\n  const legendRadiusScalePointS = legendRadiusScaleS\n    .selectAll('.elements')\n    .data([null])\n    .join('g')\n    .classed('elements', true)\n    .selectAll('.element.point')\n    .data([minRadius, maxRadius])\n    .join('circle')\n    .classed('element', true)\n    .classed('point', true)\n    .attr('r', d => d)\n\n  const {width, height} = rectFromString(legendRadiusScaleS.attr('bounds') || '0, 0, 600, 400')\n  radii.axis.scaledValues.scale.range([0, width])\n  const legendColorScaleAxisS = legendRadiusScaleS.selectAll<SVGGElement, Axis>('.axis')\n    .data([radii.axis])\n    .join('g')\n    .call((s) => renderAxisLayout(s, 'horizontal'))\n    .classed('axis', true)\n}\n","import {CartesianChartData, CartesianChartUserArgs, CartesianRenderer, validateCartesianChart} from \"respvis-cartesian\";\nimport {PointSeries} from \"../point-series/point-series\";\nimport {BreakpointProperty} from \"respvis-core\";\nimport {BubbleRadius} from \"../../data/radius\";\nimport {PointSeriesUserArgs} from \"../point-series/validate-point-series\";\n\nexport type ScatterPlotUserArgs = Omit<CartesianChartUserArgs, 'series'> & {\n  series: PointSeriesUserArgs\n}\n\nexport type ScatterPlotArgs = ScatterPlotUserArgs & {\n  renderer: CartesianRenderer\n}\n\nexport type ScatterPlotData = Omit<CartesianChartData, 'series'> & {\n  series: PointSeries;\n}\n\nexport function validateScatterPlot(scatterArgs: ScatterPlotArgs): ScatterPlotData {\n  const {renderer, x, y,\n    legend, breakpoints,\n    title, subTitle\n  } = scatterArgs\n  const series = new PointSeries({...scatterArgs.series, key: 's-0', renderer})\n  const cartesianData =\n    validateCartesianChart({renderer, series, x, y, legend, breakpoints, title, subTitle})\n\n\n  const {radii, color} = series.originalData\n  const hasBubbleRadius = typeof radii !== 'number' && !(radii instanceof BreakpointProperty)\n  cartesianData.getAxes = !hasBubbleRadius ? cartesianData.getAxes : function (this:ScatterPlotData) {\n    return [this.x, this.y,\n      ...(this.series.originalData.color ? [this.series.originalData.color.axis] : []),\n      (this.series.originalData.radii as BubbleRadius).axis\n    ]\n  }\n  return {\n    ...cartesianData,\n    series,\n  }\n}\n","import {select, Selection} from \"d3\";\nimport {Point} from \"../point\";\nimport {\n  addD3TransitionClass,\n  addD3TransitionClassForSelection,\n  circleMinimized,\n  circleToAttrs,\n  cssVarFromSelection\n} from \"respvis-core\";\n\n//TODO: points size to css transition. Look at lines for reference!\n//TODO: test use cases for scaling\nexport function joinPointSeries(seriesS: Selection, joinS: Selection<Element, Point>) {\n  const tDurationString = cssVarFromSelection(seriesS, '--transition-time-line-enter-ms')\n  const tDuration = tDurationString ? parseInt(tDurationString) : 250\n\n  joinS.join((enter) => enter.append('circle')\n      .classed('element point', true)\n      .each((d, i, g) => {\n        const s = select<SVGCircleElement, Point>(g[i])\n        circleToAttrs(s, circleMinimized(d))\n      })\n      .call(addD3TransitionClassForSelection)\n      .call(update)\n      .call((s) => seriesS.dispatch('enter', {detail: {selection: s}}))\n    , undefined,\n    (exit) =>\n      exit.classed('exiting', true)\n        .transition().duration(tDuration)\n        .call(addD3TransitionClass)\n        .each((d, i, g) => {\n          const t = select(g[i])\n            .transition('minimize')\n            .duration(tDuration)\n            .call(addD3TransitionClass)\n          circleToAttrs(t, circleMinimized(d))\n        }).on('end', () => {\n        exit.remove()\n      }).call((s) => seriesS.dispatch('exit', {detail: {selection: s}}))\n  )\n\n  joinS.call(update)\n\n  function update(updateS: Selection<Element, Point>) {\n    updateS\n      .attr('cx', (d) => d.center.x)\n      .attr('cy', (d) => d.center.y)\n      .attr('data-style', (d) => !d.color ? d.styleClass : null)\n      .attr('fill', (d) => d.color ? d.color : null)\n      .attr('data-key', (d) => d.key.rawKey)\n      .classed('exiting', false)\n      .classed('exit-done', false)\n      .call((s) => seriesS.dispatch('update', {detail: {selection: s}}))\n      .each(function (d, i, g) {\n        const s = select<Element, Point>(g[i])\n        if (s.classed('mid-d3-transit')) {\n          s.interrupt()\n            .transition('update-radius')\n            .duration(tDuration)\n            .attr('r', d => d.radius)\n            .call(addD3TransitionClass)\n        } else {\n          s.attr('r', (d) => d.radius)\n        }\n      })\n  }\n}\n","import {Circle, Key, MarkerPrimitive, MarkerPrimitiveArgs, Position} from \"respvis-core\";\nimport {PointLabel, PointLabelData} from \"./point-label\";\n\nexport type PointArgs = Circle & MarkerPrimitiveArgs & {\n  xValue: any\n  yValue: any\n  radiusValue?: any\n  colorValue?: any\n  label?: PointLabelData\n}\n\nexport class Point implements Circle, MarkerPrimitive {\n  xValue: any\n  yValue: any\n  center: Position;\n  category?: string\n  categoryFormatted?: string\n  radius: number;\n  radiusValue?: any\n  color?: number | undefined;\n  colorValue?: any;\n  styleClass: string\n  key: Key\n  labelData?: PointLabelData\n\n  constructor(args: PointArgs) {\n    this.xValue = args.xValue\n    this.yValue = args.yValue\n    this.category = args.category\n    this.categoryFormatted = args.categoryFormatted\n    this.radiusValue = args.radiusValue\n    this.styleClass = args.styleClass\n    this.key = args.key\n    this.center = args.center\n    this.radius = args.radius\n    this.color = args.color\n    this.colorValue = args.colorValue\n    this.labelData = args.label\n  }\n\n  getLabel(): PointLabel | [] {\n    if (!this.labelData) return []\n    return {\n      ...this.labelData,\n      x: this.getLabelX(),\n      y: this.getLabelY(),\n      marker: this,\n      text: this.labelData.format(this, this.labelData.value),\n    }\n  }\n\n  private getLabelX() {\n    const {positionStrategyHorizontal, offset} = this.labelData!\n    return positionStrategyHorizontal === 'left' ? this.center.x - this.radius - offset :\n      positionStrategyHorizontal === 'right' ? this.center.x + this.radius + offset :\n        this.center.x\n  }\n\n  private getLabelY() {\n    const {positionStrategyVertical, offset} = this.labelData!\n    return positionStrategyVertical === 'top' ? this.center.y - this.radius - offset :\n      positionStrategyVertical === 'bottom' ? this.center.y + this.radius + offset :\n        this.center.y\n  }\n}\n","import {Point} from \"../point\";\nimport {defaultStyleClass, Key} from \"respvis-core\";\nimport {PointSeries} from \"./point-series\";\n\nexport function createPoints<T extends boolean, R = T extends false ? Point[] : Point[][]>\n(series: PointSeries, grouped: T): R {\n  const {key: seriesKey, keysActive, categories,\n    x, y, color, radii,\n  } = series.renderData\n\n  const optionalColorValues = color?.axis.scaledValues\n  const optionalRadiiValues = typeof radii === 'object' && 'tag' in radii ? radii.axis.scaledValues : undefined\n\n  const pointsSingleGroup: Point[] = []\n  const pointsGrouped: Point[][] = new Array(categories ? categories.categories.categoryArray.length : 1)\n    .fill(0).map(() => [])\n\n  if (!keysActive[seriesKey] && !grouped) return pointsSingleGroup as R\n  if (!keysActive[seriesKey] && grouped) return pointsGrouped as R\n\n  for (let i = 0; i < x.values.length; i++) {\n    if (categories && !categories.isValueActive(i)) continue\n    if (!x.isValueActive(i) || !y.isValueActive(i) ||\n      !(optionalColorValues?.isValueActive(i) ?? true) || !(optionalRadiiValues?.isValueActive(i) ?? true)) continue\n    const point = createPoint(series, i)\n    pointsSingleGroup.push(point)\n    if (pointsGrouped && categories) {\n      const category = categories.values[i]\n      const order = categories.categories.categoryMap[category].order\n      pointsGrouped[order].push(point)\n    } else pointsGrouped[0].push(point)\n  }\n\n  return (grouped === false) ? pointsSingleGroup as R : pointsGrouped! as R\n}\n\nfunction createPoint(series: PointSeries, i: number) {\n  const {renderData, responsiveState} = series\n  const {categories, color, labels} = renderData\n  const category = categories?.values[i]\n  return new Point({\n    ...responsiveState.getPointCircle(i),\n    xValue: responsiveState.horizontalVals().values[i],\n    yValue: responsiveState.verticalVals().values[i],\n    color: color?.scale(color?.values[i]),\n    colorValue: color?.values[i],\n    radiusValue: responsiveState.getRadiusValue(i),\n    key: new Key(renderData.getCombinedKey(i) + ` i-${i}`),\n    styleClass: categories?.getStyleClass(i) ?? defaultStyleClass,\n    category,\n    categoryFormatted: category ? categories?.categories.categoryMap[category].formatValue : undefined,\n    label: labels?.getLabelData(i)\n  })\n}\n","import {Selection} from \"d3\";\nimport {Point} from \"../point\";\nimport {joinPointSeries} from \"./join-point-series\";\nimport {createSelectionClasses, SVGGroupingElement} from \"respvis-core\";\nimport {createPoints} from \"./create-points\";\nimport {PointSeries} from \"./point-series\";\n\nexport function renderPointSeries(parentS: Selection<SVGGroupingElement>, series: PointSeries[], ...classes: string[]) {\n  const {classString, selector} = createSelectionClasses(classes)\n\n  const seriesS = parentS.selectAll<SVGSVGElement, PointSeries>(`${selector}.series-point`)\n    .data<PointSeries>(series)\n    .join('g')\n    .classed(`${classString} series-point`, true)\n    .attr('data-ignore-layout-children', true)\n\n  const pointS = seriesS.selectAll<SVGCircleElement, Point>('.point')\n    .data((d) => createPoints(d, false), (d) => d.key.rawKey)\n    .call((s) => joinPointSeries(seriesS, s));\n\n  return {seriesS, pointS}\n}\n","import {Selection} from 'd3';\nimport {ScatterPlotData, ScatterPlotUserArgs, validateScatterPlot} from \"./validate-scatter-plot\";\nimport {CartesianChartMixin} from \"respvis-cartesian\";\nimport {addSeriesHighlighting, applyMixins, Chart, DataSeriesChartMixin, validateWindow, Window} from \"respvis-core\";\nimport {renderPointSeries} from \"../point-series/render-point-series\";\n\ntype WindowSelection = Selection<HTMLElement, Window & ScatterPlotData>;\ntype ChartSelection = Selection<SVGSVGElement, Window & ScatterPlotData>;\n\nexport interface ScatterPlot extends CartesianChartMixin, DataSeriesChartMixin {\n}\n\nexport class ScatterPlot extends Chart {\n  constructor(windowSelection: Selection<HTMLDivElement>, data: ScatterPlotUserArgs) {\n    super()\n    this._windowS = windowSelection as WindowSelection\n    this.revalidate(data)\n  }\n\n  _windowS: WindowSelection\n  get windowS(): WindowSelection {\n    return this._windowS\n  }\n\n  _chartS?: ChartSelection\n  get chartS(): ChartSelection {\n    return ((this._chartS && !this._chartS.empty()) ? this._chartS :\n      this.layouterS.selectAll('svg.chart')) as ChartSelection\n  }\n\n  protected override renderContent() {\n    this.renderSeriesChartComponents()\n\n    const series = this.chartS.datum().series.cloneToRenderData().applyFilter().applyZoom()\n    const {seriesS, pointS} = renderPointSeries(this.drawAreaS, [series])\n\n    this.addAllSeriesFeatures(seriesS)\n    seriesS.call(addSeriesHighlighting)\n\n    this.drawAreaS.selectAll('.series-label')\n      .attr( 'layout-strategy-horizontal', pointS.data()[0]?.labelData?.positionStrategyHorizontal ?? null)\n      .attr( 'layout-strategy-vertical', pointS.data()[0]?.labelData?.positionStrategyVertical ?? null)\n\n    this.renderCartesianComponents()\n  }\n\n  public revalidate(data: ScatterPlotUserArgs): void {\n    const initialWindowData = validateWindow({...data, type: 'point', renderer: this})\n    const chartData = validateScatterPlot({...data, renderer: this})\n    this.windowS.datum({...initialWindowData, ...chartData})\n  }\n}\n\napplyMixins(ScatterPlot, [CartesianChartMixin, DataSeriesChartMixin])\n","import {CartesianSeriesArgs, CartesianSeriesUserArgs} from \"respvis-cartesian\";\nimport {clonePointSeriesData, type Point, PointLabelsUserArgs, PointSeries, RadiusUserArgs} from \"respvis-point\";\nimport {DataSeriesTooltipGenerator} from \"respvis-tooltip\";\nimport {DataSeries} from \"respvis-core\";\n\nexport type LineSeriesUserArgs = Omit<CartesianSeriesUserArgs, 'markerTooltipGenerator'> & {\n  labels?: PointLabelsUserArgs\n  radii?: RadiusUserArgs\n  markerTooltipGenerator?: DataSeriesTooltipGenerator<SVGCircleElement, Point>\n}\n\nexport type LineSeriesArgs = LineSeriesUserArgs & Omit<CartesianSeriesArgs, 'original'> & {\n}\n\nexport class LineSeries extends PointSeries {\n\n  cloneToRenderData() {\n    this.renderData = clonePointSeriesData(this.originalData)\n    return this\n  }\n\n  applyZoom(): PointSeries {\n    return super.applyZoom() as PointSeries\n  }\n\n  applyFilter(): PointSeries {\n    return super.applyFilter() as PointSeries\n  }\n\n  applyInversion(): DataSeries {\n    throw new Error(\"Method not implemented.\");\n  }\n}\n\n","import {CartesianChartData, CartesianChartUserArgs, CartesianRenderer, validateCartesianChart} from \"respvis-cartesian\";\nimport {LineSeries, LineSeriesUserArgs} from \"../line-series/line-series\";\n\nexport type LineChartUserArgs =  Omit<CartesianChartUserArgs, 'series'> & {\n  series: LineSeriesUserArgs\n}\n\nexport type LineChartArgs = LineChartUserArgs & {\n  renderer: CartesianRenderer\n}\n\nexport type LineChartData = Omit<CartesianChartData, 'series'> & {\n  series: LineSeries;\n}\n\nexport function validateLineChart(args: LineChartArgs): LineChartData {\n  const {renderer, x, y,\n    legend, breakpoints,\n    title, subTitle\n  } = args\n  const series = new LineSeries({...args.series, key: 's-0', renderer})\n  const cartesianData =\n    validateCartesianChart({renderer, series, x, y, legend, breakpoints, title, subTitle})\n\n  return {\n    ...cartesianData,\n    series,\n  }\n}\n","import {select, Selection} from \"d3\";\nimport {Line} from \"./line\";\nimport {\n  addCSSTransitionEnterClass,\n  addCSSTransitionExitClass,\n  cancelExitClassOnUpdate,\n  cssVarFromSelection,\n  lineToPath\n} from \"respvis-core\";\n\nexport function joinLineSeries(seriesS: Selection<Element>, joinS: Selection<Element, Line>) {\n  const tDurationString = cssVarFromSelection(seriesS, '--transition-time-line-enter-ms')\n  const tDuration = tDurationString ? parseInt(tDurationString) : 250\n  joinS\n    .join(\n      (enter) =>\n        enter.append('path')\n          .classed('element line', true)\n          .call(s => {\n            addCSSTransitionEnterClass(s, tDuration)\n          })\n          .call((s) => seriesS.dispatch('enter', {detail: {selection: s}})),\n      (update) => update.call(() => {\n        update.call(cancelExitClassOnUpdate)\n      }),\n      (exit) =>\n        exit.call((s) => {\n          addCSSTransitionExitClass(s, tDuration).on('end.Remove', function() {\n            if (!select(this).classed('exit-done')) return\n            exit.remove().call((s) => seriesS.dispatch('exit', {detail: {selection: s}}))\n          })\n        }))\n    .each((line, i, g) => lineToPath(g[i], line.positions))\n    .attr('data-style', (d) => d.styleClass)\n    .attr('data-key', (d) => d.key)\n    .call((s) => seriesS.dispatch('update', {detail: {selection: s}}))\n    .on('pointerover.serieslinehighlight pointerout.serieslinehighlight', (e: PointerEvent) =>\n      (<Element>e.target).classList.toggle('highlight', e.type.endsWith('over'))\n    )\n}\n","import {Selection} from \"d3\";\nimport {createPoints, joinPointSeries, Point} from \"respvis-point\";\nimport {LineSeries} from \"./line-series\";\nimport {combineKeys, createSelectionClasses, defaultStyleClass, SVGGroupingElement} from \"respvis-core\";\nimport {Line} from \"./line\";\nimport {joinLineSeries} from \"./join-line-series\";\n\nexport function renderLineSeries(parentS: Selection<SVGGroupingElement>, series: LineSeries[], ...classes: string[]) {\n  const {classString, selector} = createSelectionClasses(classes)\n  const seriesS = parentS\n    .selectAll<SVGGElement, LineSeries>(`${selector}.series-line`)\n    .data(series)\n    .join('g')\n    .classed(`${classString} series-line`, true)\n    .attr('data-ignore-layout-children', true)\n\n  const createSelection = (type: 'line-line' | 'line-point') => {\n    return seriesS\n      .selectAll<SVGGElement, LineSeries>(`.series-${type}`)\n      .data<LineSeries>(d => [d])\n      .join('g')\n      .classed(`series-${type}`, true)\n  }\n\n  seriesS.each(function(d) {\n    const lineS = createSelection('line-line')\n    const pointS = createSelection('line-point')\n    const pointGroups = createPoints(d, true)\n    renderPointSubSeries(pointS, pointGroups)\n    renderLineSubSeries(lineS, pointGroups)\n  })\n\n  const lineSeriesS = seriesS.selectAll<SVGSVGElement, LineSeries>('.series-line-line')\n  const lineS = lineSeriesS.selectAll<SVGSVGElement, Line>('.line')\n  const pointSeriesS = seriesS.selectAll<SVGSVGElement, LineSeries>('.series-line-point')\n  const pointS = pointSeriesS.selectAll<SVGSVGElement, Point>('.point')\n\n  return { seriesS, lineSeriesS, lineS, pointSeriesS, pointS}\n}\n\nfunction renderPointSubSeries(pointS: Selection<SVGGElement, LineSeries>, pointGroups: Point[][]) {\n  pointS.selectAll('.point-category')\n    .data(pointGroups)\n    .join('g')\n    .classed('point-category', true)\n    .selectAll<SVGCircleElement, Point>('.point')\n    .data(d => d, d => d.key.rawKey)\n    .call((s) => joinPointSeries(pointS, s))\n}\n\nfunction renderLineSubSeries(seriesS: Selection<SVGGElement, LineSeries>, pointGroups: Point[][]) {\n  const renderData = seriesS.datum().renderData\n  const categoryKeys = renderData.getMergedKeys()\n  const keySelectors = categoryKeys.length > 0 ?\n    categoryKeys.map(key => combineKeys([renderData.key, key])) : [renderData.key]\n\n  const lines: Line[] = keySelectors.map((key, i) => ({\n    key,\n    positions: pointGroups[i].map(point => point.center),\n    styleClass: pointGroups[i][0]?.styleClass ?? defaultStyleClass\n  })).filter(line => line.positions.length !== 0)\n\n  seriesS.selectAll<SVGPathElement, Line>('path')\n    .data(lines, (d) => d.key)\n    .call(s => joinLineSeries(seriesS, s))\n}\n","import {Selection} from 'd3';\nimport {CartesianChartMixin} from \"respvis-cartesian\";\nimport {LineChartData, LineChartUserArgs, validateLineChart} from \"./validate-line-chart\";\nimport {addSeriesHighlighting, applyMixins, Chart, DataSeriesChartMixin, validateWindow, Window} from \"respvis-core\";\nimport {renderLineSeries} from \"../line-series\";\n\nexport type WindowSelection = Selection<HTMLDivElement, Window & LineChartData>;\nexport type ChartSelection = Selection<SVGSVGElement, Window & LineChartData>;\n\nexport interface LineChart extends DataSeriesChartMixin, CartesianChartMixin {}\nexport class LineChart extends Chart {\n  constructor(windowSelection: Selection<HTMLDivElement>, data: LineChartUserArgs) {\n    super()\n    this._windowS = windowSelection as WindowSelection\n    this.revalidate(data)\n  }\n\n  _windowS: WindowSelection\n  get windowS(): WindowSelection { return this._windowS }\n  get chartS(): ChartSelection {\n    return ((this._chartS && !this._chartS.empty()) ? this._chartS :\n      this.layouterS.selectAll('svg.chart')) as ChartSelection\n  }\n\n  protected override renderContent() {\n    this.renderSeriesChartComponents()\n\n    const series = this.chartS.datum().series.cloneToRenderData().applyFilter().applyZoom()\n    const {lineSeriesS, pointSeriesS,\n      pointS} = renderLineSeries(this.drawAreaS, [series])\n\n    this.addAllSeriesFeatures(pointSeriesS)\n    lineSeriesS.call(addSeriesHighlighting)\n    this.drawAreaS.selectAll('.series-label')\n      .attr( 'layout-strategy-horizontal', pointS.data()[0]?.labelData?.positionStrategyHorizontal ?? null)\n      .attr( 'layout-strategy-vertical', pointS.data()[0]?.labelData?.positionStrategyVertical ?? null)\n\n    this.renderCartesianComponents()\n  }\n\n  public revalidate(data: LineChartUserArgs) {\n    const initialWindowData = validateWindow({...data, type: 'line', renderer: this})\n    const chartData = validateLineChart({...data, renderer: this})\n    this.windowS.datum({...initialWindowData, ...chartData})\n  }\n}\n\napplyMixins(LineChart, [DataSeriesChartMixin, CartesianChartMixin])\n","import {D3ZoomEvent, Selection} from \"d3\";\nimport {relateDragWayToSelection, RVArray} from \"respvis-core\";\nimport {KeyedAxis} from \"../../validate-keyed-axis\";\n\nexport function onDragAxisParcoord(e: D3ZoomEvent<any, any>, d: KeyedAxis, drawAreaBackgroundS: Selection<SVGRectElement>) {\n  if (!(e.sourceEvent instanceof MouseEvent || e.sourceEvent instanceof TouchEvent)) return\n  const dragWay = relateDragWayToSelection(e.sourceEvent, drawAreaBackgroundS)\n  if (!dragWay) return\n  const originalData = d.series.originalData\n  const percentageDomain = originalData.axesPercentageScale.domain()\n  const axisIndex = percentageDomain.indexOf(d.key)\n  const percentageRange = originalData.axesPercentageScale.range()\n\n  const oldPercentage = percentageRange[axisIndex]\n  const newPercentage = d.series.responsiveState.currentlyFlipped ? 1 - dragWay.fromTopPercent : dragWay.fromLeftPercent\n  rearrangeAxesWithEqualPercentage()\n\n  percentageRange[axisIndex] = newPercentage\n  originalData.axesPercentageScale.range(percentageRange)\n\n  function rearrangeAxesWithEqualPercentage() {\n    percentageRange.forEach((currP, currPI) => {\n      if (!(currP === newPercentage && currPI !== axisIndex)) return\n      percentageRange[currPI] = currP + (oldPercentage > newPercentage ? 0.01 : -0.01)\n    })\n  }\n}\n\nexport function onDragEndAxisParcoord(d: KeyedAxis) {\n  const {renderer, originalData} = d.series\n  const {axesPercentageScale } = originalData\n\n  const equidistantAxesActive = renderer.windowS.datum().settings.get('parcoordEquidistantAxes')\n  if (!equidistantAxesActive) return\n  const percentageRange = axesPercentageScale.range()\n  const order = RVArray.mapToRanks(percentageRange)\n\n  const newPercentageRange = order.map((eOrder) => (eOrder - 1) / (order.length - 1))\n  axesPercentageScale.range(newPercentageRange)\n  renderer.windowS.dispatch('resize')\n}\n\n\n","import {select, Selection} from \"d3\";\nimport {ParcoordSeries} from \"../parcoord-series\";\nimport {\n  CheckBoxLabel,\n  DialogData,\n  renderFieldset,\n  renderInputLabels,\n  renderSVGSeries,\n  WindowSettings,\n  windowSettingsKeys\n} from \"respvis-core\";\nimport checkSVGRaw from \"../../../../../../assets/svg/tablericons/check.svg\";\nimport {onDragEndAxisParcoord} from \"./on-drag-axis\";\n\nexport function renderTool(toolbarS: Selection<HTMLDivElement>, series: ParcoordSeries) {\n  const dialogS = toolbarS.selectAll<HTMLDialogElement, DialogData>('.dialog--center.dialog--chart')\n  equidistantAxesOptionsRender(dialogS, series).call(renderInputLabels)\n  confirmButtonRender(dialogS, series)\n}\n\nfunction equidistantAxesOptionsRender(selection: Selection, series: ParcoordSeries) {\n  const {settings} = series.renderer.windowS.datum()\n  const onChange = (e: InputEvent, type: keyof WindowSettings) => {\n    settings.setDeferred(type, (e.target as HTMLInputElement).checked)\n    // windowSettings[type] = (e.target as HTMLInputElement).checked\n  }\n  const defaultVal = settings.snapshot['parcoordEquidistantAxes'] ??\n    settings.get('parcoordEquidistantAxes')\n\n  const data = [{\n    legend: 'Parallel Coordinates Settings',\n    labelData: [ new CheckBoxLabel({\n      label: 'Equidistant Axes',\n      type: windowSettingsKeys.parcoordEquidistantAxes,\n      defaultVal,\n      onChange,\n    })\n    ]\n  }]\n  return renderFieldset(selection, data, 'item', 'item--parcoord-settings')\n}\n\nfunction confirmButtonRender(selection: Selection<HTMLDialogElement, DialogData>, series: ParcoordSeries) {\n  const buttonS = selection\n    .selectAll<HTMLLIElement, any>('.button--icon.button--confirm')\n    .data([null])\n    .join('button')\n    .classed('button--icon button--confirm', true)\n    .on('click.confirm', function () {\n      series.renderer.windowS.datum().settings.update()\n      select<HTMLDialogElement, DialogData>(this.closest('dialog')!).datum()?.triggerExit()\n      onDragEndAxisParcoord(series.renderData.axes[0])\n    });\n\n  buttonS.selectAll('span')\n    .data([null])\n    .join(\"span\")\n    .text('Ok')\n  renderSVGSeries(buttonS, [checkSVGRaw])\n}\n","import {ActiveKeyMap, AxisKey, BaseAxis, BaseAxisArgs, validateBaseAxis} from \"respvis-core\";\nimport type {ParcoordSeries} from \"./index\";\n\nexport type KeyedAxisArgs = BaseAxisArgs & {\n  key: AxisKey\n  series: ParcoordSeries\n}\n\nexport type KeyedAxis = BaseAxis & {\n  originalAxis: KeyedAxis\n  //If a chart similar to parcoord is integrated, create interface\n  //Current Solution is also bad as type must be imported from parcoord-package\n  series: ParcoordSeries\n  key: AxisKey\n  keysActive: ActiveKeyMap\n  setKeyActiveIfDefined: (key: string, value: boolean) => void\n  isKeyActiveByKey: (key: string) => boolean\n  upperRangeLimitPercent: number\n  lowerRangeLimitPercent: number\n  isValueInRangeLimit: (val: any) => boolean\n}\n\nexport function validateKeyedAxis(args:KeyedAxisArgs): KeyedAxis {\n  const keysActive = {}\n  keysActive[args.key] = true\n\n  const axis = {\n    ...validateBaseAxis(args),\n    originalAxis: this,\n    series: args.series,\n    key: args.key,\n    keysActive,\n    upperRangeLimitPercent: 1,\n    lowerRangeLimitPercent: 0,\n    setKeyActiveIfDefined: function(this: KeyedAxis, key: string, value: boolean) {\n      if (this.keysActive[key] !== undefined) this.keysActive[key] = value\n    },\n    isKeyActiveByKey: function(this: KeyedAxis, key: string) {\n      // noinspection PointlessBooleanExpressionJS\n      return this.keysActive[key] !== false\n    },\n    isValueInRangeLimit: function (this: KeyedAxis, val: number) {\n      const {axes, axesInverted} = this.series.renderData\n      const axisIndex = axes.findIndex(axis => axis.key === this.key)\n      const flipped = this.series.responsiveState.currentlyFlipped\n      const inverted = axesInverted[axisIndex]\n\n      const scaledValues = this.scaledValues\n      const range = scaledValues.scale.range()\n      if (flipped) {\n        const rangeMax = inverted ? range[0] : range[1]\n        const maxRangeGraphical = rangeMax * this.upperRangeLimitPercent\n        const minRangeGraphical = rangeMax * this.lowerRangeLimitPercent\n        return val >= minRangeGraphical && val <= maxRangeGraphical\n      }\n      const rangeMax = inverted ? range[1] : range[0]\n      const maxRangeGraphical = rangeMax - rangeMax * this.upperRangeLimitPercent\n      const minRangeGraphical = rangeMax - rangeMax * this.lowerRangeLimitPercent\n      return val <= minRangeGraphical && val >= maxRangeGraphical\n    }\n  }\n  axis.originalAxis = axis\n  return axis\n}\n","import {\n  BaseAxisUserArgs,\n  combineKeys,\n  DataSeriesArgs,\n  DataSeriesData,\n  DataSeriesUserArgs,\n  ErrorMessages,\n  RVArray,\n  ScaledValuesCategorical,\n  ScaledValuesSpatialDomain,\n  ScaledValuesSpatialUserArgs,\n  SeriesKey,\n  Size,\n  validateDataSeriesArgs,\n  validateScaledValuesSpatial,\n  validateZoom,\n  Zoom,\n  ZoomArgs\n} from \"respvis-core\";\nimport {DataSeriesTooltipGenerator} from \"respvis-tooltip\";\nimport {Line} from \"respvis-line\";\nimport {KeyedAxis, validateKeyedAxis} from \"../validate-keyed-axis\";\nimport {scaleLinear, ScaleLinear, scaleOrdinal, ScaleOrdinal} from \"d3\";\nimport {ParcoordSeries} from \"./parcoord-series\";\n\nexport type ParcoordSeriesUserArgs = DataSeriesUserArgs & {\n  dimensions: {\n    scaledValues: ScaledValuesSpatialUserArgs<ScaledValuesSpatialDomain>\n    axis: BaseAxisUserArgs\n    zoom?: ZoomArgs\n  }[],\n  markerTooltipGenerator?: DataSeriesTooltipGenerator<SVGRectElement, Line>\n}\nexport type ParcoordSeriesArgs = DataSeriesArgs & ParcoordSeriesUserArgs & {\n  original?: ParcoordSeries\n  key: SeriesKey\n  bounds?: Size,\n}\nexport type ParcoordSeriesData = DataSeriesData & {\n  axes: KeyedAxis[]\n  axesPercentageScale: ScaleOrdinal<string, number>\n  percentageScreenScale: ScaleLinear<number, number>\n  zooms: (Zoom | undefined)[]\n  axesInverted: boolean[]\n  //TODO: implement usage and initialization of markerTooltipGenerator for parcoords\n  markerTooltipGenerator?: DataSeriesTooltipGenerator<SVGPathElement, Line>\n}\n\nexport function validateParcoordSeriesArgs(args: ParcoordSeriesArgs, series: ParcoordSeries): ParcoordSeriesData {\n  const axes = args.dimensions.map((dimension, index) => { //TODO: data aligning\n    return validateKeyedAxis({\n      ...dimension.axis,\n      renderer: args.renderer,\n      series,\n      scaledValues: validateScaledValuesSpatial(dimension.scaledValues, `a-${index}`),\n      key: `a-${index}`\n    })\n  })\n  if (axes.length === 1) throw new Error(ErrorMessages.parcoordMinAxesCount)\n\n  let categories: ScaledValuesCategorical | undefined = undefined\n  if (args.categories) {\n    const alignedCategories = {\n      ...args.categories, //TODO: index check\n      values: RVArray.equalizeLengths(args.categories.values, axes[0].scaledValues.values)[0]\n    }\n    categories = new ScaledValuesCategorical({...alignedCategories, parentKey: 's-0'})\n  }\n\n  if (categories && categories.values.length !== axes[0].scaledValues.values.length) {\n    throw new Error(ErrorMessages.categoricalValuesMismatch)\n  }\n\n  const denominator = axes.length > 1 ? axes.length - 1 : 1\n\n  const data = {\n    ...validateDataSeriesArgs(args, series),\n    axes,\n    axesPercentageScale: scaleOrdinal<string, number>()\n      .domain(axes.map((axis) => axis.key)).range(axes.map((axis, index) => index / denominator)),\n    percentageScreenScale: scaleLinear().domain([0, 1]),\n    zooms: args.dimensions.map(dimension => {\n      return dimension.zoom ? validateZoom(dimension.zoom) : undefined\n    }),\n    axesInverted: axes.map(() => false),\n    getCombinedKey(this: ParcoordSeriesData, i: number) {\n      const seriesCategoryKey = this.categories ? this.categories.getCategoryData(i).combinedKey : undefined\n      return combineKeys([this.key, this.axes[i].key, seriesCategoryKey])\n    }\n  }\n\n  if (data.color && data.color.values.length !== axes[0].scaledValues.values.length) {\n    throw new Error(ErrorMessages.sequentialColorValuesMismatch)\n  }\n\n  return data\n}\n\nexport function cloneParcoordData(original: ParcoordSeriesData): ParcoordSeriesData {\n  return {\n    ...original,\n    axes: original.axes.map(axis => {\n      return {...axis, scaledValues: axis.scaledValues.clone()}\n    }),\n    axesPercentageScale: original.axesPercentageScale.copy(),\n    percentageScreenScale: original.percentageScreenScale.copy(),\n  }\n}\n","import {AxisLayout, ResponsiveState, ResponsiveStateArgs} from \"respvis-core\";\nimport {ZoomTransform} from \"d3\";\nimport {ParcoordSeries} from \"./parcoord-series\";\n\ntype ParcoordResponsiveStateArgs = ResponsiveStateArgs & {\n  series: ParcoordSeries\n}\n\nexport class ParcoordResponsiveState extends ResponsiveState {\n  protected _series: ParcoordSeries\n  protected _axisLayout: AxisLayout\n\n  constructor(args: ParcoordResponsiveStateArgs) {\n    super(args);\n    this._series = args.series\n    this._axisLayout = this.currentlyFlipped ? 'bottom' : 'left'\n  }\n\n  get axisLayout() {\n    return this._axisLayout\n  }\n\n  getAxisPosition(key: string) {\n    const {axesPercentageScale, percentageScreenScale} = this._series.renderData\n    const percentage = axesPercentageScale(key) ?? 0\n    return this.currentlyFlipped ? {x: 0, y: percentageScreenScale(percentage)} : {\n      x: percentageScreenScale(percentage),\n      y: 0\n    }\n  }\n\n  update() {\n    this.updateZoomOnFlip()\n    super.update()\n    this.updateScales()\n  }\n\n  private updateScales() {\n    const {horizontal, vertical} = this.drawAreaRange()\n    const currentAxesSpaceRange = this.currentlyFlipped ? vertical : horizontal\n\n    this._axisLayout = this.currentlyFlipped ? 'bottom' : 'left'\n    const orientation = this.currentlyFlipped ? 'horizontal' : 'vertical'\n\n    const {axes, percentageScreenScale} = this._series.originalData\n    axes.forEach(axis => axis.scaledValues.updateRange(horizontal, vertical, orientation))\n    percentageScreenScale.range(currentAxesSpaceRange)\n  }\n\n  private updateZoomOnFlip() {\n    if (this._previouslyFlipped === this._currentlyFlipped) return\n\n    this._series.originalData.zooms.forEach((zoom) => {\n      if (!zoom?.currentTransform || zoom.currentTransform.k === 1) return\n      // const t = zoom.currentTransform\n      // reset zoom on flipping. TODO: Desired would be a rescaling from x to y and vice versa\n      zoom.currentTransform = new ZoomTransform(1, 0, 0)\n    })\n  }\n}\n","import {DataSeries, ErrorMessages, getCurrentResponsiveValue, Renderer} from \"respvis-core\";\nimport {Selection} from \"d3\";\nimport {renderTool} from \"./render/render-tool\";\nimport {KeyedAxis} from \"../validate-keyed-axis\";\nimport {\n  cloneParcoordData,\n  ParcoordSeriesArgs,\n  ParcoordSeriesData,\n  validateParcoordSeriesArgs\n} from \"./validate-parcoord-series\";\nimport {ParcoordResponsiveState} from \"./parcoord-responsive-state\";\n\nexport class ParcoordSeries implements DataSeries {\n  originalData: ParcoordSeriesData\n  renderData: ParcoordSeriesData\n  renderer: Renderer\n  responsiveState: ParcoordResponsiveState\n\n  constructor(args: ParcoordSeriesArgs) {\n    this.renderer = args.renderer\n    this.originalData = validateParcoordSeriesArgs(args, this)\n    this.renderData = this.originalData\n    this.responsiveState = new ParcoordResponsiveState({\n      series: this,\n      flipped: args.flipped,\n    })\n  }\n\n  getAxesDragDropOrdered() { //TODO: to data object!\n    const {axes,  axesPercentageScale} = this.renderData\n    return [...axes].sort((axis1, axis2) => {\n      return axesPercentageScale(axis1.key) < axesPercentageScale(axis2.key) ? -1 : 1\n    })\n  }\n\n  getScaledValuesAtScreenPosition(x: number, y: number) {\n    const activeSeries = this.applyFilter()\n    const {axes, axesPercentageScale, percentageScreenScale} = activeSeries.renderData\n    const chartS = axes[0].renderer.chartS\n    const flipped = this.responsiveState.currentlyFlipped\n    const axisPosition = flipped ? y : x\n    const dimensionPosition = flipped ? x : y\n\n    function axisDiff(axis: KeyedAxis) {\n      const currentAxisPosition = percentageScreenScale(axesPercentageScale(axis.key))\n      return Math.abs(currentAxisPosition - axisPosition)\n    }\n\n    const {axis} = axes.reduce((prev, current) => {\n      const currentDiff = axisDiff(current)\n      return currentDiff < prev.diff ? {\n        axis: current, diff: currentDiff\n      } : prev\n    }, {axis: axes[0], diff: axisDiff(axes[0])})\n\n    const scaleFormat = axis.scaledValues.tag !== 'categorical' ? axis.scaledValues.scale.tickFormat() : (val => val)\n    const format = axis.d3Axis?.tickFormat() ?? scaleFormat\n    const axisName = getCurrentResponsiveValue(axis.title, {chart: chartS})\n    const dimensionValue = axis.scaledValues.atScreenPosition(dimensionPosition)\n    const dimensionValueFormatted = format(dimensionValue, 0)\n    return {\n      horizontal: flipped ? dimensionValueFormatted : axisName,\n      horizontalName: flipped ? axisName : 'Dimension',\n      horizontalNearestRealValue: flipped ? axis.scaledValues.getNearestValue(dimensionValue as never) : axisName,\n      horizontalScreenValue: flipped ? dimensionValue : axisName,\n      vertical: flipped ? axisName : dimensionValueFormatted,\n      verticalName: flipped ? 'Dimension' : axisName,\n      verticalNearestRealValue: flipped ? axisName : axis.scaledValues.getNearestValue(dimensionValue as never),\n      verticalScreenValue: flipped ? axisName : dimensionValue,\n    }\n  }\n\n  renderTool(toolbarS: Selection<HTMLDivElement>) {\n    renderTool(toolbarS, this)\n  }\n\n  cloneToRenderData() {\n    this.renderData = cloneParcoordData(this.originalData)\n    return this\n  }\n\n  applyFilter(): ParcoordSeries {\n    const {axes, axesPercentageScale,\n      zooms, axesInverted, keysActive, key} = this.renderData\n\n    const activeIndices = !keysActive[key] ? [] : axes.map((_, index) => index)\n        .filter(index => axes[index].isKeyActiveByKey(axes[index].key))\n\n    const activeAxes = activeIndices.map(index => axes[index])\n    activeAxes.forEach(axis => axis.scaledValues = axis.scaledValues.cloneFiltered())\n\n    const activeDomain = activeAxes.map(axis => axis.key)\n    const activeRange = activeAxes.map(axis => axesPercentageScale(axis.key))\n\n    this.renderData = {...this.renderData,\n      axes: activeAxes,\n      zooms: activeIndices.map(index => zooms[index]),\n      axesInverted: activeIndices.map(index => axesInverted[index])\n    }\n\n    this.renderData.axesPercentageScale\n      .domain(activeDomain)\n      .range(activeRange)\n\n    if (this.renderData.axes.length === 1) throw new Error(ErrorMessages.parcoordMinAxesCount)\n    return this\n  }\n\n  applyZoom(): ParcoordSeries {\n    const {axes, zooms} = this.renderData\n    const zoomDirection = this.responsiveState.currentlyFlipped ? 'x' : 'y'\n    this.renderData.axes = axes.map((axis, index) => {\n      const zoom = zooms[index]\n      if (!zoom) return axis\n      return {...axis, scaledValues: axis.scaledValues.cloneZoomed(zoom.currentTransform, zoomDirection)}\n    })\n    return this\n  }\n\n  applyInversion(): ParcoordSeries {\n    const {axes, axesInverted} = this.renderData\n    this.renderData.axes = axes.map((axis, index) => {\n      if (!axesInverted[index]) return axis\n      return {...axis, scaledValues: axis.scaledValues.cloneRangeInversed()}\n    })\n    return this\n  }\n}\n","import {DataSeriesChartData, DataSeriesChartUserArgs, RenderArgs, validateChart, validateLegend} from \"respvis-core\";\nimport {ParcoordSeries, ParcoordSeriesUserArgs} from \"../parcoord-series\";\n\nexport type ParcoordChartUserArgs = Omit<DataSeriesChartUserArgs, 'series'> & {\n  series: ParcoordSeriesUserArgs\n}\n\nexport type ParcoordChartArgs = ParcoordChartUserArgs & RenderArgs\n\nexport type ParcoordChartData = DataSeriesChartData & {\n  series: ParcoordSeries\n}\n\nexport function validateParcoordChart(args: ParcoordChartArgs): ParcoordChartData {\n  const {renderer} = args\n  const series = new ParcoordSeries({...args.series, renderer, key: 's-0'})\n  return {\n    getAxes: function (this:ParcoordChartData) { return this.series.originalData.axes },\n    getSeries: function (this:ParcoordChartData) { return [this.series] },\n    getMainSeries: function (this:ParcoordChartData) { return this.series },\n    series,\n    legend: validateLegend({...args.legend, renderer, series}),\n    ...validateChart(args),\n  }\n}\n","import {Selection} from \"d3\";\nimport {combineKeys, defaultStyleClass, Position} from \"respvis-core\";\nimport {joinLineSeries, Line} from \"respvis-line\";\nimport {ParcoordSeries} from \"../index\";\nimport {KeyedAxis} from \"../../validate-keyed-axis\";\n\nexport function renderParcoordLineSeries(seriesS: Selection<SVGGElement, ParcoordSeries>) {\n  seriesS.selectAll<SVGPathElement, Line>('path')\n    .data(d => createLines(d.getAxesDragDropOrdered()), (d) => d.key)\n    .call(s => joinLineSeries(seriesS, s))\n}\n\nfunction createLines(activeAxes: KeyedAxis[]) {\n  const lines: Line[] = []\n  if (activeAxes.length === 0) return lines\n  const series = activeAxes[0].series\n  const {keysActive, categories, key} = series.renderData\n  const maxIndex = activeAxes[0].scaledValues.values.length\n  if (!keysActive[key]) return lines\n\n  for (let valueIndex = 0; valueIndex < maxIndex; valueIndex++) {\n    if (categories && !categories.isValueActive(valueIndex)) continue\n    const positions = createLinePositions(activeAxes, valueIndex, series)\n    if (positions.length === 0) continue\n\n    const categoryKey = categories?.getCombinedKey(valueIndex)\n\n    lines.push({\n      key: combineKeys([key, ...(categoryKey ? [categoryKey] : []), `i-${valueIndex}`]),\n      styleClass: categories ? categories.getStyleClass(valueIndex) : defaultStyleClass,\n      positions\n    })\n  }\n  return lines\n}\n\nfunction createLinePositions(activeAxes: KeyedAxis[], valueIndex: number, series: ParcoordSeries) {\n  const positions: Position[] = []\n  const flipped = series.responsiveState.currentlyFlipped\n  for (let axisIndex = 0; axisIndex < activeAxes.length; axisIndex++) {\n    const axis = activeAxes[axisIndex]\n    const valPos = axis.scaledValues.getScaledValue(valueIndex)\n    if (!axis.scaledValues.isValueActive(valueIndex) || !axis.isValueInRangeLimit(valPos)) return []\n\n    const axisPosPercent = series.originalData.axesPercentageScale(axis.key)\n    const axisPosReal = series.renderData.percentageScreenScale(axisPosPercent)\n    //TODO: check if should be otherwise\n    // const axisPosReal = series.percentageScreenScale(axisPosPercent)\n    positions.push({\n      y: flipped ? axisPosReal : valPos,\n      x: flipped ? valPos : axisPosReal\n    })\n  }\n  return positions\n}\n","import {Selection} from \"d3\";\nimport {throttle} from \"respvis-core\";\nimport {onDragEndAxisParcoord} from \"./on-drag-axis\";\nimport {KeyedAxis} from \"../../validate-keyed-axis\";\nimport {onZoomAxis} from \"./on-zoom-axis\";\n\nexport function setUpAxisZoom(axisS: Selection<SVGGElement, KeyedAxis>, i: number) {\n  const axisD = axisS.datum()\n  const zoomB = axisD.series.renderData.zooms[i]\n  if (!zoomB) return\n\n  const throttledZoom = throttle((e) => onZoomAxis(e, axisD), 30)\n\n  const onZoom = (e) => {\n    if (e.sourceEvent.type === \"dblclick\") return\n    throttledZoom.func(e)\n    axisD.series.renderer.windowS.dispatch('resize')\n  }\n  const onZoomEnd = (e) => {\n    if (e.sourceEvent.type === \"mouseup\") {\n      onDragEndAxisParcoord(axisD)\n    }\n  }\n\n  axisS.call(zoomB.behaviour.scaleExtent([zoomB.out, zoomB.in])\n    .on('zoom.zoomAndDrag', onZoom)\n    .on('end.zoomAndDrag', onZoomEnd)\n  )\n}\n","import {D3ZoomEvent, zoomIdentity} from \"d3\";\nimport {KeyedAxis} from \"../../validate-keyed-axis\";\n\nexport function onZoomAxis(e: D3ZoomEvent<any, any>, d: KeyedAxis) {\n  const transform = e.transform\n  const {axes, zooms} = d.series.originalData\n  const axisIndex = axes.findIndex(axis => axis.key === d.key)\n  const zoom = zooms[axisIndex]\n  if (!zoom) return\n  zoom.currentTransform = transform\n  zoom.currentTransform = (e.sourceEvent.type === \"mousemove\" && e.transform.k === 1) ? zoomIdentity : transform\n\n  const {horizontal, verticalInverted} = d.series.responsiveState.drawAreaRange()\n  const extent: [[number, number], [number, number]] = [\n    [horizontal[0], verticalInverted[0]],\n    [horizontal[1], verticalInverted[1]],\n  ];\n  zoom.behaviour.extent(extent).translateExtent(extent);\n}\n","import {Selection} from \"d3\";\nimport {createSelectionClasses} from \"respvis-core\";\n\n// Icon Path Sources:\n//   https://tablericons.com/\n//   https://feathericons.com/\n\ntype ChevronData = {\n  type: 'down' | 'right' | null\n  scale: number,\n}\n\nexport function pathChevronRender(selection: Selection, classes: string[], data?: ChevronData[]) {\n  const {selector, classString} = createSelectionClasses(classes)\n\n  const group = selection.selectAll<SVGGElement, any>(selector)\n    .data([null])\n    .join('g')\n    .classed(classString, true)\n    .attr('data-ignore-layout-children', true)\n\n  group.selectAll('path')\n    .data(data ?? [{type: \"right\", scale: 1}])\n    .join('path')\n    .attr('d', d => d.type === 'right' ?\n        pathScale(\"M0,0 l6,6 l-6,6 l0,-12\", d.scale) :\n        pathScale(\"M0,0 l6,6 l6,-6 l-12,0\", d.scale)\n    ).attr('stroke-width', 1.5)\n    .attr('fill', 'none')\n    .attr('stroke-linecap', 'round')\n    .attr('stroke-linejoin', 'round')\n    .attr('stroke', '#2c3e50')\n    .attr('pointer-events', 'none')\n\n  // M6,0.8 l6,6 l6,-6\n  return group\n}\n\nfunction pathScale(d: string, scale: number) {\n  const numberPattern = /[-+]?\\d*\\.?\\d+(?:[eE][-+]?\\d+)?/g\n  return d.replace(numberPattern, function(match) {\n    return (parseFloat(match) * scale).toString();\n  })\n}\n","import {\n  backgroundSVGOnly,\n  bboxDiffSVG,\n  calcLimited,\n  cssVarFromSelection,\n  hasDrag,\n  relateDragWayToSelection,\n  relateDragWayToSelectionByDiff,\n  renderBgSVGOnlyBBox,\n  throttle\n} from \"respvis-core\";\nimport {drag, select, Selection} from \"d3\";\nimport {KeyedAxis} from \"../../validate-keyed-axis\";\nimport {pathChevronRender} from \"./render-path-chevron\";\n\nexport function renderAxisLimiter(axisS: Selection<SVGGElement, KeyedAxis>) {\n  axisS.each(function(d, i, g) {\n    select<SVGGElement, KeyedAxis>(g[i])\n      .call(renderChevronLimiter)\n      .call(renderRectLimiter)\n      .call(alignLimiters)\n      .call(addLimiterDrag)\n  })\n}\n\nfunction renderChevronLimiter(axisS: Selection<SVGGElement, KeyedAxis>) {\n  const flipped = axisS.datum().series.responsiveState.currentlyFlipped\n  const direction = (flipped ? 'right' : 'down')\n  const upperChevronS = pathChevronRender(axisS, ['slider-up'], [{type: direction, scale: 1}])\n  renderBgSVGOnlyBBox(upperChevronS, [{scale: 4}], upperChevronS.select('path'))\n    .classed('cursor', true)\n    .classed('cursor--range-vertical', !flipped)\n    .classed('cursor--range-horizontal cursor--range-left', flipped)\n  const lowerChevronS = pathChevronRender(axisS, ['slider-down'], [{type: direction, scale: 1}])\n  renderBgSVGOnlyBBox(lowerChevronS, [{scale: 4}], lowerChevronS.select('path'))\n    .classed('cursor', true)\n    .classed('cursor--range-horizontal ', flipped)\n    .classed('cursor--range-vertical cursor--range-up', !flipped)\n}\n\nfunction renderRectLimiter(axisS: Selection<SVGGElement, KeyedAxis>) {\n  const axisD = axisS.datum()\n  if (!axisD) return\n  const flipped = axisD.series.responsiveState.currentlyFlipped\n  const rectLimiterDragable = axisD.upperRangeLimitPercent < 1 || axisD.lowerRangeLimitPercent > 0\n  axisS.selectAll('.slider-rect')\n    .data([null])\n    .join('rect')\n    .classed('slider-rect', true)\n    .classed('cursor cursor--range-rect', rectLimiterDragable)\n    .classed('cursor--range-rect-horizontal', flipped)\n}\n\nfunction alignLimiters(axisS: Selection<SVGGElement, KeyedAxis>) {\n  const {upperRangeLimitPercent, lowerRangeLimitPercent, scaledValues, series} = axisS.datum()\n  const upperChevronS= axisS.selectAll<SVGGElement, any>('.slider-up')\n  const lowerChevronS = axisS.selectAll<SVGGElement, any>('.slider-down')\n  const rectLimiterS = axisS.selectAll<SVGRectElement, any>('.slider-rect')\n  const domainS = axisS.select<SVGPathElement>('.domain')\n  const {leftCornersXDiff, leftCornersYDiff, bbox2: bboxPath, bbox1: bboxDomain} =\n    bboxDiffSVG(domainS, upperChevronS.select('path'))\n  \n  if (series.responsiveState.currentlyFlipped) {\n    const upperRange = scaledValues.getRangeByPercent(upperRangeLimitPercent, false, 'horizontal')\n    const lowerRange = scaledValues.getRangeByPercent(lowerRangeLimitPercent, false, 'horizontal')\n\n    const translateAlign = `translate(${-leftCornersXDiff - bboxPath.width}, ${-leftCornersYDiff - bboxPath.height / 2})`\n    const mirrorXLower = `scale(-1, 1)`\n    const translateXUpper = `translate(${-upperRange})`\n    const translateXLower = `translate(${lowerRange})`\n\n    upperChevronS.attr('transform', `${mirrorXLower} ${translateAlign} ${translateXUpper}`)\n    lowerChevronS.attr('transform', `${translateAlign} ${translateXLower}`)\n    const rectLimiterBreadthString = cssVarFromSelection(rectLimiterS, '--rect-slider-breadth') ?? '30'\n    const rectLimiterBreadth = parseInt(rectLimiterBreadthString)\n    rectLimiterS\n      .attr('x', lowerRange)\n      .attr('width', upperRange - lowerRange)\n      .attr('y', -1 * rectLimiterBreadth / 2)\n      .attr('height', rectLimiterBreadth)\n  } else {\n    const translateX = -leftCornersXDiff + bboxDomain.width - bboxPath.width / 2\n    const upperRange = scaledValues.getRangeByPercent(upperRangeLimitPercent, false, 'vertical')\n    const translateYUpper = upperRange - bboxPath.height\n    const lowerRange = scaledValues.getRangeByPercent(lowerRangeLimitPercent, false, 'vertical')\n    const translateYLower = lowerRange + bboxPath.height\n    const mirrorYLower = `scale(1, -1)`\n\n    upperChevronS.attr('transform', `translate(${translateX}, ${translateYUpper})`)\n    lowerChevronS.attr('transform', `translate(${translateX}, ${translateYLower}) ${mirrorYLower}`)\n    const rectLimiterBreadthString = cssVarFromSelection(rectLimiterS, '--rect-slider-breadth') ?? '30'\n    const rectLimiterBreadth = parseInt(rectLimiterBreadthString)\n    rectLimiterS\n      .attr('x', -1 * rectLimiterBreadth / 2)\n      .attr('width', rectLimiterBreadth)\n      .attr('y', upperRange)\n      .attr('height', lowerRange - upperRange)\n  }\n}\n\nfunction addLimiterDrag(axisS: Selection<SVGGElement, KeyedAxis>) {\n  const {originalData, renderer, responsiveState} = axisS.datum().series\n  const {axes} = originalData\n\n  const axisD = axes.find(axis => axis.key === axisS.datum().key)\n  if (!axisD) return\n\n  const upperChevronBackgroundS = axisS.selectAll('.slider-up').selectAll(`.${backgroundSVGOnly}`)\n  const lowerChevronBackgroundS = axisS.selectAll('.slider-down').selectAll(`.${backgroundSVGOnly}`)\n  const rectLimiterS = axisS.selectAll('.slider-rect')\n\n  function getPercent(e) {\n    if (!(e.sourceEvent instanceof MouseEvent || e.sourceEvent instanceof TouchEvent)) return\n    const dragDown = relateDragWayToSelection(e.sourceEvent, renderer.drawAreaBgS)\n    if (dragDown === undefined) return undefined\n    return responsiveState.currentlyFlipped ? dragDown.fromLeftPercent : 1 - dragDown.fromTopPercent\n  }\n\n  function getPercentDiff(e) {\n    const dragDown = relateDragWayToSelectionByDiff(e, renderer.drawAreaBgS)\n    if (dragDown === undefined) return undefined\n    return responsiveState.currentlyFlipped ? dragDown.dxRelative : -dragDown.dyRelative\n  }\n\n  const onDrag = (e, limit: 'upper' | 'lower' | 'rect') => {\n\n    const onUpperLower = () => {\n      const percent = getPercent(e)\n      if (percent === undefined) return\n      if (limit === 'upper') {\n        axisD.upperRangeLimitPercent = calcLimited(percent, axisD.lowerRangeLimitPercent, 1)\n      }\n      if (limit === 'lower') {\n        axisD.lowerRangeLimitPercent = calcLimited(percent, 0, axisD.upperRangeLimitPercent)\n      }\n    }\n\n    const onRect = () => {\n      const percentDiff = getPercentDiff(e)\n      if (percentDiff === undefined) return;\n      const appliedDiff =\n        calcLimited(percentDiff, -axisD.lowerRangeLimitPercent, 1 - axisD.upperRangeLimitPercent)\n      axisD.upperRangeLimitPercent += appliedDiff\n      axisD.lowerRangeLimitPercent += appliedDiff\n    }\n    limit === 'rect' ? onRect() : onUpperLower()\n    renderer.windowS.dispatch('resize')\n  }\n\n  const throttledDrag = throttle(onDrag, 25)\n\n\n  function setUpUpperLimiterDrag() {\n    if (hasDrag(upperChevronBackgroundS)) return\n    upperChevronBackgroundS.call(drag()\n      .on(\"drag.dragAxisLimitUpper\", (e) => throttledDrag.func(e, 'upper'))\n      .on(\"end.dragAxisLimitUpper\", (e) => onDrag(e, 'upper'))\n    )\n  }\n\n  function setUpLowerLimiterDrag() {\n    if (hasDrag(lowerChevronBackgroundS)) return\n    lowerChevronBackgroundS.call(drag()\n      .on(\"drag.dragAxisLimitLower\", (e) => throttledDrag.func(e, 'lower'))\n      .on(\"end.dragAxisLimitLower\", (e) => onDrag(e, 'lower'))\n    )\n  }\n\n  function setUpRectLimiterDrag() {\n    if (hasDrag(rectLimiterS)) return\n    rectLimiterS.call(drag()\n      .on(\"drag.dragAxisLimitRect\", (e) => throttledDrag.func(e, 'rect'))\n      .on(\"end.dragAxisLimitRect\", (e) => onDrag(e, 'rect'))\n    )\n  }\n\n  setUpUpperLimiterDrag()\n  setUpLowerLimiterDrag()\n  setUpRectLimiterDrag()\n}\n","import {createSelectionClasses, renderBgSVGOnlyBBox, renderSVGSeries} from \"respvis-core\";\nimport {Selection} from \"d3\";\nimport {KeyedAxis} from \"../../validate-keyed-axis\";\nimport ArrowUpNarrowSVG from \"../../../../../../assets/svg/tablericons/arrow-up-narrow.svg\"\n\nexport function renderAxisInverter(axisS: Selection<SVGGElement, KeyedAxis>) {\n  const { series } = axisS.datum()\n  const flipped = series.responsiveState.currentlyFlipped\n  if (flipped) renderAxisInverterVerticalChart(axisS)\n  else renderAxisInverterHorizontalChart(axisS)\n}\n\nexport function renderAxisInverterVerticalChart(axisS: Selection<SVGGElement, KeyedAxis>) {\n  const { renderer, originalData } = axisS.datum().series\n  const { axes, axesInverted } = originalData\n\n  axisS.selectAll('.title-wrapper .axis-inverter').remove()\n  const inverterIconS = renderSVGArrowNarrowUp(axisS, ['axis-inverter', 'axis-inverter-horizontal'])\n    .classed('layout-container', true)\n\n  const inverterIconBgS = renderBgSVGOnlyBBox(inverterIconS, [{ scale: 1.6 }], inverterIconS)\n  const axisIndex = axes.findIndex(axis => axis.key === axisS.datum().key)\n\n  axisS.classed('axis-inverted', axesInverted[axisIndex])\n  inverterIconBgS\n    .classed('cursor cursor--invert-horizontal', true)\n    .classed('cursor--invert-right', axesInverted[axisIndex])\n    .on('click', function() {\n    const axisIndex = axes.findIndex(axis => axis.key === axisS.datum().key)\n    axesInverted[axisIndex] = !axesInverted[axisIndex]\n    axisS.classed('axis-inverted', axesInverted[axisIndex])\n    inverterIconBgS.classed('cursor--invert-right', axesInverted[axisIndex])\n    renderer.windowS.dispatch('resize')\n    setTimeout(() => {\n      renderer.windowS.dispatch('resize')\n    }, 500)\n  })\n}\n\nexport function renderAxisInverterHorizontalChart(axisS: Selection<SVGGElement, KeyedAxis>) {\n  const { renderer, originalData } = axisS.datum().series\n  const { axes, axesInverted } = originalData\n\n  axisS.selectChildren('.axis-inverter').remove()\n  const titleWrapperS = axisS.selectAll('.title-wrapper')\n  const subtitleS = titleWrapperS.selectAll('.subtitle')\n  const inverterIconParentS = subtitleS.empty() ? titleWrapperS : subtitleS\n  const inverterIconS = renderSVGArrowNarrowUp(inverterIconParentS, ['axis-inverter'])\n  const inverterIconBgS = renderBgSVGOnlyBBox(inverterIconS, [{ scale: 1.6 }], inverterIconS)\n\n  const axisIndex = axes.findIndex(axis => axis.key === axisS.datum().key)\n\n  axisS.classed('axis-inverted', axesInverted[axisIndex])\n  inverterIconBgS\n    .classed('cursor cursor--invert-vertical', true)\n    .classed('cursor--invert-up', axesInverted[axisIndex])\n    .on('click', function() {\n    const axisIndex = axes.findIndex(axis => axis.key === axisS.datum().key)\n    axesInverted[axisIndex] = !axesInverted[axisIndex]\n      axisS.classed('axis-inverted', axesInverted[axisIndex])\n      inverterIconBgS.classed('cursor--invert-up', axesInverted[axisIndex])\n      renderer.windowS.dispatch('resize')\n    setTimeout(() => {\n      renderer.windowS.dispatch('resize')\n    }, 500)\n  })\n}\n\nfunction renderSVGArrowNarrowUp(selection: Selection, classes: string[]) {\n  const {selector, classString} = createSelectionClasses(classes)\n  const svgWrapperS = selection.selectAll<SVGGElement, any>('.svg-wrapper' + selector)\n    .data([null])\n    .join('g')\n    .classed('svg-wrapper', true)\n    .classed(classString, true)\n\n  const transformWrapperS = svgWrapperS.selectAll('.transform-wrapper')\n    .data([null])\n    .join('g')\n    .classed('transform-wrapper', true)\n\n  const svgGroup = transformWrapperS.selectAll('svg')\n  if (svgGroup.empty()) {\n    renderSVGSeries(transformWrapperS, [ArrowUpNarrowSVG])\n    transformWrapperS.selectAll('svg')\n      .attr('data-ignore-layout-children', true)\n  }\n  return svgWrapperS\n}\n","import {drag, Selection} from \"d3\";\nimport {KeyedAxis} from \"../../validate-keyed-axis\";\nimport {hasDrag, throttle} from \"respvis-core\";\nimport {onDragAxisParcoord, onDragEndAxisParcoord} from \"./on-drag-axis\";\n\nexport function setUpAxisDrag(axisS: Selection<SVGGElement, KeyedAxis>, i: number) {\n  const axisD = axisS.datum()\n\n  if (!hasDrag(axisS.selectAll('.title-wrapper'))) {\n    applyDragListeners()\n  }\n\n  function applyDragListeners() {\n    const throttledDrag = throttle((e) => onDragAxisParcoord(e, axisD, axisD.renderer.drawAreaBgS), 30)\n    const onDrag = (e) => {\n      if (e.sourceEvent.type === \"mousemove\") {\n        // console.log('MOUSEMOVEEVENT!', e)\n        throttledDrag.func(e)\n        axisD.series.renderer.windowS.dispatch('resize')\n      } else if (e.sourceEvent.type === \"touchmove\") {\n        // console.log('TOUCHMOVEEVENT!', e)\n        throttledDrag.func(e)\n        axisD.series.renderer.windowS.dispatch('resize')\n      }\n    }\n    axisS.selectAll('.title-wrapper').call(drag().on(\"drag.dragAxis\", onDrag)\n      .on(\"end.dragAxis\", () => onDragEndAxisParcoord(axisD))\n    )\n  }\n}\n","import {select, Selection} from \"d3\";\nimport {renderAxisSequence} from \"respvis-core\";\nimport {setUpAxisZoom} from \"./set-up-axis-zoom\";\nimport {renderAxisLimiter} from \"./render-axis-limiter\";\nimport {renderAxisInverter} from \"./render-axis-inverter\";\nimport {KeyedAxis} from \"../../validate-keyed-axis\";\nimport {ParcoordSeries} from \"../parcoord-series\";\nimport {setUpAxisDrag} from \"./set-up-axis-drag\";\nimport {updateAxisCursorClasses} from \"./update-axis-cursor-classes\";\n\nexport function renderParcoordAxisSeries(seriesS: Selection<Element, ParcoordSeries>) {\n  seriesS\n    .selectAll<SVGGElement, KeyedAxis>('.axis.axis-sequence')\n    .data(d => d.renderData.axes, (d) => d.key)\n    .join('g')\n    .each((d, i, g) => {\n      const axisS = select<SVGGElement, KeyedAxis>(g[i])\n      const orientation = d.series.responsiveState.currentlyFlipped ? 'horizontal' : 'vertical'\n\n      renderAxisSequence(axisS, orientation)\n      renderAxisLimiter(axisS)\n      setUpAxisDrag(axisS, i)\n      setUpAxisZoom(axisS, i)\n      renderAxisInverter(axisS)\n      updateAxisCursorClasses(axisS)\n    })\n    .attr('transform', (d, i) => {\n      const {x, y} = d.series.responsiveState.getAxisPosition(d.key)\n      return `translate(${x}, ${y})`\n    })\n    .each((d, i, g) => seriesS.dispatch('enter', {\n      detail: {selection: select(g[i])}\n    }))\n}\n","import {Selection} from \"d3\";\nimport {KeyedAxis} from \"../../validate-keyed-axis\";\nimport {RVArray} from \"respvis-core\";\n\nexport function updateAxisCursorClasses(axisS: Selection<SVGGElement, KeyedAxis>) {\n  const {responsiveState, originalData} = axisS.datum().series\n  const {axes, axesPercentageScale} = originalData\n\n  const flipped = responsiveState.currentlyFlipped\n  const axisIndex = axes.findIndex(axis => axis.key === axisS.datum().key)\n  const percentageRange = axesPercentageScale.range()\n  const orderArray = RVArray.mapToRanks(percentageRange)\n  const titleWrapperS = axisS.selectAll('.title-wrapper')\n  titleWrapperS.classed('cursor', true)\n    .classed('cursor--drag-horizontal', !flipped)\n    .classed('cursor--drag-right-only', !flipped && orderArray[axisIndex] === 1)\n    .classed('cursor--drag-left-only', !flipped && orderArray[axisIndex] === orderArray.length)\n    .classed('cursor--drag-vertical', flipped)\n    .classed('cursor--drag-up-only', flipped && orderArray[axisIndex] === 1)\n    .classed('cursor--drag-down-only', flipped && orderArray[axisIndex] === orderArray.length)\n}\n","import {Selection} from \"d3\";\nimport {addSeriesHighlighting, applyMixins, Chart, DataSeriesChartMixin, validateWindow, Window} from \"respvis-core\";\nimport {ParcoordChartData, ParcoordChartUserArgs, validateParcoordChart} from \"./validate-parcoord-chart\";\nimport {renderParcoordSeries} from \"../parcoord-series/render/render-parcoord-series\";\n\ntype WindowSelection = Selection<HTMLDivElement, Window & ParcoordChartData>\ntype ChartSelection = Selection<SVGSVGElement, Window & ParcoordChartData>\n\nexport interface ParcoordChart extends DataSeriesChartMixin {}\nexport class ParcoordChart extends Chart {\n  constructor(windowSelection: Selection<HTMLDivElement>, data: ParcoordChartUserArgs) {\n    super()\n    this._windowS = windowSelection as WindowSelection\n    this.revalidate(data)\n  }\n\n  _windowS: WindowSelection\n  get windowS(): WindowSelection { return this._windowS }\n  get chartS(): ChartSelection {\n    return ((this._chartS && !this._chartS.empty()) ? this._chartS :\n      this.layouterS.selectAll('svg.chart')) as ChartSelection\n  }\n\n  protected renderContent() {\n    this.renderSeriesChartComponents()\n\n    const series = this.chartS.datum().series\n      .cloneToRenderData().applyFilter().applyZoom().applyInversion()\n    const {lineSeriesS} = renderParcoordSeries(this.drawAreaS, [series])\n\n    lineSeriesS.call(addSeriesHighlighting)\n  }\n\n  public revalidate(data: ParcoordChartUserArgs): void {\n    const initialWindowData = validateWindow({...data, type: 'parcoord', renderer: this})\n    const chartData = validateParcoordChart({...data, renderer: this})\n    this.windowS.datum({...initialWindowData, ...chartData})\n  }\n}\n\napplyMixins(ParcoordChart, [DataSeriesChartMixin])\n\n","import {Selection} from \"d3\";\nimport {createSelectionClasses, SVGGroupingElement} from \"respvis-core\";\nimport {Line, LineSeries} from \"respvis-line\";\nimport {ParcoordSeries} from \"../parcoord-series\";\nimport {renderParcoordLineSeries} from \"./render-line-series\";\nimport {renderParcoordAxisSeries} from \"./render-parcoord-axis-series\";\n\nexport function renderParcoordSeries(parentS: Selection<SVGGroupingElement>, series: ParcoordSeries[], ...classes: string[]) {\n  const {classString, selector} = createSelectionClasses(classes)\n  const seriesS = parentS\n    .selectAll<SVGSVGElement, LineSeries>(`${selector}.series-parcoord`)\n    .data(series)\n    .join('g')\n    .classed(`${classString} series-parcoord`, true)\n    .attr('data-ignore-layout-children', true)\n\n  const createSelection = (type: 'parcoord-line' | 'parcoord-axis') => {\n    return seriesS\n      .selectAll<SVGSVGElement, ParcoordSeries>(`.series-${type}`)\n      .data(d => [d])\n      .join('g')\n      .classed(`series-${type}`, true)\n  }\n\n  seriesS.each(function(d) {\n    const lineS = createSelection('parcoord-line')\n    const axisS = createSelection('parcoord-axis')\n    renderParcoordLineSeries(lineS)\n    renderParcoordAxisSeries(axisS)\n  })\n\n  const lineSeriesS = seriesS.selectAll<SVGSVGElement, ParcoordSeries>('.series-parcoord-line')\n  const lineS = lineSeriesS.selectAll<SVGSVGElement, Line>('.line')\n  const axisSeriesS = seriesS.selectAll<SVGSVGElement, ParcoordSeries>('.series-parcoord-axis')\n  const axisS = axisSeriesS.selectAll<SVGSVGElement, Line>('.axis')\n\n  return { seriesS, lineSeriesS, lineS, axisSeriesS, axisS}\n}\n"],"names":["backgroundSVGOnly","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__read","o","m","Symbol","iterator","r","ar","next","done","push","value","error","__spreadArray","to","from","pack","l","slice","concat","SuppressedError","LengthDimensions","CSSBreakpointLengthRegex","isCSSBreakpointLengthValue","match","CSSLengthRegex","isCSSLengthValue","Orientations","AxisLayoutsHorizontal","AxisLayoutsVertical","AxisLayouts","categoryRegex","genKeyObjectFromObject","object","keys","reduce","prev","accu","maxBreakpointCount","defaultExtrema","min","max","pxUpperLimit","pxLowerLimit","defaultScope","defaultLayoutIndex","defaultStyleClass","noParentKey","ErrorMessages","categoricalValuesMismatch","sequentialColorValuesMismatch","defaultError","invalidResponsiveValue","invalidExtremaCombination","elementNotExisting","responsiveValueHasNoValues","invalidScaledValuesCombination","invalidArgumentForSeries","missingArgumentForSeries","invalidWindowsSetting","evaluatingCSSUnitError","convertingInvalidUnit","emptyValueArrayProvided","parcoordMinAxesCount","cssVarsDefaults","cssVarDefaultsKeys","cssVars","cursorClasses","detectClassChange","element","onClassChange","observer","MutationObserver","mutationsList","mutationsList_1","__values","mutationsList_1_1","mutation","type","attributeName","observe","attributes","attributeFilter","splitKey","key","split","combineKeys","_a","current","trimStart","mergeKeys","getActiveKeys","keysActive","filter","Key","rawKey","getIndex","matchIndex","parseInt","getSeries","getSeriesCategory","getAxisCategories","regex","pairs","exec","cssLengthInPx","dim","unit","valueNumber","parseFloat","getComputedStyle","document","documentElement","fontSize","Error","getBoundingClientRect","getCSSVarLengthInPx","cssVar","defaultValue","val","getPropertyValue","calcLimited","num","lowerLimit","upperLimit","ascending","a","NaN","descending","bisector","f","compare1","compare2","delta","left","x","lo","hi","mid","zero","center","right","bisectRight","bisect","InternMap","Map","entries","keyof","super","defineProperties","_intern","_key","set","get","intern_get","has","intern_set","delete","intern_delete","valueOf","e10","Math","sqrt","e5","e2","tickSpec","start","stop","count","step","power","floor","log10","pow","factor","i1","i2","inc","round","tickIncrement","tickStep","reverse","range","ceil","identity$4","top","bottom","epsilon","translateX","translateY","y","number","scale","offset","bandwidth","entering","__axis","axis","orient","tickArguments","tickValues","tickFormat","tickSizeInner","tickSizeOuter","tickPadding","window","devicePixelRatio","k","transform","context","values","ticks","domain","format","identity","spacing","range0","range1","position","copy","selection","path","selectAll","data","tick","order","tickExit","exit","tickEnter","enter","append","attr","line","select","text","merge","insert","transition","isFinite","getAttribute","parentNode","remove","each","_","tickSize","axisTop","axisRight","axisBottom","axisLeft","noop","dispatch","test","Dispatch","name","c","callback","on","typename","types","T","trim","map","that","args","xhtml","namespaces","svg","xlink","xml","xmlns","namespace","prefix","space","local","creatorInherit","ownerDocument","uri","namespaceURI","createElement","createElementNS","creatorFixed","fullname","creator","none","selector","querySelector","array","isArray","empty","selectorAll","querySelectorAll","matcher","matches","childMatcher","node","find","childFirst","firstElementChild","children","sparse","update","EnterNode","parent","datum","_next","_parent","__data__","bindIndex","group","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","arraylike","attrRemove","removeAttribute","attrRemoveNS","removeAttributeNS","attrConstant","setAttribute","attrConstantNS","setAttributeNS","attrFunction","v","attrFunctionNS","defaultView","styleRemove","style","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","propertyRemove","propertyConstant","propertyFunction","classArray","string","classList","ClassList","_node","_names","classedAdd","names","list","add","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","appendChild","lower","previousSibling","insertBefore","firstChild","constantNull","removeChild","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","onRemove","__on","j","removeEventListener","listener","options","onAdd","event","contextListener","addEventListener","dispatchEvent","params","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","child","join","splice","contains","root","Selection","groups","parents","_groups","_parents","pointer","sourceEvent","undefined","currentTarget","ownerSVGElement","createSVGPoint","point","clientX","clientY","matrixTransform","getScreenCTM","inverse","rect","clientLeft","clientTop","pageX","pageY","subgroups","subnode","subgroup","arrayAll","selectChild","childFind","selectChildren","childrenFilter","bind","enterGroup","updateGroup","previous","i0","_enter","_exit","onenter","onupdate","onexit","groups0","groups1","m0","m1","merges","group0","group1","compareDocumentPosition","sort","compare","compareNode","sortgroups","sortgroup","nodes","size","getAttributeNS","property","classed","html","before","deep","typenames","parseTypenames","nonpassive","passive","nonpassivecapture","capture","nopropagation","stopImmediatePropagation","noevent$1","preventDefault","dragDisable","view","noevent","__noselect","MozUserSelect","yesdrag","noclick","setTimeout","constant$2","DragEvent","subject","target","identifier","active","dx","dy","enumerable","configurable","defaultFilter","ctrlKey","button","defaultContainer","defaultSubject","defaultTouchable","navigator","maxTouchPoints","drag","mousedownx","mousedowny","mousemoving","touchending","container","touchable","gestures","listeners","clickDistance2","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","mousemoved","mouseupped","nodrag","mouse","touches","changedTouches","clearTimeout","touch","p0","constant","clickDistance","define","factory","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","toLowerCase","rgbn","Rgb","rgba","hsla","g","opacity","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","isNaN","toString","h","Hsl","hslConvert","clamph","clampt","hsl2rgb","m2","channels","displayable","formatHex8","formatHsl","clamp","constant$1","gamma","nogamma","exponential","linear","interpolateRgb","rgbGamma","end","colorRgb","numberArray","genericArray","nb","na","date$1","Date","setTime","interpolateNumber","reA","reB","source","interpolateString","am","bm","bs","bi","lastIndex","q","index","one","interpolate$1","date","ArrayBuffer","isView","DataView","interpolateRound","svgNode","degrees","PI","rotate","skewX","scaleX","scaleY","decompose","atan2","atan","interpolateTransform","parse","pxComma","pxParen","degParen","pop","xa","ya","xb","yb","translate","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","interpolateTransformSvg","baseVal","consolidate","matrix","cosh","exp","taskHead","taskTail","interpolateZoom","zoomRho","rho","rho2","rho4","zoom","p1","S","ux0","uy0","w0","ux1","uy1","w1","d2","log","d1","b0","b1","r0","r1","coshr0","u","sinh","duration","SQRT2","_1","_2","frame","timeout","interval","pokeDelay","clockLast","clockNow","clockSkew","clock","performance","now","setFrame","requestAnimationFrame","clearNow","Timer","_call","_time","timer","delay","time","restart","wake","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","clearInterval","setInterval","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","id","timing","schedules","__transition","self","tween","state","ease","init","interrupt","tweenRemove","tween0","tween1","tweenFunction","tweenValue","_id","interpolate","value1","string00","interpolate0","string1","string0","string10","attrTweenNS","attrInterpolateNS","_value","attrTween","attrInterpolate","delayFunction","delayConstant","durationFunction","durationConstant","Transition","_name","newId","selection_prototype","cubicOut","inherit","id0","id1","on0","on1","sit","every","onFunction","styleTween","styleNull","listener0","styleMaybeRemove","styleInterpolate","textTween","textInterpolate","removeFunction","easeConstant","easeVarying","Promise","resolve","reject","cancel","defaultTiming","formatDecimalParts","toExponential","coefficient","exponent","abs","prefixExponent","re","formatSpecifier","specifier","FormatSpecifier","fill","align","sign","symbol","width","comma","precision","formatRounded","formatTypes","toFixed","toLocaleString","replace","toPrecision","X","toUpperCase","identity$2","locale","formatPrefix","prefixes","formatLocale$1","grouping","thousands","Number","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","percent","minus","nan","newFormat","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","formatTrim","charCodeAt","padding","initRange","initInterpolator","interpolator","formatLocale","implicit","ordinal","unknown","band","ordinalRange","paddingInner","paddingOuter","rescale","sequence","rangeRound","pointish","normalize","bimap","d0","polymap","transformer","untransform","piecewise","output","input","interpolateValue","invert","continuous","precisionPrefix","precisionRound","precisionFixed","linearish","nice","prestep","maxIter","transformPow","transformSqrt","transformSquare","powish","timeInterval","floori","offseti","field","millisecond","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","second","getMilliseconds","getUTCSeconds","timeMinute","getSeconds","getMinutes","utcMinute","setUTCSeconds","getUTCMinutes","timeHour","getHours","utcHour","setUTCMinutes","getUTCHours","timeDay","setHours","setDate","getDate","getTimezoneOffset","utcDay","setUTCHours","setUTCDate","getUTCDate","unixDay","timeWeekday","getDay","timeSunday","timeMonday","timeTuesday","timeWednesday","timeThursday","timeFriday","timeSaturday","utcWeekday","getUTCDay","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","timeMonth","setMonth","getMonth","getFullYear","utcMonth","setUTCMonth","getUTCMonth","getUTCFullYear","timeYear","setFullYear","utcYear","setUTCFullYear","timeTicks","timeTickInterval","year","month","week","day","hour","minute","tickIntervals","tickInterval","ticker","localDate","H","M","L","utcDate","UTC","newDate","timeFormat","pads","numberRe","percentRe","requoteRe","pad","requote","formatRe","formatLookup","parseWeekdayNumberSunday","w","parseWeekdayNumberMonday","parseWeekNumberSunday","U","parseWeekNumberISO","V","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseQuarter","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","dISO","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","formatYear","formatYearISO","formatFullYear","formatFullYearISO","formatZone","z","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","getUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","UTCdISO","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCYearISO","formatUTCFullYear","formatUTCFullYearISO","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","calendar","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","x0","x1","timeWeek","timeSecond","sequential","k10","locale_dateTime","dateTime","locale_date","locale_time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","A","B","G","I","Y","utcFormats","parses","parseSpecifier","charAt","newParse","utcFormat","utcParse","defaultLocale","ZoomEvent","Transform","applyX","applyY","location","invertX","invertY","rescaleX","rescaleY","defaultExtent","SVGElement","hasAttribute","viewBox","height","clientWidth","clientHeight","defaultTransform","__zoom","defaultWheelDelta","deltaY","deltaMode","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","touchstarting","touchfirst","constrain","wheelDelta","scaleExtent","touchDelay","wheelDelay","tapDistance","wheeled","dblclicked","centroid","clean","__zooming","Gesture","taps","wheel","moved","y0","dragEnable","k1","shiftKey","started","touch0","touch1","l0","l1","dp","dl","hypot","collection","scaleBy","scaleTo","translateBy","translateTo","emit","mapSelection","mapper","mappingNode","applyClassList","forEach","classToApply","elementFromSelection","cssVarFromSelection","Element","createSelectionClasses","classes","leadingSpace","currentClass","classString","relateDragWayToSelection","TouchEvent","_b","pointerPositionX","MouseEvent","pointerPositionY","fromLeftTotal","fromTopTotal","fromLeftPercent","fromTopPercent","relateDragWayToSelectionByDiff","dyRelative","dxRelative","hasDrag","attachActiveCursorLocking","mutationObserver","activeCursorClasses","activateCursors","activeClass","disconnect","nearestCursorElement","closest","fillActiveClasses","updateCursorClasses","cursorClass","addD3TransitionClass","addD3TransitionClassForSelection","removeD3TransitionClassSelection","addCSSTransitionEnterClass","delayMS","addCSSTransitionExitClass","cancelExitClassOnUpdate","throttle","func","delayMs","lastTime","_i","currentTime","getTime","ThrottleScheduled","invokeScheduled","_this","timeDiff","formatWithDecimalZero","formatFunction","bboxDiffSVG","svgS1","svgS2","bbox1","getBBox","bbox2","horizontalDiff","leftCornersYDiff","verticalDiff","leftCornersXDiff","DOMRect","positionRound","decimals","positionEquals","positionA","positionB","positionToString","positionFromString","str","parts","positionToAttrs","selectionOrTransition","positionFromAttrs","positionToTransformAttr","positionSVGTextToLayoutCenter","svgS","bounds","textElement","textSVGWidth","wrapTextByTwinWidth","textS","singleTextS","el","rectFromString","wrapTextActive","lineHeight","words","word","tspan","getComputedTextLength","textAlign","diff","wrapText","sizeRound","sizeEquals","sizeToString","sizeFromString","sizeToAttrs","sizeFromAttrs","elementComputedStyleWithoutDefaults","properties","dummy","parentElement","defaultStyle","isElement","obj","HTMLElement","RVArray","elementSVGPresentationAttrs","elementSVGTransformStyles","rectRound","rectEquals","rectA","rectB","rectMinimized","rectCenter","rectFitStroke","stroke","rectPosition","sizePercentageFromTopLeft","rectTop","rectBottom","rectLeft","rectRight","rectBottomLeft","rectBottomRight","rectTopRight","rectTopLeft","rectToString","rectToViewBox","rectToAttrs","rectFromAttrs","rectFromSize","rectToPath","circleRound","circle","radius","circleEquals","circleToString","circleFromString","circleToAttrs","circleToAttrsFromSelection","circleFromAttrs","circleMinimized","circleFitStroke","circlePosition","angleInDegrees","distancePercentage","angleInRad","cos","sin","circleInsideRect","circleOutsideRect","circleToPath","cx","cy","ellipseInsideRect","rx","ry","ellipseToAttrs","ellipse","lineToPath","positions","normalizeAngle","applyMixins","derivedCtor","constructors","baseCtor","getOwnPropertyNames","defineProperty","getOwnPropertyDescriptor","uniqueId","crypto","randomUUID","random","padStart","elementRelativeBounds","console","assert","isConnected","parentBounds","elementAbsoluteBounds","viewPortE","elementBoundsFromViewport","elementBoundsBBox","equalizeLengths","array1","array2","lowerLength","sum","mapToRanks","arr","arrOrder","clearDuplicatedValues","includes","isNumberArray","isDateArray","hasValueOf","isStringArray","Breakpoints","dimension","getLengthAt","breakPointIndex","defaultMinWidth","defaultMaxWidth","getSurroundingLengths","layoutWidthIndex","getCurrentLayoutWidthIndex","referenceValue","getCurrentLayoutWidthIndexFromCSS","indexValueQueried","getCSSFactors","getTransformed","updateLayoutCSSVars","transformedBreakpoints","preBreakPointLength","postBreakPointLength","ComponentBreakpoints","updateCSSVars","getLayoutWidthIndexFromCSS","ResponsivePropertyBase","dependentOn","scope","getLayoutSelection","scopeMapping","getBreakpoints","breakpoints","getFirstValidPreLayoutIndex","layoutIndex","mapping","getFirstValidPostLayoutIndex","exactBreakpoint","getFirstValidLayoutIndex","getLastValidLayoutIndex","breakpointLength","indices","getCurrentLayoutIndexFromCSS","isResponsiveValueUserArgsResponsive","arg","validateResponsiveValue","ResponsiveValue","_super","estimate","getCurrentResponsiveValue","isBreakpointPropertyUserArgsResponsive","validateBreakpointProperty","BreakpointProperty","breakpointValues","getRespValInterpolated","scopes","desiredElement","layoutBreakpointsS","breakpointsTransformed","respVal","layout","preBreakpointIndex","getBreakpointData","defaultMaxLength","preBreakpoint","postBreakpoint","firstBreakpoint","lastBreakpoint","validateCategories","referenceData","categoriesKey","title","categoriesAligned","categoryMap","acc","formatValue","styleClass","categoryArray","configureTickAngles","axisS","ticksS","angle","renderer","restAxisD","tickOrientation","series","responsiveState","currentlyFlipped","tickOrientationFlipped","axisDomainS","chart","chartS","elementLength","angleDiff","lengthRatio","calculateTickAngles","tickS","axisElement","axisLocation","pivotS","tickAngleConfig","textAnchor","dominantBaseline","transformFixed","transformRelative","normalizedAngle","configureTickAngle","bottomConfig","topConfig","getAngleState","anchorInRotationFirstHalf","anchorParallelToAxis","baseLineAround180Degree","baseLineAround0Degree","moreSpace","renderBgSVGOnlyBBox","parentS","refS","backgroundS","offsetX","offsetY","renderBgSVGOnlyByRect","props","renderAxisLayout","orientation","tickLinesS","resetTickLines","horizontalLayout","verticalLayout","generators","d3AxisLeft","d3AxisRight","d3AxisBottom","d3AxisTop","axisLayout","unusedLayout","axisD","titleWrapperS","subTitle","renderAxisTicksPreGeneration","modifyAxisTicksPostGeneration","renderAxis","axisGenerator","scaledValues","configureAxis","configureAxisValid","filteredScaledValues","cloneFiltered","d3Axis","renderAxisSequence","validateBaseAxis","validateLightWeightAxis","isScale","isScaleNumeric","isScaleCategory","isScaleTime","ScaledValuesSpatialBase","horizontalRange","verticalRange","parentKey","inverted","updateRange","getScaledValue","getScaledValueStart","getScaledValueEnd","getRangeByPercent","considerInverse","orientationArg","percentRangeFormulaWithInverse","percentRangeFormulaWithoutInverse","getRangeInverseUndone","getCurrentRangeInversed","getCurrentRangeMax","originalRange","isKeyActiveByKey","setKeyActiveIfDefined","cloneZoomed","axisType","cloneRangeInversed","horizontal","vertical","ScaledValuesCategorical","tag","scaleBand","flippedScale","categories","getOrder","getStyleClass","valByIndexFormula","middle","isValueActive","getCombinedKey","category","getCategoryData","rawCategory","categoryKey","combinedKey","activeDomain","atScreenPosition","activeValues","upper","getNearestValue","ScaledValuesTemporal","extentMin","valueof","extentMax","scaleTime","filteredRanges","nearest","ScaledValuesNumeric","scaleLinear","validateScaledValuesSpatial","axisScaleArgs","axisKey","valuesNum","alignScaledValuesLengths","vws1","vws2","vws1Aligned","vws2Aligned","orderScaledValuesSpatial","wrappers","valuesOrdered","categorical","wrapper","ScaledValuesCumulativeSummation","linearValues","categoricalValues","additionalCategories","aggregatedScale","numericalValues","sumCached","aggregationResult","numberCategories","groupedValues","summedValues","numberValues","cumulativeValues","categoryOrder","currentValue","aggregatedValuesOrder","vals","aggregatedDomain","validateSequentialColor","validateZoom","currentIn","in","currentOut","currentTransform","zoomIdentity","behaviour","tooltipSelector","tooltipPositionStrategies","Tooltip","seriesTooltipVisible","movableCrossTooltipVisible","positionStrategySeries","positionStrategyInspect","autoOffset","_c","_d","onInspectMove","_e","isVisible","applyPositionStrategy","positionStrategy","tooltipS","mousePosition","updateTooltipPositionCSSVars","strategy","setTooltipVisibility","visibility","config","windowSize","innerWidth","innerHeight","offsetDirection","leftOffset","rightOffset","topOffset","bottomOffset","renderDataSeriesTooltip","seriesS","tooltip","windowS","seriesTooltipS","item","renderData","markerTooltipGenerator","renderTooltip","bodyS","drawAreaS","windowHovered","drawAreaBgS","settings","renderMovableCrossTooltip","renderContent","toolTipCrossStateS","crossStateTextS","onDrawAreaLeave","windowD","screenData","getScaledValuesAtScreenPosition","horizontalName","verticalName","firstText","secondText","onDrawAreaMove","renderWindow","defaultWindowSettings","downloadStyleType","downloadRemoveClasses","downloadRemoveDataKeys","downloadRemoveDataStyles","downloadRemoveBgElements","downloadPrettifyActive","downloadPrettifyIndentionSpaces","downloadMarginLeft","downloadMarginBottom","downloadMarginRight","downloadMarginTop","movableCrossActive","downloadAttributeMaxDecimals","downloadAttributeMaxDecimalsActive","parcoordEquidistantAxes","windowSettingsKeys","Revertible","defaultState","snapshot","setImmediately","setDeferred","reset","validateWindow","resizeEventListener","observeS","dispatchS","resizeEventDispatcher","ResizeObserver","renderChart","paddingWrapperS","renderPaddingWrapper","paddingS","drawArea","boundsAttr","background","gridArea","orientations","containerSArr","renderPaddingContainers","paddingContainerBottomS","paddingContainerTopS","paddingContainerRightS","paddingContainerLeftS","sel","paddingLeft","paddingTop","paddingRight","paddingBottom","drawAreaClipPath","clipPathRect","renderDrawArea","restDrawArea","header","renderHeader","renderTitle","renderSubtitle","layoutNodeStyleAttr","propTrue","computedStyleHTMLElement","fitWidth","fitHeight","bbox","varIndex","len","prop","layoutNodeClassAttr","tagName","layoutNodeDataAttrs","svgTwin","layoutE","svgE","dataAttrsToObj","attrs","startsWith","layoutAttrs","svgAttrs","layoutNodeChildren","childS","layedOutChildren","div","filteredChildS","filteredChildPositionerS","parentIgnoresChildrenAttr","parentSFiltered","hasNoLayoutContainerDescandant","information","isLayoutContainer","ignoreSelfAttr","hasNoLayoutContainerDescendant","ignoreBoundsBecauseOfParent","ignoreBoundsBecauseOfSelf","ignoreBoundsBecauseInBetween","ignoredByAncestor","ignoreBounds","renderLayouter","layouterCompute","layouterS","layouter","layoutContainerCompute","layoutContainerS","anyBoundsChanged","layoutRootS","layoutS","boundsChanged","anyChanged","prevBounds","changed","svgParentE","layoutNodeBounds","Chart","addedListeners","initialRenderHappened","filterDispatch","subsequentRenderCount","unmounted","_windowS","_layouterS","_chartS","_legendS","_paddingWrapperS","_drawAreaS","_drawAreaBgS","_drawAreaClipPathS","exitEnterActive","buildChart","render","chartDivS","resizeObserver","addCustomListener","addFinalListeners","immediateInteractionThrottle","onImmediateInteractionRender","standardInteractionThrottle","rerenderAfterResizeScheduled","onResizeRender","onStandardInteractionRender","inRenderLoop","unmountChart","validateChart","addLegendHoverHighlighting","legendS","legendItemS","hover","token","highlightElements","endsWith","createLegendItems","legend","symbols","originalData","items","label","renderLegendCategories","legendCategoriesS","itemS","itemD","symbolS","dataKey","toggle","renderLegend","legendD","colorScaleGradientS","domainMin","domainDiff","legendColorScaleS","renderLegendColorScale","validateLegend","renderDialog","dialogS","toggleTimeout","triggerEnter","triggerExit","onClickOutside","bindOpenerToDialog","dialogOpenerS","transitionMS","dialogE","showModal","show","close","onOpenerClick","HTMLDialogElement","renderTool","additionalClasses","additionalClass","optimizeSVG","elementS","i_1","attribute","modifiedValue","roundSVGAttributes","SVGClipPathElement","removeBackgrounds","getActiveCSSRulesForElement","cssRules","Set","targetClone","styleSheets","styleSheet","getActiveCSSRules","rule","rules","cssRule","CSSMediaRule","matchMedia","media","mediaText","CSSContainerRule","CSSStyleRule","CSSPageRule","getStyleRules","getWholeSelector","parentRule","selectorText","cssText","selectors","activeElementInDOM","beforeStyleComputed","beforeStyle","styleElement","createTextNode","head","afterStyle","CSSRuleHasEffect","adaptedSelector","cssStyleRule","selectorParts","unRestrainedSelector","DOMException","getUnrestrainedSelectors","applyDownloadStyle","original","activeCSSRules","activeCSSVars","computedStyles","cssVariables","propertyName","getActiveCSSVars","cssVarRule","entry","relevantCSSVars","cssVarKey","getRelevantCSSVars","content","styleTag","ruleXMLConform","embedCSS","attrsFromComputedStyle","copyInlineStyles","svgPresentationStyle","matrixPrev","svgTransformStyles","bboxX","bboxY","xTrans","yTrans","baseMatrix","transformToOriginMatrix","transformFromOriginMatrix","finalMatrix","multiply","matrixString","applyTransformOriginStyles","prettifySVG","code","prettifiedSVG","propertiesToRemove","styleRegex","removePropertiesFromStyle","propertyRegex","updatedStyle","propertyValue","_match","whiteSpace","styleAttr","modifiedStyle","removePropertiesFromSVGStyle","addNewLinesBeforeOpeningTags","regexGroupTags","addNewlineBeforeGroupCloseTag","indentationChars","regexAllTags","regexNesting","regexNonNesting","tabs","tabString","repeat","addTabsPerNestingLevel","regexStyle","cssCode","lines","prettifiedLines","spacesPerTab","indentLevel","indentation","prettifiedCSS","prettifyStyleTags","renderButton","renderSimpleTooltip","renderInputLabels","itemsS","labelData","renderInputLabel","labelS","onClick","onInputClick","activeClasses","inactiveClasses","renderSVGSeries","rawSVGs","parser","DOMParser","svgElements","rawSVG","parseFromString","RadioLabel","defaultVal","onChange","info","inputS","infoButtonS","renderFieldset","currentItemS","filterable","collapsable","CollapseDownRAW","fieldsetLegendRender","fieldsetCollapseWrapperRender","currentS","collapsableS","fieldsetS","collapsableWrapperS","currentlyCollapsed","renderStyleTypeOptions","currentSettings","sharedData","CheckBoxLabel","renderAttributeRemovalOptions","checked","NumberLabel","onInput","valueAsInt","valueAsFloat","inMinMaxRange","renderDecimalNumberOptions","renderDownloadTool","toolbarS","downloadToolS","dialogContainerS","downloadSVGRaw","settingKey","abbreviation","onInputNumber","onChangeNumber","option","renderMarginOptions","renderPrettifyOptions","buttonS","chartSelection","fileName","clonedChart","finalX","finalY","finalWidth","finalHeight","cloneContainer","cloneHTML","blob","Blob","url","URL","createObjectURL","anchor","Function","href","download","body","click","downloadChart","downloadButtonRender","cancelSVGRaw","cancelButtonRender","renderElementRemovalOptions","RangeLabel","onDrag","renderFilterTool","seriesCollection","axes","getAxes","contentS","filterToolS","filterSVGRaw","menuToolsItemsS","stopPropagation","renderSeriesControl","categoryText","renderCategoryControls","axesOrdered","axisOrdered","minFilter","maxFilter","minDomain","maxDomain","onNumberInput","labelD","doubleRangeSliderS","inputMin","inputMax","valueString","dragMinOverMax","dragMaxBelowMin","valueResult","createKeyedAxisCheckboxLabel","axisFormatFunction","flat","renderAxisLinearControls","axisScaledValues","getAxisCategoryProps","renderAxisControls","axisNecessary","clickSAddEnterExitAttributes","clickS","refE","renderToolbar","toolbarBarS","toolbarOpenerS","crossActivatorS","crossSVGRaw","renderCrossTool","chartToolS","chartSVGRaw","renderChartTool","otherElements","addSeriesHighlighting","equalDataS","toggleVal","renderLabelSeries","elements","labels","flatMap","getLabel","renderLabels","marker","joinS","tDurationString","tDuration","easeCubicOut","polarity","joinLabelSeries","DataSeriesChartMixin","addFilterListener","currentKey","chartD","renderSeriesChartComponents","renderLegendInfo","addSeriesLabels","seriesElementsS","addAllSeriesFeatures","validateDataSeriesArgs","getMergedKeys","ResponsiveState","_series","_flipped","flipped","_currentlyFlipped","_previouslyFlipped","_drawAreaWidth","drawAreaWidth","_drawAreaHeight","drawAreaHeight","drawAreaRange","horizontalInverted","verticalInverted","placeholder","EmptySeries","cloneToRenderData","applyFilter","applyZoom","applyInversion","horizontalNearestRealValue","horizontalScreenValue","verticalNearestRealValue","verticalScreenValue","validateCartesianAxis","originalAxis","gridLineFactor","validateCartesianChart","getMainSeries","renderCartesianAxes","horizontalAxisType","verticalAxisType","verticalAxisD","horizontalAxisD","aggScaledValues","horizontalAxisDAgg","verticalAxisDAgg","renderGrid","gridAreaS","horizontalAxisS","verticalAxisS","drawAreaBgE","drawAreaPos","visibilityCheck","computedStyle","isVisibleFallback","display","checkVisibility","tickPositions","tickPos","linePositions","linePositionsFromTickPositions","maxPosition_1","x2","cartesianGridHorizontalLinesRender","maxPosition_2","y1","y2","cartesianGridVerticalLinesRender","maxPosition","lastPosition","splitDistance","shift","factorSmaller1","distances","pos","maxDistanceIndex","pIndex","cIndex","maxDistance","factorGreater1","factorEquals1","position1","position2","distance","renderOriginLine","needsBaseLine","hasNegativeVal","hasPositiveVal","x1_1","x2_1","y1_1","y2_1","y1_2","y2_2","x1_2","x2_2","CartesianChartMixin","getAxisInversionState","xAxisS","yAxisS","renderCartesianAxis","renderCartesianComponents","CartesianSeries","getAxisData","scaleFormat","appliedFormat","screenValue","nearestRealValue","formattedValue","colorFiltered","xDirection","yDirection","handleZoom","throttledZoom","onZoomDrawArea","CartesianResponsiveState","_inversionState","horizontalVals","verticalVals","updateInversionState","xOrientation","yOrientation","inversionState","validateCartesianSeriesArgs","xAligned","yAligned","xKey","yKey","seriesCategoryKey","cloneCartesianSeriesData","Bar","xValue","yValue","categoryFormatted","positionOnTop","getLabelPositionHorizontal","getLabelPositionVertical","yPositive","BarBaseResponsiveState","getBarBaseRect","getBarRectHorizontal","getBarRectVertical","linearVals","categoryVals","barRectFormula","barCategoryStart","barLinearStart","barCategoryLength","barLinearLength","BarBaseSeries","getBars","optionalColorValues","getRect","at","BarLabelsDataCollection","bar","validateBarBaseSeriesArgs","cartesianData","BarStackedSeries","aggregationScale","validateBarStackedSeriesArgs","scaledValuesOriginalY","wholeBarRect","scaledValuesOriginalYRange","scaledValuesOriginalYRangeInverted","innerValueStart","createStackedBarRect","BarGroupedSeries","validateBarGroupedSeriesArgs","categoryGroupValues","innerScaleDomain","innerScale","innerValue","createGroupedBarRect","BarStandardSeries","joinBarSeries","seriesSelection","joinSelection","strokeSize","renderBarSeries","barS","validateBarChart","BarChart","windowSelection","revalidate","initialWindowData","chartData","PointResponsiveState","radii","extrema","minimum","maximum","breakpointDiff","currentDiff","minimumDiff","maximumDiff","interpolateBubbleRadius","updateRadii","getMaxRadius","getRadius","breakpointLengthDiff","currentLengthDiff","valueDiff","interpolateInterpolatedRadius","getRadiusValue","getPointCircle","isBaseRadiusUserArgs","validateBaseRadius","isExtrema","validateBubbleRadius","extremaArgs","validateBubbleRadiusExtrema","PointLabelsDataCollection","positionStrategyHorizontal","positionStrategyVertical","getLabelData","validatePointSeriesArgs","clonePointSeriesData","PointSeries","minRadius","maxRadius","legendRadiusScaleS","renderRadiusScale","validateScatterPlot","scatterArgs","hasBubbleRadius","joinPointSeries","updateS","Point","radiusValue","colorValue","getLabelX","getLabelY","createPoints","grouped","seriesKey","optionalRadiiValues","pointsSingleGroup","pointsGrouped","createPoint","renderPointSeries","pointS","ScatterPlot","_g","_f","LineSeries","validateLineChart","joinLineSeries","renderLineSeries","createSelection","lineS","pointGroups","renderPointSubSeries","categoryKeys","renderLineSubSeries","lineSeriesS","pointSeriesS","LineChart","onDragEndAxisParcoord","axesPercentageScale","percentageRange","newPercentageRange","eOrder","equidistantAxesOptionsRender","checkSVGRaw","confirmButtonRender","validateKeyedAxis","upperRangeLimitPercent","lowerRangeLimitPercent","isValueInRangeLimit","axesInverted","axisIndex","findIndex","rangeMax_1","maxRangeGraphical_1","rangeMax","maxRangeGraphical","validateParcoordSeriesArgs","dimensions","alignedCategories","denominator","scaleOrdinal","percentageScreenScale","zooms","cloneParcoordData","ParcoordResponsiveState","_axisLayout","getAxisPosition","percentage","updateZoomOnFlip","updateScales","currentAxesSpaceRange","ZoomTransform","ParcoordSeries","getAxesDragDropOrdered","axis1","axis2","axisPosition","dimensionPosition","axisDiff","currentAxisPosition","axisName","dimensionValue","dimensionValueFormatted","activeIndices","activeAxes","activeRange","zoomDirection","validateParcoordChart","renderParcoordLineSeries","maxIndex","valueIndex","createLinePositions","createLines","valPos","axisPosPercent","axisPosReal","setUpAxisZoom","zoomB","onZoomAxis","pathChevronRender","pathScale","renderChevronLimiter","direction","upperChevronS","lowerChevronS","renderRectLimiter","rectLimiterDragable","alignLimiters","rectLimiterS","bboxPath","bboxDomain","upperRange","lowerRange","translateAlign","translateXUpper","translateXLower","rectLimiterBreadthString","rectLimiterBreadth","translateYUpper","translateYLower","addLimiterDrag","upperChevronBackgroundS","lowerChevronBackgroundS","limit","percentDiff","dragDown","getPercentDiff","appliedDiff","onRect","getPercent","throttledDrag","renderAxisInverter","inverterIconS","renderSVGArrowNarrowUp","inverterIconBgS","renderAxisInverterVerticalChart","subtitleS","renderAxisInverterHorizontalChart","svgWrapperS","transformWrapperS","ArrowUpNarrowSVG","setUpAxisDrag","drawAreaBackgroundS","dragWay","oldPercentage","newPercentage","currP","currPI","onDragAxisParcoord","renderParcoordAxisSeries","renderAxisLimiter","orderArray","updateAxisCursorClasses","ParcoordChart","axisSeriesS","renderParcoordSeries"],"mappings":"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","x_google_ignoreList":[1,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,205,206]}